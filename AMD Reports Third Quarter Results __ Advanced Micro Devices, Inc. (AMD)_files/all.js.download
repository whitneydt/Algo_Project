!function(e,n,o){function t(e,n){return typeof e===n}function a(){var e,n,o,a,s,i,r;for(var l in d)if(d.hasOwnProperty(l)){if(e=[],n=d[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(o=0;o<n.options.aliases.length;o++)e.push(n.options.aliases[o].toLowerCase());for(a=t(n.fn,"function")?n.fn():n.fn,s=0;s<e.length;s++)i=e[s],r=i.split("."),1===r.length?Modernizr[r[0]]=a:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=a),c.push((a?"":"no-")+r.join("-"))}}function s(e){var n=p.className,o=Modernizr._config.classPrefix||"";if(u&&(n=n.baseVal),Modernizr._config.enableJSClass){var t=new RegExp("(^|\\s)"+o+"no-js(\\s|$)");n=n.replace(t,"$1"+o+"js$2")}Modernizr._config.enableClasses&&(n+=" "+o+e.join(" "+o),u?p.className.baseVal=n:p.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):u?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function r(){var e=n.body;return e||(e=i(u?"svg":"body"),e.fake=!0),e}function l(e,o,t,a){var s,l,c,d,f="modernizr",u=i("div"),v=r();if(parseInt(t,10))for(;t--;)c=i("div"),c.id=a?a[t]:f+(t+1),u.appendChild(c);return s=i("style"),s.type="text/css",s.id="s"+f,(v.fake?v:u).appendChild(s),v.appendChild(u),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),u.id=f,v.fake&&(v.style.background="",v.style.overflow="hidden",d=p.style.overflow,p.style.overflow="hidden",p.appendChild(v)),l=o(u,e),v.fake?(v.parentNode.removeChild(v),p.style.overflow=d,p.offsetHeight):u.parentNode.removeChild(u),!!l}var c=[],d=[],f={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var o=this;setTimeout(function(){n(o[e])},0)},addTest:function(e,n,o){d.push({name:e,fn:n,options:o})},addAsyncTest:function(e){d.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=f,Modernizr=new Modernizr;var p=n.documentElement,u="svg"===p.nodeName.toLowerCase(),v=f._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];f._prefixes=v,Modernizr.addTest("video",function(){var e=i("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),n.vp9=e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),n.hls=e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(o){}return n});var h=f.testStyles=l;Modernizr.addTest("touchevents",function(){var o;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)o=!0;else{var t=["@media (",v.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");h(t,function(e){o=9===e.offsetTop})}return o}),a(),s(c),delete f.addTest,delete f.addAsyncTest;for(var m=0;m<Modernizr._q.length;m++)Modernizr._q[m]();e.Modernizr=Modernizr}(window,document);
if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function($){"use strict";var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||version[0]==1&&version[1]==9&&version[2]<1||version[0]>2){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}}(jQuery);+function($){"use strict";
// ALERT CLASS DEFINITION
var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.6";Alert.TRANSITION_DURATION=150;Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.closest(".alert")}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()};
// ALERT PLUGIN DEFINITION
function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;
// ALERT NO CONFLICT
$.fn.alert.noConflict=function(){$.fn.alert=old;return this};
// ALERT DATA-API
$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery);+function($){"use strict";
// BUTTON PUBLIC CLASS DEFINITION
var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);this.isLoading=false};Button.VERSION="3.3.6";Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state+="Text";if(data.resetText==null)$el.data("resetText",$el[val]());setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state]);if(state=="loadingText"){this.isLoading=true;$el.addClass(d).attr(d,d)}else if(this.isLoading){this.isLoading=false;$el.removeClass(d).removeAttr(d)}},this),0)};Button.prototype.toggle=function(){var changed=true;var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");if($input.prop("type")=="radio"){if($input.prop("checked"))changed=false;$parent.find(".active").removeClass("active");this.$element.addClass("active")}else if($input.prop("type")=="checkbox"){if($input.prop("checked")!==this.$element.hasClass("active"))changed=false;this.$element.toggleClass("active")}$input.prop("checked",this.$element.hasClass("active"));if(changed)$input.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data)$this.data("bs.button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})}var old=$.fn.button;$.fn.button=Plugin;$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};
// BUTTON DATA-API
$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");Plugin.call($btn,"toggle");if(!($(e.target).is('input[type="radio"]')||$(e.target).is('input[type="checkbox"]')))e.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);+function($){"use strict";
// DROPDOWN CLASS DEFINITION
var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.6";function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;if(e&&e.type=="click"&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget))})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find(".dropdown-menu"+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};
// APPLY TO STANDARD DROPDOWN ELEMENTS
$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery);+function($){"use strict";
// TOOLTIP PUBLIC CLASS DEFINITION
var Tooltip=function(element,options){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",element,options)};Tooltip.VERSION="3.3.6";Tooltip.TRANSITION_DURATION=150;Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusin"?"focus":"hover"]=true}if(self.tip().hasClass("in")||self.hoverState=="in"){self.hoverState="in";return}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState){if(this.inState[key])return true}return false};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusout"?"focus":"hover"]=false}if(self.isInStateTrue())return;clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this;var $tip=this.tip();var tipId=this.getUID(this.type);this.setContent();$tip.attr("id",tipId);this.$element.attr("aria-describedby",tipId);if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var viewportDim=this.getPosition(this.$viewport);placement=placement=="bottom"&&pos.bottom+actualHeight>viewportDim.bottom?"top":placement=="top"&&pos.top-actualHeight<viewportDim.top?"bottom":placement=="right"&&pos.right+actualWidth>viewportDim.width?"left":placement=="left"&&pos.left-actualWidth<viewportDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type);that.hoverState=null;if(prevHoverState=="out")that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top+=marginTop;offset.left+=marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight}var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left)offset.left+=delta.left;else offset.top+=delta.top;var isVertical=/top|bottom/.test(placement);var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight;var arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset);this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)};Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(callback){var that=this;var $tip=$(this.$tip);var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in")$tip.detach();that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type);callback&&callback()}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0];var isBody=el.tagName=="BODY";var elRect=el.getBoundingClientRect();if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}var elOffset=isBody?{top:0,left:0}:$element.offset();var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()};var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0;var viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll;var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding;var rightEdgeOffset=pos.left+viewportPadding+actualWidth;if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.right){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}return delta};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.getUID=function(prefix){do prefix+=~~(Math.random()*1e6);while(document.getElementById(prefix));return prefix};Tooltip.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self)}}if(e){self.inState.click=!self.inState.click;if(self.isInStateTrue())self.enter(self);else self.leave(self)}else{self.tip().hasClass("in")?self.leave(self):self.enter(self)}};Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout);this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type);if(that.$tip){that.$tip.detach()}that.$tip=null;that.$arrow=null;that.$viewport=null})};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.tooltip;$.fn.tooltip=Plugin;$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery);+function($){"use strict";
// POPOVER PUBLIC CLASS DEFINITION
var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.6";Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content").children().detach().end()[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.popover;$.fn.popover=Plugin;$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery);+function($){"use strict";
// TAB CLASS DEFINITION
var Tab=function(element){
// jscs:disable requireDollarBeforejQueryAssignment
this.element=$(element)};Tab.VERSION="3.3.6";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(selector);this.activate($this.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass("in")};
// TAB PLUGIN DEFINITION
function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;
// TAB NO CONFLICT
$.fn.tab.noConflict=function(){$.fn.tab=old;return this};
// TAB DATA-API
var clickHandler=function(e){e.preventDefault();Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery);+function($){"use strict";
// AFFIX CLASS DEFINITION
var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};Affix.VERSION="3.3.6";Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0,target:window};Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop();var position=this.$element.offset();var targetHeight=this.$target.height();if(offsetTop!=null&&this.affixed=="top")return scrollTop<=offsetTop?"top":false;if(this.affixed=="bottom"){if(offsetTop!=null)return scrollTop+this.unpin<=position.top?false:"bottom";return scrollTop+targetHeight<=scrollHeight-offsetBottom?false:"bottom"}var initializing=this.affixed==null;var colliderTop=initializing?scrollTop:position.top;var colliderHeight=initializing?targetHeight:height;if(offsetTop!=null&&scrollTop<=offsetTop)return"top";if(offsetBottom!=null&&colliderTop+colliderHeight>=scrollHeight-offsetBottom)return"bottom";return false};Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop();var position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var height=this.$element.height();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;var scrollHeight=Math.max($(document).height(),$(document.body).height());if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top(this.$element);if(typeof offsetBottom=="function")offsetBottom=offset.bottom(this.$element);var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){if(this.unpin!=null)this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:"");var e=$.Event(affixType+".bs.affix");this.$element.trigger(e);if(e.isDefaultPrevented())return;this.affixed=affix;this.unpin=affix=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}if(affix=="bottom"){this.$element.offset({top:scrollHeight-height-offsetBottom})}};
// AFFIX PLUGIN DEFINITION
function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data)$this.data("bs.affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.affix;$.fn.affix=Plugin;$.fn.affix.Constructor=Affix;
// AFFIX NO CONFLICT
$.fn.affix.noConflict=function(){$.fn.affix=old;return this};
// AFFIX DATA-API
$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom;if(data.offsetTop!=null)data.offset.top=data.offsetTop;Plugin.call($spy,data)})})}(jQuery);+function($){"use strict";
// COLLAPSE PUBLIC CLASS DEFINITION
var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.6";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}
// COLLAPSE PLUGIN DEFINITION
function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;
// COLLAPSE NO CONFLICT
$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};
// COLLAPSE DATA-API
$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);+function($){"use strict";
// SCROLLSPY CLASS DEFINITION
function ScrollSpy(element,options){this.$body=$(document.body);this.$scrollElement=$(element).is(document.body)?$(window):$(element);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this));this.refresh();this.process()}ScrollSpy.VERSION="3.3.6";ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};ScrollSpy.prototype.refresh=function(){var that=this;var offsetMethod="offset";var offsetBase=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!$.isWindow(this.$scrollElement[0])){offsetMethod="position";offsetBase=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]);that.targets.push(this[1])})};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.getScrollHeight();var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(this.scrollHeight!=scrollHeight){this.refresh()}if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null;return this.clear()}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate.bs.scrollspy")};ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data)$this.data("bs.scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.scrollspy;$.fn.scrollspy=Plugin;$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};
// SCROLLSPY DATA-API
$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery);+function($){"use strict";
// CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);
/*!
 * Bootstrap-select v1.7.2 (http://silviomoreto.github.io/bootstrap-select)
 *
 * Copyright 2013-2015 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */

(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module unless amdModuleId is set
    define(["jquery"], function (a0) {
      return (factory(a0));
    });
  } else if (typeof exports === 'object') {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(require("jquery"));
  } else {
    factory(jQuery);
  }
}(this, function () {

(function ($) {
  'use strict';

  //<editor-fold desc="Shims">
  if (!String.prototype.includes) {
    (function () {
      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`
      var toString = {}.toString;
      var defineProperty = (function () {
        // IE 8 only supports `Object.defineProperty` on DOM elements
        try {
          var object = {};
          var $defineProperty = Object.defineProperty;
          var result = $defineProperty(object, object, object) && $defineProperty;
        } catch (error) {
        }
        return result;
      }());
      var indexOf = ''.indexOf;
      var includes = function (search) {
        if (this == null) {
          throw TypeError();
        }
        var string = String(this);
        if (search && toString.call(search) == '[object RegExp]') {
          throw TypeError();
        }
        var stringLength = string.length;
        var searchString = String(search);
        var searchLength = searchString.length;
        var position = arguments.length > 1 ? arguments[1] : undefined;
        // `ToInteger`
        var pos = position ? Number(position) : 0;
        if (pos != pos) { // better `isNaN`
          pos = 0;
        }
        var start = Math.min(Math.max(pos, 0), stringLength);
        // Avoid the `indexOf` call if no match is possible
        if (searchLength + start > stringLength) {
          return false;
        }
        return indexOf.call(string, searchString, pos) != -1;
      };
      if (defineProperty) {
        defineProperty(String.prototype, 'includes', {
          'value': includes,
          'configurable': true,
          'writable': true
        });
      } else {
        String.prototype.includes = includes;
      }
    }());
  }

  if (!String.prototype.startsWith) {
    (function () {
      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`
      var defineProperty = (function () {
        // IE 8 only supports `Object.defineProperty` on DOM elements
        try {
          var object = {};
          var $defineProperty = Object.defineProperty;
          var result = $defineProperty(object, object, object) && $defineProperty;
        } catch (error) {
        }
        return result;
      }());
      var toString = {}.toString;
      var startsWith = function (search) {
        if (this == null) {
          throw TypeError();
        }
        var string = String(this);
        if (search && toString.call(search) == '[object RegExp]') {
          throw TypeError();
        }
        var stringLength = string.length;
        var searchString = String(search);
        var searchLength = searchString.length;
        var position = arguments.length > 1 ? arguments[1] : undefined;
        // `ToInteger`
        var pos = position ? Number(position) : 0;
        if (pos != pos) { // better `isNaN`
          pos = 0;
        }
        var start = Math.min(Math.max(pos, 0), stringLength);
        // Avoid the `indexOf` call if no match is possible
        if (searchLength + start > stringLength) {
          return false;
        }
        var index = -1;
        while (++index < searchLength) {
          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {
            return false;
          }
        }
        return true;
      };
      if (defineProperty) {
        defineProperty(String.prototype, 'startsWith', {
          'value': startsWith,
          'configurable': true,
          'writable': true
        });
      } else {
        String.prototype.startsWith = startsWith;
      }
    }());
  }

  if (!Object.keys) {
    Object.keys = function (
      o, // object
      k, // key
      r  // result array
      ){
      // initialize object and result
      r=[];
      // iterate over object keys
      for (k in o) 
          // fill result array with non-prototypical keys
        r.hasOwnProperty.call(o, k) && r.push(k);
      // return result
      return r
    };
  }
  //</editor-fold>

  // Case insensitive contains search
  $.expr[':'].icontains = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.text()).toUpperCase();
    return haystack.includes(meta[3].toUpperCase());
  };

  // Case insensitive begins search
  $.expr[':'].ibegins = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.text()).toUpperCase();
    return haystack.startsWith(meta[3].toUpperCase());
  };

  // Case and accent insensitive contains search
  $.expr[':'].aicontains = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.data('normalizedText') || $obj.text()).toUpperCase();
    return haystack.includes(meta[3].toUpperCase());
  };

  // Case and accent insensitive begins search
  $.expr[':'].aibegins = function (obj, index, meta) {
    var $obj = $(obj);
    var haystack = ($obj.data('tokens') || $obj.data('normalizedText') || $obj.text()).toUpperCase();
    return haystack.startsWith(meta[3].toUpperCase());
  };

  /**
   * Remove all diatrics from the given text.
   * @access private
   * @param {String} text
   * @returns {String}
   */
  function normalizeToBase(text) {
    var rExps = [
      {re: /[\xC0-\xC6]/g, ch: "A"},
      {re: /[\xE0-\xE6]/g, ch: "a"},
      {re: /[\xC8-\xCB]/g, ch: "E"},
      {re: /[\xE8-\xEB]/g, ch: "e"},
      {re: /[\xCC-\xCF]/g, ch: "I"},
      {re: /[\xEC-\xEF]/g, ch: "i"},
      {re: /[\xD2-\xD6]/g, ch: "O"},
      {re: /[\xF2-\xF6]/g, ch: "o"},
      {re: /[\xD9-\xDC]/g, ch: "U"},
      {re: /[\xF9-\xFC]/g, ch: "u"},
      {re: /[\xC7-\xE7]/g, ch: "c"},
      {re: /[\xD1]/g, ch: "N"},
      {re: /[\xF1]/g, ch: "n"}
    ];
    $.each(rExps, function () {
      text = text.replace(this.re, this.ch);
    });
    return text;
  }


  function htmlEscape(html) {
    var escapeMap = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#x27;',
      '`': '&#x60;'
    };
    var source = '(?:' + Object.keys(escapeMap).join('|') + ')',
        testRegexp = new RegExp(source),
        replaceRegexp = new RegExp(source, 'g'),
        string = html == null ? '' : '' + html;
    return testRegexp.test(string) ? string.replace(replaceRegexp, function (match) {
      return escapeMap[match];
    }) : string;
  }

  var Selectpicker = function (element, options, e) {
    if (e) {
      e.stopPropagation();
      e.preventDefault();
    }

    this.$element = $(element);
    this.$newElement = null;
    this.$button = null;
    this.$menu = null;
    this.$lis = null;
    this.options = options;

    // If we have no title yet, try to pull it from the html title attribute (jQuery doesnt' pick it up as it's not a
    // data-attribute)
    if (this.options.title === null) {
      this.options.title = this.$element.attr('title');
    }

    //Expose public methods
    this.val = Selectpicker.prototype.val;
    this.render = Selectpicker.prototype.render;
    this.refresh = Selectpicker.prototype.refresh;
    this.setStyle = Selectpicker.prototype.setStyle;
    this.selectAll = Selectpicker.prototype.selectAll;
    this.deselectAll = Selectpicker.prototype.deselectAll;
    this.destroy = Selectpicker.prototype.remove;
    this.remove = Selectpicker.prototype.remove;
    this.show = Selectpicker.prototype.show;
    this.hide = Selectpicker.prototype.hide;

    this.init();
  };

  Selectpicker.VERSION = '1.7.2';

  // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.
  Selectpicker.DEFAULTS = {
    noneSelectedText: 'Nothing selected',
    noneResultsText: 'No results matched {0}',
    countSelectedText: function (numSelected, numTotal) {
      return (numSelected == 1) ? "{0} item selected" : "{0} items selected";
    },
    maxOptionsText: function (numAll, numGroup) {
      return [
        (numAll == 1) ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)',
        (numGroup == 1) ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'
      ];
    },
    selectAllText: 'Select All',
    deselectAllText: 'Deselect All',
    doneButton: false,
    doneButtonText: 'Close',
    multipleSeparator: ', ',
    styleBase: 'btn',
    style: 'btn-default',
    size: 'auto',
    title: null,
    selectedTextFormat: 'values',
    width: false,
    container: false,
    hideDisabled: false,
    showSubtext: false,
    showIcon: true,
    showContent: true,
    dropupAuto: true,
    header: false,
    liveSearch: false,
    liveSearchPlaceholder: null,
    liveSearchNormalize: false,
    liveSearchStyle: 'contains',
    actionsBox: false,
    iconBase: 'glyphicon',
    tickIcon: 'glyphicon-ok',
    maxOptions: false,
    mobile: false,
    selectOnTab: false,
    dropdownAlignRight: false
  };

  Selectpicker.prototype = {

    constructor: Selectpicker,

    init: function () {
      var that = this,
          id = this.$element.attr('id');

      this.$element.addClass('bs-select-hidden');
      // store originalIndex (key) and newIndex (value) in this.liObj for fast accessibility
      // allows us to do this.$lis.eq(that.liObj[index]) instead of this.$lis.filter('[data-original-index="' + index + '"]')
      this.liObj = {};
      this.multiple = this.$element.prop('multiple');
      this.autofocus = this.$element.prop('autofocus');
      this.$newElement = this.createView();
      this.$element.after(this.$newElement);
      this.$button = this.$newElement.children('button');
      this.$menu = this.$newElement.children('.dropdown-menu');
      this.$menuInner = this.$menu.children('.inner');
      this.$searchbox = this.$menu.find('input');

      if (this.options.dropdownAlignRight)
        this.$menu.addClass('dropdown-menu-right');

      if (typeof id !== 'undefined') {
        this.$button.attr('data-id', id);
        $('label[for="' + id + '"]').click(function (e) {
          e.preventDefault();
          that.$button.focus();
        });
      }

      this.checkDisabled();
      this.clickListener();
      if (this.options.liveSearch) this.liveSearchListener();
      this.render();
      this.setStyle();
      this.setWidth();
      if (this.options.container) this.selectPosition();
      this.$menu.data('this', this);
      this.$newElement.data('this', this);
      if (this.options.mobile) this.mobile();

      this.$newElement.on('hide.bs.dropdown', function (e) {
        that.$element.trigger('hide.bs.select', e);
      });
      
      this.$newElement.on('hidden.bs.dropdown', function (e) {
        that.$element.trigger('hidden.bs.select', e);
      });
      
      this.$newElement.on('show.bs.dropdown', function (e) {
        that.$element.trigger('show.bs.select', e);
      });
      
      this.$newElement.on('shown.bs.dropdown', function (e) {
        that.$element.trigger('shown.bs.select', e);
      });

      setTimeout(function () {
        that.$element.trigger('loaded.bs.select');
      });
    },

    createDropdown: function () {
      // Options
      // If we are multiple, then add the show-tick class by default
      var multiple = this.multiple ? ' show-tick' : '',
          inputGroup = this.$element.parent().hasClass('input-group') ? ' input-group-btn' : '',
          autofocus = this.autofocus ? ' autofocus' : '';
      // Elements
      var header = this.options.header ? '<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>' + this.options.header + '</div>' : '';
      var searchbox = this.options.liveSearch ?
      '<div class="bs-searchbox">' +
      '<input type="text" class="form-control" autocomplete="off"' +
      (null === this.options.liveSearchPlaceholder ? '' : ' placeholder="' + htmlEscape(this.options.liveSearchPlaceholder) + '"') + '>' +
      '</div>'
          : '';
      var actionsbox = this.multiple && this.options.actionsBox ?
      '<div class="bs-actionsbox">' +
      '<div class="btn-group btn-group-sm btn-block">' +
      '<button type="button" class="actions-btn bs-select-all btn btn-default">' +
      this.options.selectAllText +
      '</button>' +
      '<button type="button" class="actions-btn bs-deselect-all btn btn-default">' +
      this.options.deselectAllText +
      '</button>' +
      '</div>' +
      '</div>'
          : '';
      var donebutton = this.multiple && this.options.doneButton ?
      '<div class="bs-donebutton">' +
      '<div class="btn-group btn-block">' +
      '<button type="button" class="btn btn-sm btn-default">' +
      this.options.doneButtonText +
      '</button>' +
      '</div>' +
      '</div>'
          : '';
      var drop =
          '<div class="btn-group bootstrap-select' + multiple + inputGroup + '">' +
          '<button type="button" class="' + this.options.styleBase + ' dropdown-toggle" data-toggle="dropdown"' + autofocus + '>' +
          '<span class="filter-option pull-left"></span>&nbsp;' +
          '<span class="caret"></span>' +
          '</button>' +
          '<div class="dropdown-menu open">' +
          header +
          searchbox +
          actionsbox +
          '<ul class="dropdown-menu inner" role="menu">' +
          '</ul>' +
          donebutton +
          '</div>' +
          '</div>';

      return $(drop);
    },

    createView: function () {
      var $drop = this.createDropdown(),
          li = this.createLi();

      $drop.find('ul')[0].innerHTML = li;
      return $drop;
    },

    reloadLi: function () {
      //Remove all children.
      this.destroyLi();
      //Re build
      var li = this.createLi();
      this.$menuInner[0].innerHTML = li;
    },

    destroyLi: function () {
      this.$menu.find('li').remove();
    },

    createLi: function () {
      var that = this,
          _li = [],
          optID = 0,
          titleOption = document.createElement('option'),
          liIndex = -1; // increment liIndex whenever a new <li> element is created to ensure liObj is correct

      // Helper functions
      /**
       * @param content
       * @param [index]
       * @param [classes]
       * @param [optgroup]
       * @returns {string}
       */
      var generateLI = function (content, index, classes, optgroup) {
        return '<li role="menuitem"' +
            ((typeof classes !== 'undefined' & '' !== classes) ? ' class="' + classes + '"' : '') +
            ((typeof index !== 'undefined' & null !== index) ? ' data-original-index="' + index + '"' : '') +
            ((typeof optgroup !== 'undefined' & null !== optgroup) ? 'data-optgroup="' + optgroup + '"' : '') +
            '>' + content + '</li>';
      };

      /**
       * @param text
       * @param [classes]
       * @param [inline]
       * @param [tokens]
       * @returns {string}
       */
      var generateA = function (text, classes, inline, tokens) {
        return '<a tabindex="0"' +
            (typeof classes !== 'undefined' ? ' class="' + classes + '"' : '') +
            (typeof inline !== 'undefined' ? ' style="' + inline + '"' : '') +
            (that.options.liveSearchNormalize ? ' data-normalized-text="' + normalizeToBase(htmlEscape(text)) + '"' : '') +
            (typeof tokens !== 'undefined' || tokens !== null ? ' data-tokens="' + tokens + '"' : '') +
            '>' + text +
            '<span class="' + that.options.iconBase + ' ' + that.options.tickIcon + ' check-mark"></span>' +
            '</a>';
      };

      if (this.options.title && !this.multiple) {
        // this option doesn't create a new <li> element, but does add a new option, so liIndex is decreased
        // since liObj is recalculated on every refresh, liIndex needs to be decreased even if the titleOption is already appended
        liIndex--;

        if (!this.$element.find('.bs-title-option').length) {
          // Use native JS to prepend option (faster)
          var element = this.$element[0];
          titleOption.className = 'bs-title-option';
          titleOption.appendChild(document.createTextNode(this.options.title));
          titleOption.value = '';
          element.insertBefore(titleOption, element.firstChild);
          // Check if selected attribute is already set on an option. If not, select the titleOption option.
          if (element.options[element.selectedIndex].getAttribute('selected') === null) titleOption.selected = true;
        }
      }

      this.$element.find('option').each(function (index) {
        var $this = $(this);

        liIndex++;

        if ($this.hasClass('bs-title-option')) return;

        // Get the class and text for the option
        var optionClass = this.className || '',
            inline = this.style.cssText,
            text = $this.data('content') ? $this.data('content') : $this.html(),
            tokens = $this.data('tokens') ? $this.data('tokens') : null,
            subtext = typeof $this.data('subtext') !== 'undefined' ? '<small class="text-muted">' + $this.data('subtext') + '</small>' : '',
            icon = typeof $this.data('icon') !== 'undefined' ? '<span class="' + that.options.iconBase + ' ' + $this.data('icon') + '"></span> ' : '',
            isDisabled = this.disabled || this.parentElement.tagName === 'OPTGROUP' && this.parentElement.disabled;

        if (icon !== '' && isDisabled) {
          icon = '<span>' + icon + '</span>';
        }

        if (that.options.hideDisabled && isDisabled) {
          liIndex--;
          return;
        }

        if (!$this.data('content')) {
          // Prepend any icon and append any subtext to the main text.
          text = icon + '<span class="text">' + text + subtext + '</span>';
        }

        if (this.parentElement.tagName === 'OPTGROUP' && $this.data('divider') !== true) {
          if ($this.index() === 0) { // Is it the first option of the optgroup?
            optID += 1;

            // Get the opt group label
            var label = this.parentElement.label,
                labelSubtext = typeof $this.parent().data('subtext') !== 'undefined' ? '<small class="text-muted">' + $this.parent().data('subtext') + '</small>' : '',
                labelIcon = $this.parent().data('icon') ? '<span class="' + that.options.iconBase + ' ' + $this.parent().data('icon') + '"></span> ' : '',
                optGroupClass = ' ' + this.parentElement.className || '';
            
            label = labelIcon + '<span class="text">' + label + labelSubtext + '</span>';

            if (index !== 0 && _li.length > 0) { // Is it NOT the first option of the select && are there elements in the dropdown?
              liIndex++;
              _li.push(generateLI('', null, 'divider', optID + 'div'));
            }
            liIndex++;
            _li.push(generateLI(label, null, 'dropdown-header' + optGroupClass, optID));
          }
          _li.push(generateLI(generateA(text, 'opt ' + optionClass + optGroupClass, inline, tokens), index, '', optID));
        } else if ($this.data('divider') === true) {
          _li.push(generateLI('', index, 'divider'));
        } else if ($this.data('hidden') === true) {
          _li.push(generateLI(generateA(text, optionClass, inline, tokens), index, 'hidden is-hidden'));
        } else {
          if (this.previousElementSibling && this.previousElementSibling.tagName === 'OPTGROUP') {
            liIndex++;
            _li.push(generateLI('', null, 'divider', optID + 'div'));
          }
          _li.push(generateLI(generateA(text, optionClass, inline, tokens), index));
        }

        that.liObj[index] = liIndex;
      });

      //If we are not multiple, we don't have a selected item, and we don't have a title, select the first element so something is set in the button
      if (!this.multiple && this.$element.find('option:selected').length === 0 && !this.options.title) {
        this.$element.find('option').eq(0).prop('selected', true).attr('selected', 'selected');
      }

      return _li.join('');
    },

    findLis: function () {
      if (this.$lis == null) this.$lis = this.$menu.find('li');
      return this.$lis;
    },

    /**
     * @param [updateLi] defaults to true
     */
    render: function (updateLi) {
      var that = this,
          notDisabled;

      //Update the LI to match the SELECT
      if (updateLi !== false) {
        this.$element.find('option').each(function (index) {
          var $lis = that.findLis().eq(that.liObj[index]);

          that.setDisabled(index, this.disabled || this.parentElement.tagName === 'OPTGROUP' && this.parentElement.disabled, $lis);
          that.setSelected(index, this.selected, $lis);
        });
      }

      this.tabIndex();

      var selectedItems = this.$element.find('option').map(function () {
        if (this.selected) {
          if (that.options.hideDisabled && (this.disabled || this.parentElement.tagName === 'OPTGROUP' && this.parentElement.disabled)) return false;

          var $this = $(this),
              icon = $this.data('icon') && that.options.showIcon ? '<i class="' + that.options.iconBase + ' ' + $this.data('icon') + '"></i> ' : '',
              subtext;

          if (that.options.showSubtext && $this.data('subtext') && !that.multiple) {
            subtext = ' <small class="text-muted">' + $this.data('subtext') + '</small>';
          } else {
            subtext = '';
          }
          if (typeof $this.attr('title') !== 'undefined') {
            return $this.attr('title');
          } else if ($this.data('content') && that.options.showContent) {
            return $this.data('content');
          } else {
            return icon + $this.html() + subtext;
          }
        }
      }).toArray();

      //Fixes issue in IE10 occurring when no default option is selected and at least one option is disabled
      //Convert all the values into a comma delimited string
      var title = !this.multiple ? selectedItems[0] : selectedItems.join(this.options.multipleSeparator);

      //If this is multi select, and the selectText type is count, the show 1 of 2 selected etc..
      if (this.multiple && this.options.selectedTextFormat.indexOf('count') > -1) {
        var max = this.options.selectedTextFormat.split('>');
        if ((max.length > 1 && selectedItems.length > max[1]) || (max.length == 1 && selectedItems.length >= 2)) {
          notDisabled = this.options.hideDisabled ? ', [disabled]' : '';
          var totalCount = this.$element.find('option').not('[data-divider="true"], [data-hidden="true"]' + notDisabled).length,
              tr8nText = (typeof this.options.countSelectedText === 'function') ? this.options.countSelectedText(selectedItems.length, totalCount) : this.options.countSelectedText;
          title = tr8nText.replace('{0}', selectedItems.length.toString()).replace('{1}', totalCount.toString());
        }
      }

      if (this.options.title == undefined) {
        this.options.title = this.$element.attr('title');
      }

      if (this.options.selectedTextFormat == 'static') {
        title = this.options.title;
      }

      //If we dont have a title, then use the default, or if nothing is set at all, use the not selected text
      if (!title) {
        title = typeof this.options.title !== 'undefined' ? this.options.title : this.options.noneSelectedText;
      }

      //strip all html-tags and trim the result
      this.$button.attr('title', $.trim(title.replace(/<[^>]*>?/g, '')));
      this.$button.children('.filter-option').html(title);

      this.$element.trigger('rendered.bs.select');
    },

    /**
     * @param [style]
     * @param [status]
     */
    setStyle: function (style, status) {
      if (this.$element.attr('class')) {
        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi, ''));
      }

      var buttonClass = style ? style : this.options.style;

      if (status == 'add') {
        this.$button.addClass(buttonClass);
      } else if (status == 'remove') {
        this.$button.removeClass(buttonClass);
      } else {
        this.$button.removeClass(this.options.style);
        this.$button.addClass(buttonClass);
      }
    },

    liHeight: function (refresh) {
      if (!refresh && (this.options.size === false || this.sizeInfo)) return;

      var newElement = document.createElement('div'),
          menu = document.createElement('div'),
          menuInner = document.createElement('ul'),
          divider = document.createElement('li'),
          li = document.createElement('li'),
          a = document.createElement('a'),
          text = document.createElement('span'),
          header = this.options.header ? this.$menu.find('.popover-title')[0].cloneNode(true) : null,
          search = this.options.liveSearch ? document.createElement('div') : null,
          actions = this.options.actionsBox && this.multiple ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,
          doneButton = this.options.doneButton && this.multiple ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null;

      text.className = 'text';
      newElement.className = this.$menu[0].parentNode.className + ' open';
      menu.className = 'dropdown-menu open';
      menuInner.className = 'dropdown-menu inner';
      divider.className = 'divider';

      text.appendChild(document.createTextNode('Inner text'));
      a.appendChild(text);
      li.appendChild(a);
      menuInner.appendChild(li);
      menuInner.appendChild(divider);
      if (header) menu.appendChild(header);
      if (search) {
        // create a span instead of input as creating an input element is slower
        var input = document.createElement('span');
        search.className = 'bs-searchbox';
        input.className = 'form-control';
        search.appendChild(input);
        menu.appendChild(search);
      }
      if (actions) menu.appendChild(actions);
      menu.appendChild(menuInner);
      if (doneButton) menu.appendChild(doneButton);
      newElement.appendChild(menu);

      document.body.appendChild(newElement);

      var liHeight = a.offsetHeight,
          headerHeight = header ? header.offsetHeight : 0,
          searchHeight = search ? search.offsetHeight : 0,
          actionsHeight = actions ? actions.offsetHeight : 0,
          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,
          dividerHeight = $(divider).outerHeight(true),
          // fall back to jQuery if getComputedStyle is not supported
          menuStyle = getComputedStyle ? getComputedStyle(menu) : false,
          $menu = menuStyle ? $(menu) : null,
          menuPadding = parseInt(menuStyle ? menuStyle.paddingTop : $menu.css('paddingTop')) +
                        parseInt(menuStyle ? menuStyle.paddingBottom : $menu.css('paddingBottom')) +
                        parseInt(menuStyle ? menuStyle.borderTopWidth : $menu.css('borderTopWidth')) +
                        parseInt(menuStyle ? menuStyle.borderBottomWidth : $menu.css('borderBottomWidth')),
          menuExtras =  menuPadding + 
                        parseInt(menuStyle ? menuStyle.marginTop : $menu.css('marginTop')) + 
                        parseInt(menuStyle ? menuStyle.marginBottom : $menu.css('marginBottom')) + 2;

      document.body.removeChild(newElement);

      this.sizeInfo = {
        liHeight: liHeight,
        headerHeight: headerHeight,
        searchHeight: searchHeight,
        actionsHeight: actionsHeight,
        doneButtonHeight: doneButtonHeight,
        dividerHeight: dividerHeight,
        menuPadding: menuPadding,
        menuExtras: menuExtras
      };
    },

    setSize: function () {
      this.findLis();
      this.liHeight();
      var that = this,
          $menu = this.$menu,
          $menuInner = this.$menuInner,
          $window = $(window),
          selectHeight = this.$newElement[0].offsetHeight,
          liHeight = this.sizeInfo['liHeight'],
          headerHeight = this.sizeInfo['headerHeight'],
          searchHeight = this.sizeInfo['searchHeight'],
          actionsHeight = this.sizeInfo['actionsHeight'],
          doneButtonHeight = this.sizeInfo['doneButtonHeight'],
          divHeight = this.sizeInfo['dividerHeight'],
          menuPadding = this.sizeInfo['menuPadding'],
          menuExtras = this.sizeInfo['menuExtras'],
          notDisabled = this.options.hideDisabled ? '.disabled' : '',
          menuHeight,
          getHeight,
          selectOffsetTop,
          selectOffsetBot,
          posVert = function () {
            selectOffsetTop = that.$newElement.offset().top - $window.scrollTop();
            selectOffsetBot = $window.height() - selectOffsetTop - selectHeight;
          };

      posVert();

      if (this.options.header) $menu.css('padding-top', 0);

      if (this.options.size === 'auto') {
        var getSize = function () {
          var minHeight,
              hasClass = function (className, include) {
                return function (element) {
                    if (include) {
                        return (element.classList ? element.classList.contains(className) : $(element).hasClass(className));
                    } else {
                        return !(element.classList ? element.classList.contains(className) : $(element).hasClass(className));
                    }
                };
              },
              lis = that.$menuInner[0].getElementsByTagName('li'),
              lisVisible = Array.prototype.filter ? Array.prototype.filter.call(lis, hasClass('hidden', false)) : that.$lis.not('.hidden'),
              optGroup = Array.prototype.filter ? Array.prototype.filter.call(lisVisible, hasClass('dropdown-header', true)) : lisVisible.filter('.dropdown-header');

          posVert();
          menuHeight = selectOffsetBot - menuExtras;

          if (that.options.container) {
            if (!$menu.data('height')) $menu.data('height', $menu.height());
            getHeight = $menu.data('height');
          } else {
            getHeight = $menu.height();
          }

          if (that.options.dropupAuto) {
            that.$newElement.toggleClass('dropup', selectOffsetTop > selectOffsetBot && (menuHeight - menuExtras) < getHeight);
          }
          if (that.$newElement.hasClass('dropup')) {
            menuHeight = selectOffsetTop - menuExtras;
          }

          if ((lisVisible.length + optGroup.length) > 3) {
            minHeight = liHeight * 3 + menuExtras - 2;
          } else {
            minHeight = 0;
          }

          $menu.css({
            'max-height': menuHeight + 'px',
            'overflow': 'hidden',
            'min-height': minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight + 'px'
          });
          $menuInner.css({
            'max-height': menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding + 'px',
            'overflow-y': 'auto',
            'min-height': Math.max(minHeight - menuPadding, 0) + 'px'
          });
        };
        getSize();
        this.$searchbox.off('input.getSize propertychange.getSize').on('input.getSize propertychange.getSize', getSize);
        $window.off('resize.getSize scroll.getSize').on('resize.getSize scroll.getSize', getSize);
      } else if (this.options.size && this.options.size != 'auto' && this.$lis.not(notDisabled).length > this.options.size) {
        var optIndex = this.$lis.not('.divider').not(notDisabled).children().slice(0, this.options.size).last().parent().index(),
            divLength = this.$lis.slice(0, optIndex + 1).filter('.divider').length;
        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding;

        if (that.options.container) {
          if (!$menu.data('height')) $menu.data('height', $menu.height());
          getHeight = $menu.data('height');
        } else {
          getHeight = $menu.height();
        }

        if (that.options.dropupAuto) {
          //noinspection JSUnusedAssignment
          this.$newElement.toggleClass('dropup', selectOffsetTop > selectOffsetBot && (menuHeight - menuExtras) < getHeight);
        }
        $menu.css({
          'max-height': menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight + 'px',
          'overflow': 'hidden',
          'min-height': ''
        });
        $menuInner.css({
          'max-height': menuHeight - menuPadding + 'px',
          'overflow-y': 'auto',
          'min-height': ''
        });
      }
    },

    setWidth: function () {
      if (this.options.width === 'auto') {
        this.$menu.css('min-width', '0');

        // Get correct width if element is hidden
        var $selectClone = this.$menu.parent().clone().appendTo('body'),
            $selectClone2 = this.options.container ? this.$newElement.clone().appendTo('body') : $selectClone,
            ulWidth = $selectClone.children('.dropdown-menu').outerWidth(),
            btnWidth = $selectClone2.css('width', 'auto').children('button').outerWidth();

        $selectClone.remove();
        $selectClone2.remove();

        // Set width to whatever's larger, button title or longest option
        this.$newElement.css('width', Math.max(ulWidth, btnWidth) + 'px');
      } else if (this.options.width === 'fit') {
        // Remove inline min-width so width can be changed from 'auto'
        this.$menu.css('min-width', '');
        this.$newElement.css('width', '').addClass('fit-width');
      } else if (this.options.width) {
        // Remove inline min-width so width can be changed from 'auto'
        this.$menu.css('min-width', '');
        this.$newElement.css('width', this.options.width);
      } else {
        // Remove inline min-width/width so width can be changed
        this.$menu.css('min-width', '');
        this.$newElement.css('width', '');
      }
      // Remove fit-width class if width is changed programmatically
      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {
        this.$newElement.removeClass('fit-width');
      }
    },

    selectPosition: function () {
      var that = this,
          drop = '<div />',
          $drop = $(drop),
          pos,
          actualHeight,
          getPlacement = function ($element) {
            $drop.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass('dropup', $element.hasClass('dropup'));
            pos = $element.offset();
            actualHeight = $element.hasClass('dropup') ? 0 : $element[0].offsetHeight;
            $drop.css({
              'top': pos.top + actualHeight,
              'left': pos.left,
              'width': $element[0].offsetWidth,
              'position': 'absolute'
            });
          };

      this.$newElement.on('click', function () {
        if (that.isDisabled()) {
          return;
        }
        getPlacement($(this));
        $drop.appendTo(that.options.container);
        $drop.toggleClass('open', !$(this).hasClass('open'));
        $drop.append(that.$menu);
      });

      $(window).on('resize scroll', function () {
        getPlacement(that.$newElement);
      });

      this.$element.on('hide.bs.select', function () {
        that.$menu.data('height', that.$menu.height());
        $drop.detach();
      });
    },

    setSelected: function (index, selected, $lis) {
      if (!$lis) {
        var $lis = this.findLis().eq(this.liObj[index]);
      }

      $lis.toggleClass('selected', selected);
    },

    setDisabled: function (index, disabled, $lis) {
      if (!$lis) {
        var $lis = this.findLis().eq(this.liObj[index]);
      }

      if (disabled) {
        $lis.addClass('disabled').children('a').attr('href', '#').attr('tabindex', -1);
      } else {
        $lis.removeClass('disabled').children('a').removeAttr('href').attr('tabindex', 0);
      }
    },

    isDisabled: function () {
      return this.$element[0].disabled;
    },

    checkDisabled: function () {
      var that = this;

      if (this.isDisabled()) {
        this.$newElement.addClass('disabled');
        this.$button.addClass('disabled').attr('tabindex', -1);
      } else {
        if (this.$button.hasClass('disabled')) {
          this.$newElement.removeClass('disabled');
          this.$button.removeClass('disabled');
        }

        if (this.$button.attr('tabindex') == -1 && !this.$element.data('tabindex')) {
          this.$button.removeAttr('tabindex');
        }
      }

      this.$button.click(function () {
        return !that.isDisabled();
      });
    },

    tabIndex: function () {
      if (this.$element.is('[tabindex]')) {
        this.$element.data('tabindex', this.$element.attr('tabindex'));
        this.$button.attr('tabindex', this.$element.data('tabindex'));
      }
    },

    clickListener: function () {
      var that = this,
          $document = $(document);

      this.$newElement.on('touchstart.dropdown', '.dropdown-menu', function (e) {
        e.stopPropagation();
      });

      $document.data('spaceSelect', false);
      
      this.$button.on('keyup', function (e) {
        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {
            e.preventDefault();
            $document.data('spaceSelect', false);
        }
      });

      this.$newElement.on('click', function () {
        that.setSize();
        that.$element.on('shown.bs.select', function () {
          if (!that.options.liveSearch && !that.multiple) {
            that.$menu.find('.selected a').focus();
          } else if (!that.multiple) {
            var selectedIndex = that.liObj[that.$element[0].selectedIndex];

            if (typeof selectedIndex !== 'number') return;
            
            // scroll to selected option
            var offset = that.$lis.eq(selectedIndex)[0].offsetTop - that.$menuInner[0].offsetTop;
            offset = offset - that.$menuInner[0].offsetHeight/2 + that.sizeInfo.liHeight/2;
            that.$menuInner[0].scrollTop = offset;
          }
        });
      });

      this.$menu.on('click', 'li a', function (e) {
        var $this = $(this),
            clickedIndex = $this.parent().data('originalIndex'),
            prevValue = that.$element.val(),
            prevIndex = that.$element.prop('selectedIndex');

        // Don't close on multi choice menu
        if (that.multiple) {
          e.stopPropagation();
        }

        e.preventDefault();

        //Don't run if we have been disabled
        if (!that.isDisabled() && !$this.parent().hasClass('disabled')) {
          var $options = that.$element.find('option'),
              $option = $options.eq(clickedIndex),
              state = $option.prop('selected'),
              $optgroup = $option.parent('optgroup'),
              maxOptions = that.options.maxOptions,
              maxOptionsGrp = $optgroup.data('maxOptions') || false;

          if (!that.multiple) { // Deselect all others if not multi select box
            $options.prop('selected', false);
            $option.prop('selected', true);
            that.$menu.find('.selected').removeClass('selected');
            that.setSelected(clickedIndex, true);
          } else { // Toggle the one we have chosen if we are multi select.
            $option.prop('selected', !state);
            that.setSelected(clickedIndex, !state);
            $this.blur();

            if (maxOptions !== false || maxOptionsGrp !== false) {
              var maxReached = maxOptions < $options.filter(':selected').length,
                  maxReachedGrp = maxOptionsGrp < $optgroup.find('option:selected').length;

              if ((maxOptions && maxReached) || (maxOptionsGrp && maxReachedGrp)) {
                if (maxOptions && maxOptions == 1) {
                  $options.prop('selected', false);
                  $option.prop('selected', true);
                  that.$menu.find('.selected').removeClass('selected');
                  that.setSelected(clickedIndex, true);
                } else if (maxOptionsGrp && maxOptionsGrp == 1) {
                  $optgroup.find('option:selected').prop('selected', false);
                  $option.prop('selected', true);
                  var optgroupID = $this.parent().data('optgroup');
                  that.$menu.find('[data-optgroup="' + optgroupID + '"]').removeClass('selected');
                  that.setSelected(clickedIndex, true);
                } else {
                  var maxOptionsArr = (typeof that.options.maxOptionsText === 'function') ?
                          that.options.maxOptionsText(maxOptions, maxOptionsGrp) : that.options.maxOptionsText,
                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),
                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),
                      $notify = $('<div class="notify"></div>');
                  // If {var} is set in array, replace it
                  /** @deprecated */
                  if (maxOptionsArr[2]) {
                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);
                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);
                  }

                  $option.prop('selected', false);

                  that.$menu.append($notify);

                  if (maxOptions && maxReached) {
                    $notify.append($('<div>' + maxTxt + '</div>'));
                    that.$element.trigger('maxReached.bs.select');
                  }

                  if (maxOptionsGrp && maxReachedGrp) {
                    $notify.append($('<div>' + maxTxtGrp + '</div>'));
                    that.$element.trigger('maxReachedGrp.bs.select');
                  }

                  setTimeout(function () {
                    that.setSelected(clickedIndex, false);
                  }, 10);

                  $notify.delay(750).fadeOut(300, function () {
                    $(this).remove();
                  });
                }
              }
            }
          }

          if (!that.multiple) {
            that.$button.focus();
          } else if (that.options.liveSearch) {
            that.$searchbox.focus();
          }

          // Trigger select 'change'
          if ((prevValue != that.$element.val() && that.multiple) || (prevIndex != that.$element.prop('selectedIndex') && !that.multiple)) {
            that.$element.change();
            // $option.prop('selected') is current option state (selected/unselected). state is previous option state.
            that.$element.trigger('changed.bs.select', [clickedIndex, $option.prop('selected'), state]);
          }
        }
      });

      this.$menu.on('click', 'li.disabled a, .popover-title, .popover-title :not(.close)', function (e) {
        if (e.currentTarget == this) {
          e.preventDefault();
          e.stopPropagation();
          if (that.options.liveSearch && !$(e.target).hasClass('close')) {
            that.$searchbox.focus();
          } else {
            that.$button.focus();
          }
        }
      });

      this.$menu.on('click', 'li.divider, li.dropdown-header', function (e) {
        e.preventDefault();
        e.stopPropagation();
        if (that.options.liveSearch) {
          that.$searchbox.focus();
        } else {
          that.$button.focus();
        }
      });

      this.$menu.on('click', '.popover-title .close', function () {
        that.$button.click();
      });

      this.$searchbox.on('click', function (e) {
        e.stopPropagation();
      });

      this.$menu.on('click', '.actions-btn', function (e) {
        if (that.options.liveSearch) {
          that.$searchbox.focus();
        } else {
          that.$button.focus();
        }

        e.preventDefault();
        e.stopPropagation();

        if ($(this).hasClass('bs-select-all')) {
          that.selectAll();
        } else {
          that.deselectAll();
        }
        that.$element.change();
      });

      this.$element.change(function () {
        that.render(false);
      });
    },

    liveSearchListener: function () {
      var that = this,
          $no_results = $('<li class="no-results"></li>');

      this.$newElement.on('click.dropdown.data-api touchstart.dropdown.data-api', function () {
        that.$menuInner.find('.active').removeClass('active');
        if (!!that.$searchbox.val()) {
          that.$searchbox.val('');
          that.$lis.not('.is-hidden').removeClass('hidden');
          if (!!$no_results.parent().length) $no_results.remove();
        }
        if (!that.multiple) that.$menuInner.find('.selected').addClass('active');
        setTimeout(function () {
          that.$searchbox.focus();
        }, 10);
      });

      this.$searchbox.on('click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api', function (e) {
        e.stopPropagation();
      });

      this.$searchbox.on('input propertychange', function () {
        if (that.$searchbox.val()) {
          var $searchBase = that.$lis.not('.is-hidden').removeClass('hidden').children('a');
          if (that.options.liveSearchNormalize) {
            $searchBase = $searchBase.not(':a' + that._searchStyle() + '(' + normalizeToBase(that.$searchbox.val()) + ')');
          } else {
            $searchBase = $searchBase.not(':' + that._searchStyle() + '(' + that.$searchbox.val() + ')');
          }
          $searchBase.parent().addClass('hidden');

          that.$lis.filter('.dropdown-header').each(function () {
            var $this = $(this),
                optgroup = $this.data('optgroup');

            if (that.$lis.filter('[data-optgroup=' + optgroup + ']').not($this).not('.hidden').length === 0) {
              $this.addClass('hidden');
              that.$lis.filter('[data-optgroup=' + optgroup + 'div]').addClass('hidden');
            }
          });

          var $lisVisible = that.$lis.not('.hidden');

          // hide divider if first or last visible, or if followed by another divider
          $lisVisible.each(function (index) {
            var $this = $(this);

            if ($this.hasClass('divider') && (
              $this.index() === $lisVisible.eq(0).index() ||
              $this.index() === $lisVisible.last().index() ||
              $lisVisible.eq(index + 1).hasClass('divider'))) {
              $this.addClass('hidden');
            }
          });

          if (!that.$lis.not('.hidden, .no-results').length) {
            if (!!$no_results.parent().length) {
              $no_results.remove();
            }
            $no_results.html(that.options.noneResultsText.replace('{0}', '"' + htmlEscape(that.$searchbox.val()) + '"')).show();
            that.$menuInner.append($no_results);
          } else if (!!$no_results.parent().length) {
            $no_results.remove();
          }

        } else {
          that.$lis.not('.is-hidden').removeClass('hidden');
          if (!!$no_results.parent().length) {
            $no_results.remove();
          }
        }

        that.$lis.filter('.active').removeClass('active');
        that.$lis.not('.hidden, .divider, .dropdown-header').eq(0).addClass('active').children('a').focus();
        $(this).focus();
      });
    },

    _searchStyle: function () {
      var style = 'icontains';
      switch (this.options.liveSearchStyle) {
        case 'begins':
        case 'startsWith':
          style = 'ibegins';
          break;
        case 'contains':
        default:
          break; //no need to change the default
      }

      return style;
    },

    val: function (value) {
      if (typeof value !== 'undefined') {
        this.$element.val(value);
        this.render();

        return this.$element;
      } else {
        return this.$element.val();
      }
    },

    selectAll: function () {
      this.findLis();
      this.$element.find('option:enabled').not('[data-divider], [data-hidden]').prop('selected', true);
      this.$lis.not('.divider, .dropdown-header, .disabled, .hidden').addClass('selected');
      this.render(false);
    },

    deselectAll: function () {
      this.findLis();
      this.$element.find('option:enabled').not('[data-divider], [data-hidden]').prop('selected', false);
      this.$lis.not('.divider, .dropdown-header, .disabled, .hidden').removeClass('selected');
      this.render(false);
    },

    keydown: function (e) {
      var $this = $(this),
          $parent = $this.is('input') ? $this.parent().parent() : $this.parent(),
          $items,
          that = $parent.data('this'),
          index,
          next,
          first,
          last,
          prev,
          nextPrev,
          prevIndex,
          isActive,
          selector = ':not(.disabled, .hidden, .dropdown-header, .divider)',
          keyCodeMap = {
            32: ' ',
            48: '0',
            49: '1',
            50: '2',
            51: '3',
            52: '4',
            53: '5',
            54: '6',
            55: '7',
            56: '8',
            57: '9',
            59: ';',
            65: 'a',
            66: 'b',
            67: 'c',
            68: 'd',
            69: 'e',
            70: 'f',
            71: 'g',
            72: 'h',
            73: 'i',
            74: 'j',
            75: 'k',
            76: 'l',
            77: 'm',
            78: 'n',
            79: 'o',
            80: 'p',
            81: 'q',
            82: 'r',
            83: 's',
            84: 't',
            85: 'u',
            86: 'v',
            87: 'w',
            88: 'x',
            89: 'y',
            90: 'z',
            96: '0',
            97: '1',
            98: '2',
            99: '3',
            100: '4',
            101: '5',
            102: '6',
            103: '7',
            104: '8',
            105: '9'
          };

      if (that.options.liveSearch) $parent = $this.parent().parent();

      if (that.options.container) $parent = that.$menu;

      $items = $('[role=menu] li a', $parent);

      isActive = that.$menu.parent().hasClass('open');

      if (!isActive && (e.keyCode >= 48 && e.keyCode <= 57 || event.keyCode >= 65 && event.keyCode <= 90)) {
        if (!that.options.container) {
          that.setSize();
          that.$menu.parent().addClass('open');
          isActive = true;
        } else {
          that.$newElement.trigger('click');
        }
        that.$searchbox.focus();
      }

      if (that.options.liveSearch) {
        if (/(^9$|27)/.test(e.keyCode.toString(10)) && isActive && that.$menu.find('.active').length === 0) {
          e.preventDefault();
          that.$menu.parent().removeClass('open');
          if (that.options.container) that.$newElement.removeClass('open');
          that.$button.focus();
        }
        // $items contains li elements when liveSearch is enabled
        $items = $('[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)', $parent);
        if (!$this.val() && !/(38|40)/.test(e.keyCode.toString(10))) {
          if ($items.filter('.active').length === 0) {
            $items = that.$newElement.find('li');
            if (that.options.liveSearchNormalize) {
              $items = $items.filter(':a' + that._searchStyle() + '(' + normalizeToBase(keyCodeMap[e.keyCode]) + ')');
            } else {
              $items = $items.filter(':' + that._searchStyle() + '(' + keyCodeMap[e.keyCode] + ')');
            }
          }
        }
      }

      if (!$items.length) return;

      if (/(38|40)/.test(e.keyCode.toString(10))) {
        index = $items.index($items.filter(':focus'));
        first = $items.parent(selector).first().data('originalIndex');
        last = $items.parent(selector).last().data('originalIndex');
        next = $items.eq(index).parent().nextAll(selector).eq(0).data('originalIndex');
        prev = $items.eq(index).parent().prevAll(selector).eq(0).data('originalIndex');
        nextPrev = $items.eq(next).parent().prevAll(selector).eq(0).data('originalIndex');

        if (that.options.liveSearch) {
          $items.each(function (i) {
            if (!$(this).hasClass('disabled')) {
              $(this).data('index', i);
            }
          });
          index = $items.index($items.filter('.active'));
          first = $items.first().data('index');
          last = $items.last().data('index');
          next = $items.eq(index).nextAll().eq(0).data('index');
          prev = $items.eq(index).prevAll().eq(0).data('index');
          nextPrev = $items.eq(next).prevAll().eq(0).data('index');
        }

        prevIndex = $this.data('prevIndex');

        if (e.keyCode == 38) {
          if (that.options.liveSearch) index -= 1;
          if (index != nextPrev && index > prev) index = prev;
          if (index < first) index = first;
          if (index == prevIndex) index = last;
        } else if (e.keyCode == 40) {
          if (that.options.liveSearch) index += 1;
          if (index == -1) index = 0;
          if (index != nextPrev && index < next) index = next;
          if (index > last) index = last;
          if (index == prevIndex) index = first;
        }

        $this.data('prevIndex', index);

        if (!that.options.liveSearch) {
          $items.eq(index).focus();
        } else {
          e.preventDefault();
          if (!$this.hasClass('dropdown-toggle')) {
            $items.removeClass('active').eq(index).addClass('active').children('a').focus();
            $this.focus();
          }
        }

      } else if (!$this.is('input')) {
        var keyIndex = [],
            count,
            prevKey;

        $items.each(function () {
          if (!$(this).parent().hasClass('disabled')) {
            if ($.trim($(this).text().toLowerCase()).substring(0, 1) == keyCodeMap[e.keyCode]) {
              keyIndex.push($(this).parent().index());
            }
          }
        });

        count = $(document).data('keycount');
        count++;
        $(document).data('keycount', count);

        prevKey = $.trim($(':focus').text().toLowerCase()).substring(0, 1);

        if (prevKey != keyCodeMap[e.keyCode]) {
          count = 1;
          $(document).data('keycount', count);
        } else if (count >= keyIndex.length) {
          $(document).data('keycount', 0);
          if (count > keyIndex.length) count = 1;
        }

        $items.eq(keyIndex[count - 1]).focus();
      }

      // Select focused option if "Enter", "Spacebar" or "Tab" (when selectOnTab is true) are pressed inside the menu.
      if ((/(13|32)/.test(e.keyCode.toString(10)) || (/(^9$)/.test(e.keyCode.toString(10)) && that.options.selectOnTab)) && isActive) {
        if (!/(32)/.test(e.keyCode.toString(10))) e.preventDefault();
        if (!that.options.liveSearch) {
          var elem = $(':focus');
          elem.click();
          // Bring back focus for multiselects
          elem.focus();
          // Prevent screen from scrolling if the user hit the spacebar
          e.preventDefault();
          // Fixes spacebar selection of dropdown items in FF & IE
          $(document).data('spaceSelect', true);
        } else if (!/(32)/.test(e.keyCode.toString(10))) {
          that.$menu.find('.active a').click();
          $this.focus();
        }
        $(document).data('keycount', 0);
      }

      if ((/(^9$|27)/.test(e.keyCode.toString(10)) && isActive && (that.multiple || that.options.liveSearch)) || (/(27)/.test(e.keyCode.toString(10)) && !isActive)) {
        that.$menu.parent().removeClass('open');
        if (that.options.container) that.$newElement.removeClass('open');
        that.$button.focus();
      }
    },

    mobile: function () {
      this.$element.addClass('mobile-device').appendTo(this.$newElement);
      if (this.options.container) this.$menu.hide();
    },

    refresh: function () {
      this.$lis = null;
      this.reloadLi();
      this.render();
      this.checkDisabled();
      this.liHeight(true);
      this.setStyle();
      this.setWidth();
      if (this.$lis) this.$searchbox.trigger('propertychange');

      this.$element.trigger('refreshed.bs.select');
    },

    hide: function () {
      this.$newElement.hide();
    },

    show: function () {
      this.$newElement.show();
    },

    remove: function () {
      this.$newElement.remove();
      this.$element.remove();
    }
  };

  // SELECTPICKER PLUGIN DEFINITION
  // ==============================
  function Plugin(option, event) {
    // get the args of the outer function..
    var args = arguments;
    // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them
    // to get lost/corrupted in android 2.3 and IE9 #715 #775
    var _option = option,
        _event = event;
    [].shift.apply(args);

    var value;
    var chain = this.each(function () {
      var $this = $(this);
      if ($this.is('select')) {
        var data = $this.data('selectpicker'),
            options = typeof _option == 'object' && _option;

        if (!data) {
          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, $this.data(), options);
          $this.data('selectpicker', (data = new Selectpicker(this, config, _event)));
        } else if (options) {
          for (var i in options) {
            if (options.hasOwnProperty(i)) {
              data.options[i] = options[i];
            }
          }
        }

        if (typeof _option == 'string') {
          if (data[_option] instanceof Function) {
            value = data[_option].apply(data, args);
          } else {
            value = data.options[_option];
          }
        }
      }
    });

    if (typeof value !== 'undefined') {
      //noinspection JSUnusedAssignment
      return value;
    } else {
      return chain;
    }
  }

  var old = $.fn.selectpicker;
  $.fn.selectpicker = Plugin;
  $.fn.selectpicker.Constructor = Selectpicker;

  // SELECTPICKER NO CONFLICT
  // ========================
  $.fn.selectpicker.noConflict = function () {
    $.fn.selectpicker = old;
    return this;
  };

  $(document)
      .data('keycount', 0)
      .on('keydown', '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input', Selectpicker.prototype.keydown)
      .on('focusin.modal', '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input', function (e) {
        e.stopPropagation();
      });

  // SELECTPICKER DATA-API
  // =====================
  $(window).on('load.bs.select.data-api', function () {
    $('.selectpicker').each(function () {
      var $selectpicker = $(this);
      Plugin.call($selectpicker, $selectpicker.data());
    })
  });
})(jQuery);


}));

(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var validator=$.data(this[0],"validator");if(validator){return validator}
// Add novalidate tag if HTML5.
this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.on("click.validate",":submit",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target}if($(this).hasClass("cancel")){validator.cancelSubmit=true}if($(this).attr("formnovalidate")!==undefined){validator.cancelSubmit=true}});this.on("submit.validate",function(event){if(validator.settings.debug){event.preventDefault()}function handle(){var hidden,result;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)}result=validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove()}if(result!==undefined){return result}return false}return true}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle()}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false}return handle()}else{validator.focusInvalid();return false}})}return validator},valid:function(){var valid,validator,errorList;if($(this[0]).is("form")){valid=this.validate().form()}else{errorList=[];valid=true;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid;errorList=errorList.concat(validator.errorList)});validator.errorList=errorList}return valid},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages)}break;case"remove":if(!argument){delete staticRules[element.name];return existingRules}filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];if(method==="required"){$(element).removeAttr("aria-required")}});return filtered}}data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);$(element).attr("aria-required","true")}if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param})}return data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init()};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args)}}if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1)}if(params.constructor!==Array){params=[params]}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})});return source};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:false,focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass)}this.hideThese(this.errorsFor(element))}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element)}},onkeyup:function(element,event){
// Avoid revalidate the field when pressing one of the following keys
// Alt         => 18
// AltGr key   => 225
var excludedKeys=[16,17,18,20,35,36,37,38,39,40,45,144,225];if(event.which===9&&this.elementValue(element)===""||$.inArray(event.keyCode,excludedKeys)!==-1){return}else if(element.name in this.submitted||element===this.lastElement){this.element(element)}},onclick:function(element){if(element.name in this.submitted){this.element(element)}else if(element.parentNode.name in this.submitted){this.element(element.parentNode)}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass)}else{$(element).addClass(errorClass).removeClass(validClass)}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass)}else{$(element).removeClass(errorClass).addClass(validClass)}}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=this.groups={},rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/)}$.each(value,function(index,name){groups[name]=key})});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});function delegate(event){var validator=$.data(this.form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!$(this).is(settings.ignore)){settings[eventType].call(validator,this,event)}}$(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], "+"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], "+"[type='radio'], [type='checkbox']",delegate).on("click.validate","select, option, [type='radio'], [type='checkbox']",delegate);if(this.settings.invalidHandler){$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)}
// Add aria-required to any Static/Data/Class required fields before first validation
// Screen readers require this attribute to be present before the initial submission http://www.w3.org/TR/WCAG-TECHS/ARIA2.html
$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++){this.check(elements[i])}return this.valid()},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),result=true;this.lastElement=checkElement;if(checkElement===undefined){delete this.invalid[cleanElement.name]}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);result=this.check(checkElement)!==false;if(result){delete this.invalid[checkElement.name]}else{this.invalid[checkElement.name]=true}}
// Add aria-invalid status for screen readers
$(element).attr("aria-invalid",!result);if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]})}this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();var i,elements=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight){for(i=0;elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,"")}}else{elements.removeClass(this.settings.errorClass)}},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0,i;for(i in obj){count++}return count},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false}rulesCache[this.name]=true;return true})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element)},elementValue:function(element){var val,$element=$(element),type=element.type;if(type==="radio"||type==="checkbox"){return this.findByName(element.name).filter(":checked").val()}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?false:$element.val()}val=$element.val();if(typeof val==="string"){return val.replace(/\r/g,"")}return val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=false,val=this.elementValue(element),result,method,rule;for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=true;continue}dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}if(!result){this.formatAndAdd(element,rule);return false}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e)}if(e instanceof TypeError){e.message+=".  Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method."}throw e}}if(dependencyMismatch){return}if(this.objectLength(rules)){this.successList.push(element)}return true},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i]}}return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element)}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)}this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))}return toToggle},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(error.element,error.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i])}}if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var place,group,errorID,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message)}else{error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(this.labelContainer.length){this.labelContainer.append(place)}else if(this.settings.errorPlacement){this.settings.errorPlacement(place,$(element))}else{place.insertAfter(element)}if(error.is("label")){error.attr("for",elementID)}else if(error.parents("label[for='"+elementID+"']").length===0){errorID=error.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1");if(!describedBy){describedBy=errorID}else if(!describedBy.match(new RegExp("\\b"+errorID+"\\b"))){
// Add to end of list if not already present
describedBy+=" "+errorID}$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group){$("[name='"+name+"']",this.currentForm).attr("aria-describedby",error.attr("id"))}})}}}if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success)}else{this.settings.success(error,element)}}this.toShow=this.toShow.add(error)},errorsFor:function(element){var name=this.idOrName(element),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+describer.replace(/\s+/g,", #")}return this.errors().filter(selector)},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name)}
// Always apply ignore filter
return $(element).not(this.settings.ignore)[0]},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length}}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true},dependTypes:{"boolean":function(param){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")})},destroy:function(){this.resetForm();$(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules}else{$.extend(this.classRuleSettings,className)}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this])}})}return rules},normalizeAttributeRule:function(rules,type,method,value){if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value);if(isNaN(value)){value=undefined}}if(value||value===0){rules[method]=value}else if(type===method&&type!=="range"){rules[method]=true}},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=true}value=!!value}else{value=$element.attr(method)}this.normalizeAttributeRule(rules,type,method,value)}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength}return rules},dataRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());this.normalizeAttributeRule(rules,type,method,value)}return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}}return rules},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break}if(keepRule){rules[prop]=val.param!==undefined?val.param:true}else{delete rules[prop]}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this])}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])]}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])]}}});if($.validator.autoCreateRanges){if(rules.min!=null&&rules.max!=null){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max}if(rules.minlength!=null&&rules.maxlength!=null){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength}}return rules},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true});data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name))}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch"}if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}if(this.checkable(element)){return this.getLength(value,element)>0}return value.length>0},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)},number:function(value,element){return this.optional(element)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(value)){return false}var nCheck=0,nDigit=0,bEven=false,n,cDigit;value=value.replace(/\D/g,"");if(value.length<13||value.length>19){return false}for(n=value.length-1;n>=0;n--){cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9}}nCheck+=nDigit;bEven=!bEven}return nCheck%10===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.off(".validate-equalTo").on("blur.validate-equalTo",function(){$(element).valid()})}return value===target.val()},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch"}var previous=this.previousValue(element),validator,data;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={}}previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid}previous.old=value;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(true,{mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===true||response==="true",errors,message,submitted;validator.settings.messages[element.name].remote=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors()}else{errors={};message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=true;validator.showErrors(errors)}previous.valid=valid;validator.stopRequest(element,valid)}},param));return"pending"}}});var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}pendingRequests[port]=xhr}})}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port]}return ajax.apply(this,arguments)}}});
// Copyright 2019 fancyApps
(function(window,document,$,undefined){"use strict";window.console=window.console||{info:function(stuff){}};if(!$){return}if($.fn.fancybox){console.info("fancyBox already initialized");return}var defaults={closeExisting:false,loop:false,gutter:50,keyboard:true,preventCaptionOverlap:true,arrows:true,infobar:true,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:false,modal:false,image:{preload:false},ajax:{settings:{data:{fancybox:true}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:true,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}">'+'<source src="{{src}}" type="{{format}}" />'+'Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!'+"</video>",format:"",autoStart:true},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1">'+'<div class="fancybox-bg"></div>'+'<div class="fancybox-inner">'+'<div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div>'+'<div class="fancybox-toolbar">{{buttons}}</div>'+'<div class="fancybox-navigation">{{arrows}}</div>'+'<div class="fancybox-stage"></div>'+'<div class="fancybox-caption"><div class="fancybox-caption__body"></div></div>'+"</div>"+"</div>",spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg>'+"</a>",zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg>'+"</button>",close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg>'+"</button>",
// Arrows
arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}">'+'<div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div>'+"</button>",arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}">'+'<div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div>'+"</button>",smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}">'+'<svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg>'+"</button>"},parentEl:"body",hideScrollbar:true,autoFocus:true,backFocus:true,trapFocus:true,fullScreen:{autoStart:false},touch:{vertical:true,// Allow to drag content vertically
momentum:true},hash:null,media:{},slideShow:{autoStart:false,speed:3e3},thumbs:{autoStart:false,hideOnClose:true,parentEl:".fancybox-container",axis:"y"},wheel:"auto",
// See Documentation/API/Events for more information
onInit:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeClose:$.noop,afterClose:$.noop,// After instance has been closed
onActivate:$.noop,onDeactivate:$.noop,clickContent:function(current,event){return current.type==="image"?"zoom":false},clickSlide:"close",clickOutside:"close",dblclickContent:false,dblclickSlide:false,dblclickOutside:false,mobile:{preventCaptionOverlap:false,idleTime:false,clickContent:function(current,event){return current.type==="image"?"toggleControls":false},clickSlide:function(current,event){return current.type==="image"?"toggleControls":"close"},dblclickContent:function(current,event){return current.type==="image"?"zoom":false},dblclickSlide:function(current,event){return current.type==="image"?"zoom":false}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}};var $W=$(window);var $D=$(document);var called=0;var isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $};
// Handle multiple browsers for "requestAnimationFrame" and "cancelAnimationFrame"
var requestAFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}();var cancelAFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(id){window.clearTimeout(id)}}();var transitionEnd=function(){var el=document.createElement("fakeelement"),t;var transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions){if(el.style[t]!==undefined){return transitions[t]}}return"transitionend"}();var forceRedraw=function($el){return $el&&$el.length&&$el[0].offsetHeight};var mergeOpts=function(opts1,opts2){var rez=$.extend(true,{},opts1,opts2);$.each(opts2,function(key,value){if($.isArray(value)){rez[key]=value}});return rez};var inViewport=function(elem){var elemCenter,rez;if(!elem||elem.ownerDocument!==document){return false}$(".fancybox-container").css("pointer-events","none");elemCenter={x:elem.getBoundingClientRect().left+elem.offsetWidth/2,y:elem.getBoundingClientRect().top+elem.offsetHeight/2};rez=document.elementFromPoint(elemCenter.x,elemCenter.y)===elem;$(".fancybox-container").css("pointer-events","");return rez};var FancyBox=function(content,opts,index){var self=this;self.opts=mergeOpts({index:index},$.fancybox.defaults);if($.isPlainObject(opts)){self.opts=mergeOpts(self.opts,opts)}if($.fancybox.isMobile){self.opts=mergeOpts(self.opts,self.opts.mobile)}self.id=self.opts.id||++called;self.currIndex=parseInt(self.opts.index,10)||0;self.prevIndex=null;self.prevPos=null;self.currPos=0;self.firstRun=true;
// All group items
self.group=[];self.slides={};self.addContent(content);if(!self.group.length){return}self.init()};$.extend(FancyBox.prototype,{init:function(){var self=this,firstItem=self.group[self.currIndex],firstItemOpts=firstItem.opts,$container,buttonStr;if(firstItemOpts.closeExisting){$.fancybox.close(true)}$("body").addClass("fancybox-active");if(!$.fancybox.getInstance()&&firstItemOpts.hideScrollbar!==false&&!$.fancybox.isMobile&&document.body.scrollHeight>window.innerHeight){$("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(window.innerWidth-document.documentElement.clientWidth)+"px;}</style>");$("body").addClass("compensate-for-scrollbar")}buttonStr="";$.each(firstItemOpts.buttons,function(index,value){buttonStr+=firstItemOpts.btnTpl[value]||""});$container=$(self.translate(self,firstItemOpts.baseTpl.replace("{{buttons}}",buttonStr).replace("{{arrows}}",firstItemOpts.btnTpl.arrowLeft+firstItemOpts.btnTpl.arrowRight))).attr("id","fancybox-container-"+self.id).addClass(firstItemOpts.baseClass).data("FancyBox",self).appendTo(firstItemOpts.parentEl);self.$refs={container:$container};["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(item){self.$refs[item]=$container.find(".fancybox-"+item)});self.trigger("onInit");self.activate();self.jumpTo(self.currIndex)},translate:function(obj,str){var arr=obj.opts.i18n[obj.opts.lang]||obj.opts.i18n.en;return str.replace(/\{\{(\w+)\}\}/g,function(match,n){return arr[n]===undefined?match:arr[n]})},addContent:function(content){var self=this,items=$.makeArray(content),thumbs;$.each(items,function(i,item){var obj={},opts={},$item,type,found,src,srcParts;if($.isPlainObject(item)){obj=item;opts=item.opts||item}else if($.type(item)==="object"&&$(item).length){$item=$(item);opts=$item.data()||{};opts=$.extend(true,{},opts,opts.options);opts.$orig=$item;obj.src=self.opts.src||opts.src||$item.attr("href");
// Assume that simple syntax is used, for example:
if(!obj.type&&!obj.src){obj.type="inline";obj.src=item}}else{
// Assume we have a simple html code, for example:
obj={type:"html",src:item+""}}obj.opts=$.extend(true,{},self.opts,opts);if($.isArray(opts.buttons)){obj.opts.buttons=opts.buttons}if($.fancybox.isMobile&&obj.opts.mobile){obj.opts=mergeOpts(obj.opts,obj.opts.mobile)}type=obj.type||obj.opts.type;src=obj.src||"";if(!type&&src){if(found=src.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i)){type="video";if(!obj.opts.video.format){obj.opts.video.format="video/"+(found[1]==="ogv"?"ogg":found[1])}}else if(src.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)){type="image"}else if(src.match(/\.(pdf)((\?|#).*)?$/i)){type="iframe";obj=$.extend(true,obj,{contentType:"pdf",opts:{iframe:{preload:false}}})}else if(src.charAt(0)==="#"){type="inline"}}if(type){obj.type=type}else{self.trigger("objectNeedsType",obj)}if(!obj.contentType){obj.contentType=$.inArray(obj.type,["html","inline","ajax"])>-1?"html":obj.type}obj.index=self.group.length;if(obj.opts.smallBtn=="auto"){obj.opts.smallBtn=$.inArray(obj.type,["html","inline","ajax"])>-1}if(obj.opts.toolbar==="auto"){obj.opts.toolbar=!obj.opts.smallBtn}obj.$thumb=obj.opts.$thumb||null;if(obj.opts.$trigger&&obj.index===self.opts.index){obj.$thumb=obj.opts.$trigger.find("img:first");if(obj.$thumb.length){obj.opts.$orig=obj.opts.$trigger}}if(!(obj.$thumb&&obj.$thumb.length)&&obj.opts.$orig){obj.$thumb=obj.opts.$orig.find("img:first")}if(obj.$thumb&&!obj.$thumb.length){obj.$thumb=null}obj.thumb=obj.opts.thumb||(obj.$thumb?obj.$thumb[0].src:null);if($.type(obj.opts.caption)==="function"){obj.opts.caption=obj.opts.caption.apply(item,[self,obj])}if($.type(self.opts.caption)==="function"){obj.opts.caption=self.opts.caption.apply(item,[self,obj])}if(!(obj.opts.caption instanceof $)){obj.opts.caption=obj.opts.caption===undefined?"":obj.opts.caption+""}if(obj.type==="ajax"){srcParts=src.split(/\s+/,2);if(srcParts.length>1){obj.src=srcParts.shift();obj.opts.filter=srcParts.shift()}}if(obj.opts.modal){obj.opts=$.extend(true,obj.opts,{trapFocus:true,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:false,clickSlide:false,clickOutside:false,dblclickContent:false,dblclickSlide:false,dblclickOutside:false})}
// Step 4 - Add processed object to group
self.group.push(obj)});if(Object.keys(self.slides).length){self.updateControls();thumbs=self.Thumbs;if(thumbs&&thumbs.isActive){thumbs.create();thumbs.focus()}}},
// Attach an event handler functions for:
addEvents:function(){var self=this;self.removeEvents();self.$refs.container.on("click.fb-close","[data-fancybox-close]",function(e){e.stopPropagation();e.preventDefault();self.close(e)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(e){e.stopPropagation();e.preventDefault();self.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(e){e.stopPropagation();e.preventDefault();self.next()}).on("click.fb","[data-fancybox-zoom]",function(e){self[self.isScaledDown()?"scaleToActual":"scaleToFit"]()});$W.on("orientationchange.fb resize.fb",function(e){if(e&&e.originalEvent&&e.originalEvent.type==="resize"){if(self.requestId){cancelAFrame(self.requestId)}self.requestId=requestAFrame(function(){self.update(e)})}else{if(self.current&&self.current.type==="iframe"){self.$refs.stage.hide()}setTimeout(function(){self.$refs.stage.show();self.update(e)},$.fancybox.isMobile?600:250)}});$D.on("keydown.fb",function(e){var instance=$.fancybox?$.fancybox.getInstance():null,current=instance.current,keycode=e.keyCode||e.which;if(keycode==9){if(current.opts.trapFocus){self.focus(e)}return}if(!current.opts.keyboard||e.ctrlKey||e.altKey||e.shiftKey||$(e.target).is("input,textarea,video,audio,select")){return}if(keycode===8||keycode===27){e.preventDefault();self.close(e);return}if(keycode===37||keycode===38){e.preventDefault();self.previous();return}if(keycode===39||keycode===40){e.preventDefault();self.next();return}self.trigger("afterKeydown",e,keycode)});if(self.group[self.currIndex].opts.idleTime){self.idleSecondsCounter=0;$D.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(e){self.idleSecondsCounter=0;if(self.isIdle){self.showControls()}self.isIdle=false});self.idleInterval=window.setInterval(function(){self.idleSecondsCounter++;if(self.idleSecondsCounter>=self.group[self.currIndex].opts.idleTime&&!self.isDragging){self.isIdle=true;self.idleSecondsCounter=0;self.hideControls()}},1e3)}},removeEvents:function(){var self=this;$W.off("orientationchange.fb resize.fb");$D.off("keydown.fb .fb-idle");this.$refs.container.off(".fb-close .fb-prev .fb-next");if(self.idleInterval){window.clearInterval(self.idleInterval);self.idleInterval=null}},previous:function(duration){return this.jumpTo(this.currPos-1,duration)},next:function(duration){return this.jumpTo(this.currPos+1,duration)},jumpTo:function(pos,duration){var self=this,groupLen=self.group.length,firstRun,isMoved,loop,current,previous,slidePos,stagePos,prop,diff;if(self.isDragging||self.isClosing||self.isAnimating&&self.firstRun){return}pos=parseInt(pos,10);loop=self.current?self.current.opts.loop:self.opts.loop;if(!loop&&(pos<0||pos>=groupLen)){return false}firstRun=self.firstRun=!Object.keys(self.slides).length;previous=self.current;self.prevIndex=self.currIndex;self.prevPos=self.currPos;current=self.createSlide(pos);if(groupLen>1){if(loop||current.index<groupLen-1){self.createSlide(pos+1)}if(loop||current.index>0){self.createSlide(pos-1)}}self.current=current;self.currIndex=current.index;self.currPos=current.pos;self.trigger("beforeShow",firstRun);self.updateControls();current.forcedDuration=undefined;if($.isNumeric(duration)){current.forcedDuration=duration}else{duration=current.opts[firstRun?"animationDuration":"transitionDuration"]}duration=parseInt(duration,10);isMoved=self.isMoved(current);current.$slide.addClass("fancybox-slide--current");if(firstRun){if(current.opts.animationEffect&&duration){self.$refs.container.css("transition-duration",duration+"ms")}self.$refs.container.addClass("fancybox-is-open").trigger("focus");
// Attempt to load content into slide
self.loadSlide(current);self.preload("image");return}slidePos=$.fancybox.getTranslate(previous.$slide);stagePos=$.fancybox.getTranslate(self.$refs.stage);$.each(self.slides,function(index,slide){$.fancybox.stop(slide.$slide,true)});if(previous.pos!==current.pos){previous.isComplete=false}previous.$slide.removeClass("fancybox-slide--complete fancybox-slide--current");if(isMoved){diff=slidePos.left-(previous.pos*slidePos.width+previous.pos*previous.opts.gutter);$.each(self.slides,function(index,slide){slide.$slide.removeClass("fancybox-animated").removeClass(function(index,className){return(className.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var leftPos=slide.pos*slidePos.width+slide.pos*slide.opts.gutter;$.fancybox.setTranslate(slide.$slide,{top:0,left:leftPos-stagePos.left+diff});if(slide.pos!==current.pos){slide.$slide.addClass("fancybox-slide--"+(slide.pos>current.pos?"next":"previous"))}forceRedraw(slide.$slide);
// Animate the slide
$.fancybox.animate(slide.$slide,{top:0,left:(slide.pos-current.pos)*slidePos.width+(slide.pos-current.pos)*slide.opts.gutter},duration,function(){slide.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous");if(slide.pos===self.currPos){self.complete()}})})}else if(duration&&current.opts.transitionEffect){prop="fancybox-animated fancybox-fx-"+current.opts.transitionEffect;previous.$slide.addClass("fancybox-slide--"+(previous.pos>current.pos?"next":"previous"));$.fancybox.animate(previous.$slide,prop,duration,function(){previous.$slide.removeClass(prop).removeClass("fancybox-slide--next fancybox-slide--previous")},false)}if(current.isLoaded){self.revealContent(current)}else{self.loadSlide(current)}self.preload("image")},createSlide:function(pos){var self=this,$slide,index;index=pos%self.group.length;index=index<0?self.group.length+index:index;if(!self.slides[pos]&&self.group[index]){$slide=$('<div class="fancybox-slide"></div>').appendTo(self.$refs.stage);self.slides[pos]=$.extend(true,{},self.group[index],{pos:pos,$slide:$slide,isLoaded:false});self.updateSlide(self.slides[pos])}return self.slides[pos]},scaleToActual:function(x,y,duration){var self=this,current=self.current,$content=current.$content,canvasWidth=$.fancybox.getTranslate(current.$slide).width,canvasHeight=$.fancybox.getTranslate(current.$slide).height,newImgWidth=current.width,newImgHeight=current.height,imgPos,posX,posY,scaleX,scaleY;if(self.isAnimating||self.isMoved()||!$content||!(current.type=="image"&&current.isLoaded&&!current.hasError)){return}self.isAnimating=true;$.fancybox.stop($content);x=x===undefined?canvasWidth*.5:x;y=y===undefined?canvasHeight*.5:y;imgPos=$.fancybox.getTranslate($content);imgPos.top-=$.fancybox.getTranslate(current.$slide).top;imgPos.left-=$.fancybox.getTranslate(current.$slide).left;scaleX=newImgWidth/imgPos.width;scaleY=newImgHeight/imgPos.height;posX=canvasWidth*.5-newImgWidth*.5;posY=canvasHeight*.5-newImgHeight*.5;if(newImgWidth>canvasWidth){posX=imgPos.left*scaleX-(x*scaleX-x);if(posX>0){posX=0}if(posX<canvasWidth-newImgWidth){posX=canvasWidth-newImgWidth}}if(newImgHeight>canvasHeight){posY=imgPos.top*scaleY-(y*scaleY-y);if(posY>0){posY=0}if(posY<canvasHeight-newImgHeight){posY=canvasHeight-newImgHeight}}self.updateCursor(newImgWidth,newImgHeight);$.fancybox.animate($content,{top:posY,left:posX,scaleX:scaleX,scaleY:scaleY},duration||366,function(){self.isAnimating=false});if(self.SlideShow&&self.SlideShow.isActive){self.SlideShow.stop()}},scaleToFit:function(duration){var self=this,current=self.current,$content=current.$content,end;if(self.isAnimating||self.isMoved()||!$content||!(current.type=="image"&&current.isLoaded&&!current.hasError)){return}self.isAnimating=true;$.fancybox.stop($content);end=self.getFitPos(current);self.updateCursor(end.width,end.height);$.fancybox.animate($content,{top:end.top,left:end.left,scaleX:end.width/$content.width(),scaleY:end.height/$content.height()},duration||366,function(){self.isAnimating=false})},getFitPos:function(slide){var self=this,$content=slide.$content,$slide=slide.$slide,width=slide.width||slide.opts.width,height=slide.height||slide.opts.height,maxWidth,maxHeight,minRatio,aspectRatio,rez={};if(!slide.isLoaded||!$content||!$content.length){return false}maxWidth=$.fancybox.getTranslate(self.$refs.stage).width;maxHeight=$.fancybox.getTranslate(self.$refs.stage).height;maxWidth-=parseFloat($slide.css("paddingLeft"))+parseFloat($slide.css("paddingRight"))+parseFloat($content.css("marginLeft"))+parseFloat($content.css("marginRight"));maxHeight-=parseFloat($slide.css("paddingTop"))+parseFloat($slide.css("paddingBottom"))+parseFloat($content.css("marginTop"))+parseFloat($content.css("marginBottom"));if(!width||!height){width=maxWidth;height=maxHeight}minRatio=Math.min(1,maxWidth/width,maxHeight/height);width=minRatio*width;height=minRatio*height;
// Adjust width/height to precisely fit into container
if(width>maxWidth-.5){width=maxWidth}if(height>maxHeight-.5){height=maxHeight}if(slide.type==="image"){rez.top=Math.floor((maxHeight-height)*.5)+parseFloat($slide.css("paddingTop"));rez.left=Math.floor((maxWidth-width)*.5)+parseFloat($slide.css("paddingLeft"))}else if(slide.contentType==="video"){aspectRatio=slide.opts.width&&slide.opts.height?width/height:slide.opts.ratio||16/9;if(height>width/aspectRatio){height=width/aspectRatio}else if(width>height*aspectRatio){width=height*aspectRatio}}rez.width=width;rez.height=height;return rez},update:function(e){var self=this;$.each(self.slides,function(key,slide){self.updateSlide(slide,e)})},updateSlide:function(slide,e){var self=this,$content=slide&&slide.$content,width=slide.width||slide.opts.width,height=slide.height||slide.opts.height,$slide=slide.$slide;self.adjustCaption(slide);if($content&&(width||height||slide.contentType==="video")&&!slide.hasError){$.fancybox.stop($content);$.fancybox.setTranslate($content,self.getFitPos(slide));if(slide.pos===self.currPos){self.isAnimating=false;self.updateCursor()}}self.adjustLayout(slide);if($slide.length){$slide.trigger("refresh");if(slide.pos===self.currPos){self.$refs.toolbar.add(self.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",$slide.get(0).scrollHeight>$slide.get(0).clientHeight)}}self.trigger("onUpdate",slide,e)},centerSlide:function(duration){var self=this,current=self.current,$slide=current.$slide;if(self.isClosing||!current){return}$slide.siblings().css({transform:"",opacity:""});$slide.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next");$.fancybox.animate($slide,{top:0,left:0,opacity:1},duration===undefined?0:duration,function(){$slide.css({transform:"",opacity:""});if(!current.isComplete){self.complete()}},false)},isMoved:function(slide){var current=slide||this.current,slidePos,stagePos;if(!current){return false}stagePos=$.fancybox.getTranslate(this.$refs.stage);slidePos=$.fancybox.getTranslate(current.$slide);return!current.$slide.hasClass("fancybox-animated")&&(Math.abs(slidePos.top-stagePos.top)>.5||Math.abs(slidePos.left-stagePos.left)>.5)},updateCursor:function(nextWidth,nextHeight){var self=this,current=self.current,$container=self.$refs.container,canPan,isZoomable;if(!current||self.isClosing||!self.Guestures){return}$container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan");canPan=self.canPan(nextWidth,nextHeight);isZoomable=canPan?true:self.isZoomable();$container.toggleClass("fancybox-is-zoomable",isZoomable);$("[data-fancybox-zoom]").prop("disabled",!isZoomable);if(canPan){$container.addClass("fancybox-can-pan")}else if(isZoomable&&(current.opts.clickContent==="zoom"||$.isFunction(current.opts.clickContent)&&current.opts.clickContent(current)=="zoom")){$container.addClass("fancybox-can-zoomIn")}else if(current.opts.touch&&(current.opts.touch.vertical||self.group.length>1)&&current.contentType!=="video"){$container.addClass("fancybox-can-swipe")}},isZoomable:function(){var self=this,current=self.current,fitPos;
// Assume that slide is zoomable if:
if(current&&!self.isClosing&&current.type==="image"&&!current.hasError){if(!current.isLoaded){return true}fitPos=self.getFitPos(current);if(fitPos&&(current.width>fitPos.width||current.height>fitPos.height)){return true}}return false},isScaledDown:function(nextWidth,nextHeight){var self=this,rez=false,current=self.current,$content=current.$content;if(nextWidth!==undefined&&nextHeight!==undefined){rez=nextWidth<current.width&&nextHeight<current.height}else if($content){rez=$.fancybox.getTranslate($content);rez=rez.width<current.width&&rez.height<current.height}return rez},canPan:function(nextWidth,nextHeight){var self=this,current=self.current,pos=null,rez=false;if(current.type==="image"&&(current.isComplete||nextWidth&&nextHeight)&&!current.hasError){rez=self.getFitPos(current);if(nextWidth!==undefined&&nextHeight!==undefined){pos={width:nextWidth,height:nextHeight}}else if(current.isComplete){pos=$.fancybox.getTranslate(current.$content)}if(pos&&rez){rez=Math.abs(pos.width-rez.width)>1.5||Math.abs(pos.height-rez.height)>1.5}}return rez},loadSlide:function(slide){var self=this,type,$slide,ajaxLoad;if(slide.isLoading||slide.isLoaded){return}slide.isLoading=true;if(self.trigger("beforeLoad",slide)===false){slide.isLoading=false;return false}type=slide.type;$slide=slide.$slide;$slide.off("refresh").trigger("onReset").addClass(slide.opts.slideClass);switch(type){case"image":self.setImage(slide);break;case"iframe":self.setIframe(slide);break;case"html":self.setContent(slide,slide.src||slide.content);break;case"video":self.setContent(slide,slide.opts.video.tpl.replace(/\{\{src\}\}/gi,slide.src).replace("{{format}}",slide.opts.videoFormat||slide.opts.video.format||"").replace("{{poster}}",slide.thumb||""));break;case"inline":if($(slide.src).length){self.setContent(slide,$(slide.src))}else{self.setError(slide)}break;case"ajax":self.showLoading(slide);ajaxLoad=$.ajax($.extend({},slide.opts.ajax.settings,{url:slide.src,success:function(data,textStatus){if(textStatus==="success"){self.setContent(slide,data)}},error:function(jqXHR,textStatus){if(jqXHR&&textStatus!=="abort"){self.setError(slide)}}}));$slide.one("onReset",function(){ajaxLoad.abort()});break;default:self.setError(slide);break}return true},setImage:function(slide){var self=this,ghost;setTimeout(function(){var $img=slide.$image;if(!self.isClosing&&slide.isLoading&&(!$img||!$img.length||!$img[0].complete)&&!slide.hasError){self.showLoading(slide)}},50);self.checkSrcset(slide);slide.$content=$('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(slide.$slide.addClass("fancybox-slide--image"));if(slide.opts.preload!==false&&slide.opts.width&&slide.opts.height&&slide.thumb){slide.width=slide.opts.width;slide.height=slide.opts.height;ghost=document.createElement("img");ghost.onerror=function(){$(this).remove();slide.$ghost=null};ghost.onload=function(){self.afterLoad(slide)};slide.$ghost=$(ghost).addClass("fancybox-image").appendTo(slide.$content).attr("src",slide.thumb)}self.setBigImage(slide)},checkSrcset:function(slide){var srcset=slide.opts.srcset||slide.opts.image.srcset,found,temp,pxRatio,windowWidth;if(srcset){pxRatio=window.devicePixelRatio||1;windowWidth=window.innerWidth*pxRatio;temp=srcset.split(",").map(function(el){var ret={};el.trim().split(/\s+/).forEach(function(el,i){var value=parseInt(el.substring(0,el.length-1),10);if(i===0){return ret.url=el}if(value){ret.value=value;ret.postfix=el[el.length-1]}});return ret});temp.sort(function(a,b){return a.value-b.value});for(var j=0;j<temp.length;j++){var el=temp[j];if(el.postfix==="w"&&el.value>=windowWidth||el.postfix==="x"&&el.value>=pxRatio){found=el;break}}if(!found&&temp.length){found=temp[temp.length-1]}if(found){slide.src=found.url;if(slide.width&&slide.height&&found.postfix=="w"){slide.height=slide.width/slide.height*found.value;slide.width=found.value}slide.opts.srcset=srcset}}},setBigImage:function(slide){var self=this,img=document.createElement("img"),$img=$(img);slide.$image=$img.one("error",function(){self.setError(slide)}).one("load",function(){var sizes;if(!slide.$ghost){self.resolveImageSlideSize(slide,this.naturalWidth,this.naturalHeight);self.afterLoad(slide)}if(self.isClosing){return}if(slide.opts.srcset){sizes=slide.opts.sizes;if(!sizes||sizes==="auto"){sizes=(slide.width/slide.height>1&&$W.width()/$W.height()>1?"100":Math.round(slide.width/slide.height*100))+"vw"}$img.attr("sizes",sizes).attr("srcset",slide.opts.srcset)}if(slide.$ghost){setTimeout(function(){if(slide.$ghost&&!self.isClosing){slide.$ghost.hide()}},Math.min(300,Math.max(1e3,slide.height/1600)))}self.hideLoading(slide)}).addClass("fancybox-image").attr("src",slide.src).appendTo(slide.$content);if((img.complete||img.readyState=="complete")&&$img.naturalWidth&&$img.naturalHeight){$img.trigger("load")}else if(img.error){$img.trigger("error")}},resolveImageSlideSize:function(slide,imgWidth,imgHeight){var maxWidth=parseInt(slide.opts.width,10),maxHeight=parseInt(slide.opts.height,10);slide.width=imgWidth;slide.height=imgHeight;if(maxWidth>0){slide.width=maxWidth;slide.height=Math.floor(maxWidth*imgHeight/imgWidth)}if(maxHeight>0){slide.width=Math.floor(maxHeight*imgWidth/imgHeight);slide.height=maxHeight}},setIframe:function(slide){var self=this,opts=slide.opts.iframe,$slide=slide.$slide,$iframe;slide.$content=$('<div class="fancybox-content'+(opts.preload?" fancybox-is-hidden":"")+'"></div>').css(opts.css).appendTo($slide);$slide.addClass("fancybox-slide--"+slide.contentType);slide.$iframe=$iframe=$(opts.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(opts.attr).appendTo(slide.$content);if(opts.preload){self.showLoading(slide);$iframe.on("load.fb error.fb",function(e){this.isReady=1;slide.$slide.trigger("refresh");self.afterLoad(slide)});$slide.on("refresh.fb",function(){var $content=slide.$content,frameWidth=opts.css.width,frameHeight=opts.css.height,$contents,$body;if($iframe[0].isReady!==1){return}try{$contents=$iframe.contents();$body=$contents.find("body")}catch(ignore){}if($body&&$body.length&&$body.children().length){
// Avoid scrolling to top (if multiple instances)
$slide.css("overflow","visible");$content.css({width:"100%","max-width":"100%",height:"9999px"});if(frameWidth===undefined){frameWidth=Math.ceil(Math.max($body[0].clientWidth,$body.outerWidth(true)))}$content.css("width",frameWidth?frameWidth:"").css("max-width","");if(frameHeight===undefined){frameHeight=Math.ceil(Math.max($body[0].clientHeight,$body.outerHeight(true)))}$content.css("height",frameHeight?frameHeight:"");$slide.css("overflow","auto")}$content.removeClass("fancybox-is-hidden")})}else{self.afterLoad(slide)}$iframe.attr("src",slide.src);$slide.one("onReset",function(){try{$(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(ignore){}$(this).off("refresh.fb").empty();slide.isLoaded=false;slide.isRevealed=false})},setContent:function(slide,content){var self=this;if(self.isClosing){return}self.hideLoading(slide);if(slide.$content){$.fancybox.stop(slide.$content)}slide.$slide.empty();if(isQuery(content)&&content.parent().length){if(content.hasClass("fancybox-content")||content.parent().hasClass("fancybox-content")){content.parents(".fancybox-slide").trigger("onReset")}slide.$placeholder=$("<div>").hide().insertAfter(content);content.css("display","inline-block")}else if(!slide.hasError){if($.type(content)==="string"){content=$("<div>").append($.trim(content)).contents()}if(slide.opts.filter){content=$("<div>").html(content).find(slide.opts.filter)}}slide.$slide.one("onReset",function(){$(this).find("video,audio").trigger("pause");if(slide.$placeholder){slide.$placeholder.after(content.removeClass("fancybox-content").hide()).remove();slide.$placeholder=null}if(slide.$smallBtn){slide.$smallBtn.remove();slide.$smallBtn=null}if(!slide.hasError){$(this).empty();slide.isLoaded=false;slide.isRevealed=false}});$(content).appendTo(slide.$slide);if($(content).is("video,audio")){$(content).addClass("fancybox-video");$(content).wrap("<div></div>");slide.contentType="video";slide.opts.width=slide.opts.width||$(content).attr("width");slide.opts.height=slide.opts.height||$(content).attr("height")}slide.$content=slide.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first();slide.$content.siblings().hide();if(!slide.$content.length){slide.$content=slide.$slide.wrapInner("<div></div>").children().first()}slide.$content.addClass("fancybox-content");slide.$slide.addClass("fancybox-slide--"+slide.contentType);self.afterLoad(slide)},setError:function(slide){slide.hasError=true;slide.$slide.trigger("onReset").removeClass("fancybox-slide--"+slide.contentType).addClass("fancybox-slide--error");slide.contentType="html";this.setContent(slide,this.translate(slide,slide.opts.errorTpl));if(slide.pos===this.currPos){this.isAnimating=false}},showLoading:function(slide){var self=this;slide=slide||self.current;if(slide&&!slide.$spinner){slide.$spinner=$(self.translate(self,self.opts.spinnerTpl)).appendTo(slide.$slide).hide().fadeIn("fast")}},hideLoading:function(slide){var self=this;slide=slide||self.current;if(slide&&slide.$spinner){slide.$spinner.stop().remove();delete slide.$spinner}},
// Adjustments after slide content has been loaded
afterLoad:function(slide){var self=this;if(self.isClosing){return}slide.isLoading=false;slide.isLoaded=true;self.trigger("afterLoad",slide);self.hideLoading(slide);
// Add small close button
if(slide.opts.smallBtn&&(!slide.$smallBtn||!slide.$smallBtn.length)){slide.$smallBtn=$(self.translate(slide,slide.opts.btnTpl.smallBtn)).appendTo(slide.$content)}if(slide.opts.protect&&slide.$content&&!slide.hasError){slide.$content.on("contextmenu.fb",function(e){if(e.button==2){e.preventDefault()}return true});
// Add fake element on top of the image
if(slide.type==="image"){$('<div class="fancybox-spaceball"></div>').appendTo(slide.$content)}}self.adjustCaption(slide);self.adjustLayout(slide);if(slide.pos===self.currPos){self.updateCursor()}self.revealContent(slide)},adjustCaption:function(slide){var self=this,current=slide||self.current,caption=current.opts.caption,preventOverlap=current.opts.preventCaptionOverlap,$caption=self.$refs.caption,$clone,captionH=false;$caption.toggleClass("fancybox-caption--separate",preventOverlap);if(preventOverlap&&caption&&caption.length){if(current.pos!==self.currPos){$clone=$caption.clone().appendTo($caption.parent());$clone.children().eq(0).empty().html(caption);captionH=$clone.outerHeight(true);$clone.empty().remove()}else if(self.$caption){captionH=self.$caption.outerHeight(true)}current.$slide.css("padding-bottom",captionH||"")}},adjustLayout:function(slide){var self=this,current=slide||self.current,scrollHeight,marginBottom,inlinePadding,actualPadding;if(current.isLoaded&&current.opts.disableLayoutFix!==true){current.$content.css("margin-bottom","");if(current.$content.outerHeight()>current.$slide.height()+.5){inlinePadding=current.$slide[0].style["padding-bottom"];actualPadding=current.$slide.css("padding-bottom");if(parseFloat(actualPadding)>0){scrollHeight=current.$slide[0].scrollHeight;current.$slide.css("padding-bottom",0);if(Math.abs(scrollHeight-current.$slide[0].scrollHeight)<1){marginBottom=actualPadding}current.$slide.css("padding-bottom",inlinePadding)}}current.$content.css("margin-bottom",marginBottom)}},revealContent:function(slide){var self=this,$slide=slide.$slide,end=false,start=false,isMoved=self.isMoved(slide),isRevealed=slide.isRevealed,effect,effectClassName,duration,opacity;slide.isRevealed=true;effect=slide.opts[self.firstRun?"animationEffect":"transitionEffect"];duration=slide.opts[self.firstRun?"animationDuration":"transitionDuration"];duration=parseInt(slide.forcedDuration===undefined?duration:slide.forcedDuration,10);if(isMoved||slide.pos!==self.currPos||!duration){effect=false}if(effect==="zoom"){if(slide.pos===self.currPos&&duration&&slide.type==="image"&&!slide.hasError&&(start=self.getThumbPos(slide))){end=self.getFitPos(slide)}else{effect="fade"}}if(effect==="zoom"){self.isAnimating=true;end.scaleX=end.width/start.width;end.scaleY=end.height/start.height;opacity=slide.opts.zoomOpacity;if(opacity=="auto"){opacity=Math.abs(slide.width/slide.height-start.width/start.height)>.1}if(opacity){start.opacity=.1;end.opacity=1}$.fancybox.setTranslate(slide.$content.removeClass("fancybox-is-hidden"),start);forceRedraw(slide.$content);$.fancybox.animate(slide.$content,end,duration,function(){self.isAnimating=false;self.complete()});return}self.updateSlide(slide);if(!effect){slide.$content.removeClass("fancybox-is-hidden");if(!isRevealed&&isMoved&&slide.type==="image"&&!slide.hasError){slide.$content.hide().fadeIn("fast")}if(slide.pos===self.currPos){self.complete()}return}$.fancybox.stop($slide);effectClassName="fancybox-slide--"+(slide.pos>=self.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+effect;$slide.addClass(effectClassName).removeClass("fancybox-slide--current");slide.$content.removeClass("fancybox-is-hidden");forceRedraw($slide);if(slide.type!=="image"){slide.$content.hide().show(0)}$.fancybox.animate($slide,"fancybox-slide--current",duration,function(){$slide.removeClass(effectClassName).css({transform:"",opacity:""});if(slide.pos===self.currPos){self.complete()}},true)},getThumbPos:function(slide){var rez=false,$thumb=slide.$thumb,thumbPos,btw,brw,bbw,blw;if(!$thumb||!inViewport($thumb[0])){return false}thumbPos=$.fancybox.getTranslate($thumb);btw=parseFloat($thumb.css("border-top-width")||0);brw=parseFloat($thumb.css("border-right-width")||0);bbw=parseFloat($thumb.css("border-bottom-width")||0);blw=parseFloat($thumb.css("border-left-width")||0);rez={top:thumbPos.top+btw,left:thumbPos.left+blw,width:thumbPos.width-brw-blw,height:thumbPos.height-btw-bbw,scaleX:1,scaleY:1};return thumbPos.width>0&&thumbPos.height>0?rez:false},complete:function(){var self=this,current=self.current,slides={},$el;if(self.isMoved()||!current.isLoaded){return}if(!current.isComplete){current.isComplete=true;current.$slide.siblings().trigger("onReset");self.preload("inline");forceRedraw(current.$slide);current.$slide.addClass("fancybox-slide--complete");$.each(self.slides,function(key,slide){if(slide.pos>=self.currPos-1&&slide.pos<=self.currPos+1){slides[slide.pos]=slide}else if(slide){$.fancybox.stop(slide.$slide);slide.$slide.off().remove()}});self.slides=slides}self.isAnimating=false;self.updateCursor();self.trigger("afterShow");
// Autoplay first html5 video/audio
if(!!current.opts.video.autoStart){current.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",function(){if(Document.exitFullscreen){Document.exitFullscreen()}else if(this.webkitExitFullscreen){this.webkitExitFullscreen()}self.next()})}if(current.opts.autoFocus&&current.contentType==="html"){$el=current.$content.find("input[autofocus]:enabled:visible:first");if($el.length){$el.trigger("focus")}else{self.focus(null,true)}}
// Avoid jumping
current.$slide.scrollTop(0).scrollLeft(0)},preload:function(type){var self=this,prev,next;if(self.group.length<2){return}next=self.slides[self.currPos+1];prev=self.slides[self.currPos-1];if(prev&&prev.type===type){self.loadSlide(prev)}if(next&&next.type===type){self.loadSlide(next)}},focus:function(e,firstRun){var self=this,focusableStr=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","),focusableItems,focusedItemIndex;if(self.isClosing){return}if(e||!self.current||!self.current.isComplete){focusableItems=self.$refs.container.find("*:visible")}else{focusableItems=self.current.$slide.find("*:visible"+(firstRun?":not(.fancybox-close-small)":""))}focusableItems=focusableItems.filter(focusableStr).filter(function(){return $(this).css("visibility")!=="hidden"&&!$(this).hasClass("disabled")});if(focusableItems.length){focusedItemIndex=focusableItems.index(document.activeElement);if(e&&e.shiftKey){if(focusedItemIndex<0||focusedItemIndex==0){e.preventDefault();focusableItems.eq(focusableItems.length-1).trigger("focus")}}else{if(focusedItemIndex<0||focusedItemIndex==focusableItems.length-1){if(e){e.preventDefault()}focusableItems.eq(0).trigger("focus")}}}else{self.$refs.container.trigger("focus")}},
// Activates current instance - brings container to the front and enables keyboard,
activate:function(){var self=this;$(".fancybox-container").each(function(){var instance=$(this).data("FancyBox");if(instance&&instance.id!==self.id&&!instance.isClosing){instance.trigger("onDeactivate");instance.removeEvents();instance.isVisible=false}});self.isVisible=true;if(self.current||self.isIdle){self.update();self.updateControls()}self.trigger("onActivate");self.addEvents()},close:function(e,d){var self=this,current=self.current,effect,duration,$content,domRect,opacity,start,end;var done=function(){self.cleanUp(e)};if(self.isClosing){return false}self.isClosing=true;if(self.trigger("beforeClose",e)===false){self.isClosing=false;requestAFrame(function(){self.update()});return false}self.removeEvents();$content=current.$content;effect=current.opts.animationEffect;duration=$.isNumeric(d)?d:effect?current.opts.animationDuration:0;current.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated");if(e!==true){$.fancybox.stop(current.$slide)}else{effect=false}current.$slide.siblings().trigger("onReset").remove();if(duration){self.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",duration+"ms")}self.hideLoading(current);self.hideControls(true);self.updateCursor();if(effect==="zoom"&&!($content&&duration&&current.type==="image"&&!self.isMoved()&&!current.hasError&&(end=self.getThumbPos(current)))){effect="fade"}if(effect==="zoom"){$.fancybox.stop($content);domRect=$.fancybox.getTranslate($content);start={top:domRect.top,left:domRect.left,scaleX:domRect.width/end.width,scaleY:domRect.height/end.height,width:end.width,height:end.height};opacity=current.opts.zoomOpacity;if(opacity=="auto"){opacity=Math.abs(current.width/current.height-end.width/end.height)>.1}if(opacity){end.opacity=0}$.fancybox.setTranslate($content,start);forceRedraw($content);$.fancybox.animate($content,end,duration,done);return true}if(effect&&duration){$.fancybox.animate(current.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+effect,duration,done)}else{if(e===true){setTimeout(done,duration)}else{done()}}return true},cleanUp:function(e){var self=this,instance,$focus=self.current.opts.$orig,x,y;self.current.$slide.trigger("onReset");self.$refs.container.empty().remove();self.trigger("afterClose",e);if(!!self.current.opts.backFocus){if(!$focus||!$focus.length||!$focus.is(":visible")){$focus=self.$trigger}if($focus&&$focus.length){x=window.scrollX;y=window.scrollY;$focus.trigger("focus");$("html, body").scrollTop(y).scrollLeft(x)}}self.current=null;instance=$.fancybox.getInstance();if(instance){instance.activate()}else{$("body").removeClass("fancybox-active compensate-for-scrollbar");$("#fancybox-style-noscroll").remove()}},trigger:function(name,slide){var args=Array.prototype.slice.call(arguments,1),self=this,obj=slide&&slide.opts?slide:self.current,rez;if(obj){args.unshift(obj)}else{obj=self}args.unshift(self);if($.isFunction(obj.opts[name])){rez=obj.opts[name].apply(obj,args)}if(rez===false){return rez}if(name==="afterClose"||!self.$refs){$D.trigger(name+".fb",args)}else{self.$refs.container.trigger(name+".fb",args)}},updateControls:function(){var self=this,current=self.current,index=current.index,$container=self.$refs.container,$caption=self.$refs.caption,caption=current.opts.caption;current.$slide.trigger("refresh");if(caption&&caption.length){self.$caption=$caption;$caption.children().eq(0).html(caption)}else{self.$caption=null}if(!self.hasHiddenControls&&!self.isIdle){self.showControls()}$container.find("[data-fancybox-count]").html(self.group.length);$container.find("[data-fancybox-index]").html(index+1);$container.find("[data-fancybox-prev]").prop("disabled",!current.opts.loop&&index<=0);$container.find("[data-fancybox-next]").prop("disabled",!current.opts.loop&&index>=self.group.length-1);if(current.type==="image"){$container.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",current.opts.image.src||current.src).show()}else if(current.opts.toolbar){$container.find("[data-fancybox-download],[data-fancybox-zoom]").hide()}if($(document.activeElement).is(":hidden,[disabled]")){self.$refs.container.trigger("focus")}},hideControls:function(andCaption){var self=this,arr=["infobar","toolbar","nav"];if(andCaption||!self.current.opts.preventCaptionOverlap){arr.push("caption")}this.$refs.container.removeClass(arr.map(function(i){return"fancybox-show-"+i}).join(" "));this.hasHiddenControls=true},showControls:function(){var self=this,opts=self.current?self.current.opts:self.opts,$container=self.$refs.container;self.hasHiddenControls=false;self.idleSecondsCounter=0;$container.toggleClass("fancybox-show-toolbar",!!(opts.toolbar&&opts.buttons)).toggleClass("fancybox-show-infobar",!!(opts.infobar&&self.group.length>1)).toggleClass("fancybox-show-caption",!!self.$caption).toggleClass("fancybox-show-nav",!!(opts.arrows&&self.group.length>1)).toggleClass("fancybox-is-modal",!!opts.modal)},toggleControls:function(){if(this.hasHiddenControls){this.showControls()}else{this.hideControls()}}});$.fancybox={version:"3.5.7",defaults:defaults,getInstance:function(command){var instance=$('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),args=Array.prototype.slice.call(arguments,1);if(instance instanceof FancyBox){if($.type(command)==="string"){instance[command].apply(instance,args)}else if($.type(command)==="function"){command.apply(instance,args)}return instance}return false},open:function(items,opts,index){return new FancyBox(items,opts,index)},close:function(all){var instance=this.getInstance();if(instance){instance.close();if(all===true){this.close(all)}}},destroy:function(){this.close(true);$D.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var div=document.createElement("div");return window.getComputedStyle&&window.getComputedStyle(div)&&window.getComputedStyle(div).getPropertyValue("transform")&&!(document.documentMode&&document.documentMode<11)}(),getTranslate:function($el){var domRect;if(!$el||!$el.length){return false}domRect=$el[0].getBoundingClientRect();return{top:domRect.top||0,left:domRect.left||0,width:domRect.width,height:domRect.height,opacity:parseFloat($el.css("opacity"))}},setTranslate:function($el,props){var str="",css={};if(!$el||!props){return}if(props.left!==undefined||props.top!==undefined){str=(props.left===undefined?$el.position().left:props.left)+"px, "+(props.top===undefined?$el.position().top:props.top)+"px";if(this.use3d){str="translate3d("+str+", 0px)"}else{str="translate("+str+")"}}if(props.scaleX!==undefined&&props.scaleY!==undefined){str+=" scale("+props.scaleX+", "+props.scaleY+")"}else if(props.scaleX!==undefined){str+=" scaleX("+props.scaleX+")"}if(str.length){css.transform=str}if(props.opacity!==undefined){css.opacity=props.opacity}if(props.width!==undefined){css.width=props.width}if(props.height!==undefined){css.height=props.height}return $el.css(css)},animate:function($el,to,duration,callback,leaveAnimationName){var self=this,from;if($.isFunction(duration)){callback=duration;duration=null}self.stop($el);from=self.getTranslate($el);$el.on(transitionEnd,function(e){if(e&&e.originalEvent&&(!$el.is(e.originalEvent.target)||e.originalEvent.propertyName=="z-index")){return}self.stop($el);if($.isNumeric(duration)){$el.css("transition-duration","")}if($.isPlainObject(to)){if(to.scaleX!==undefined&&to.scaleY!==undefined){self.setTranslate($el,{top:to.top,left:to.left,width:from.width*to.scaleX,height:from.height*to.scaleY,scaleX:1,scaleY:1})}}else if(leaveAnimationName!==true){$el.removeClass(to)}if($.isFunction(callback)){callback(e)}});if($.isNumeric(duration)){$el.css("transition-duration",duration+"ms")}if($.isPlainObject(to)){if(to.scaleX!==undefined&&to.scaleY!==undefined){delete to.width;delete to.height;if($el.parent().hasClass("fancybox-slide--image")){$el.parent().addClass("fancybox-is-scaling")}}$.fancybox.setTranslate($el,to)}else{$el.addClass(to)}$el.data("timer",setTimeout(function(){$el.trigger(transitionEnd)},duration+33))},stop:function($el,callCallback){if($el&&$el.length){clearTimeout($el.data("timer"));if(callCallback){$el.trigger(transitionEnd)}$el.off(transitionEnd).css("transition-duration","");$el.parent().removeClass("fancybox-is-scaling")}}};function _run(e,opts){var items=[],index=0,$target,value,instance;
// Avoid opening multiple times
if(e&&e.isDefaultPrevented()){return}e.preventDefault();opts=opts||{};if(e&&e.data){opts=mergeOpts(e.data.options,opts)}$target=opts.$target||$(e.currentTarget).trigger("blur");instance=$.fancybox.getInstance();if(instance&&instance.$trigger&&instance.$trigger.is($target)){return}if(opts.selector){items=$(opts.selector)}else{value=$target.attr("data-fancybox")||"";if(value){items=e.data?e.data.items:[];items=items.length?items.filter('[data-fancybox="'+value+'"]'):$('[data-fancybox="'+value+'"]')}else{items=[$target]}}index=$(items).index($target);if(index<0){index=0}instance=$.fancybox.open(items,opts,index);instance.$trigger=$target}$.fn.fancybox=function(options){var selector;options=options||{};selector=options.selector||false;if(selector){$("body").off("click.fb-start",selector).on("click.fb-start",selector,{options:options},_run)}else{this.off("click.fb-start").on("click.fb-start",{items:this,options:options},_run)}return this};$D.on("click.fb-start","[data-fancybox]",_run);$D.on("click.fb-start","[data-fancybox-trigger]",function(e){$('[data-fancybox="'+$(this).attr("data-fancybox-trigger")+'"]').eq($(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:$(this)})});(function(){var buttonStr=".fancybox-button",focusStr="fancybox-focus",$pressed=null;$D.on("mousedown mouseup focus blur",buttonStr,function(e){switch(e.type){case"mousedown":$pressed=$(this);break;case"mouseup":$pressed=null;break;case"focusin":$(buttonStr).removeClass(focusStr);if(!$(this).is($pressed)&&!$(this).is("[disabled]")){$(this).addClass(focusStr)}break;case"focusout":$(buttonStr).removeClass(focusStr);break}})})()})(window,document,jQuery);
// Adds additional media type support
(function($){"use strict";var defaults={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(rez){return"//maps.google."+rez[2]+"/?ll="+(rez[9]?rez[9]+"&z="+Math.floor(rez[10])+(rez[12]?rez[12].replace(/^\//,"&"):""):rez[12]+"").replace(/\?/,"&")+"&output="+(rez[12]&&rez[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(rez){return"//maps.google."+rez[2]+"/maps?q="+rez[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}};var format=function(url,rez,params){if(!url){return}params=params||"";if($.type(params)==="object"){params=$.param(params,true)}$.each(rez,function(key,value){url=url.replace("$"+key,value||"")});if(params.length){url+=(url.indexOf("?")>0?"&":"?")+params}return url};$(document).on("objectNeedsType.fb",function(e,instance,item){var url=item.src||"",type=false,media,thumb,rez,params,urlParams,paramObj,provider;media=$.extend(true,{},defaults,item.opts.media);$.each(media,function(providerName,providerOpts){rez=url.match(providerOpts.matcher);if(!rez){return}type=providerOpts.type;provider=providerName;paramObj={};if(providerOpts.paramPlace&&rez[providerOpts.paramPlace]){urlParams=rez[providerOpts.paramPlace];if(urlParams[0]=="?"){urlParams=urlParams.substring(1)}urlParams=urlParams.split("&");for(var m=0;m<urlParams.length;++m){var p=urlParams[m].split("=",2);if(p.length==2){paramObj[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "))}}}params=$.extend(true,{},providerOpts.params,item.opts[providerName],paramObj);url=$.type(providerOpts.url)==="function"?providerOpts.url.call(this,rez,params,item):format(providerOpts.url,rez,params);thumb=$.type(providerOpts.thumb)==="function"?providerOpts.thumb.call(this,rez,params,item):format(providerOpts.thumb,rez);if(providerName==="youtube"){url=url.replace(/&t=((\d+)m)?(\d+)s/,function(match,p1,m,s){return"&start="+((m?parseInt(m,10)*60:0)+parseInt(s,10))})}else if(providerName==="vimeo"){url=url.replace("&%23","#")}return false});if(type){if(!item.opts.thumb&&!(item.opts.$thumb&&item.opts.$thumb.length)){item.opts.thumb=thumb}if(type==="iframe"){item.opts=$.extend(true,item.opts,{iframe:{preload:false,attr:{scrolling:"no"}}})}$.extend(item,{type:type,src:url,origSrc:item.src,contentSource:provider,contentType:type==="image"?"image":provider=="gmap_place"||provider=="gmap_search"?"map":"video"})}else if(url){item.type=item.opts.defaultType}});
// Load YouTube/Video API on request to detect when video finished playing
var VideoAPILoader={youtube:{src:"https://www.youtube.com/iframe_api","class":"YT",loading:false,loaded:false},vimeo:{src:"https://player.vimeo.com/api/player.js","class":"Vimeo",loading:false,loaded:false},load:function(vendor){var _this=this,script;if(this[vendor].loaded){setTimeout(function(){_this.done(vendor)});return}if(this[vendor].loading){return}this[vendor].loading=true;script=document.createElement("script");script.type="text/javascript";script.src=this[vendor].src;if(vendor==="youtube"){window.onYouTubeIframeAPIReady=function(){_this[vendor].loaded=true;_this.done(vendor)}}else{script.onload=function(){_this[vendor].loaded=true;_this.done(vendor)}}document.body.appendChild(script)},done:function(vendor){var instance,$el,player;if(vendor==="youtube"){delete window.onYouTubeIframeAPIReady}instance=$.fancybox.getInstance();if(instance){$el=instance.current.$content.find("iframe");if(vendor==="youtube"&&YT!==undefined&&YT){player=new YT.Player($el.attr("id"),{events:{onStateChange:function(e){if(e.data==0){instance.next()}}}})}else if(vendor==="vimeo"&&Vimeo!==undefined&&Vimeo){player=new Vimeo.Player($el);player.on("ended",function(){instance.next()})}}}};$(document).on({"afterShow.fb":function(e,instance,current){if(instance.group.length>1&&(current.contentSource==="youtube"||current.contentSource==="vimeo")){VideoAPILoader.load(current.contentSource)}}})})(jQuery);
// Adds touch guestures, handles click and tap events
(function(window,document,$){"use strict";var requestAFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}();var cancelAFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(id){window.clearTimeout(id)}}();var getPointerXY=function(e){var result=[];e=e.originalEvent||e||window.e;e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var key in e){if(e[key].pageX){result.push({x:e[key].pageX,y:e[key].pageY})}else if(e[key].clientX){result.push({x:e[key].clientX,y:e[key].clientY})}}return result};var distance=function(point2,point1,what){if(!point1||!point2){return 0}if(what==="x"){return point2.x-point1.x}else if(what==="y"){return point2.y-point1.y}return Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2))};var isClickable=function($el){if($el.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||$.isFunction($el.get(0).onclick)||$el.data("selectable")){return true}for(var i=0,atts=$el[0].attributes,n=atts.length;i<n;i++){if(atts[i].nodeName.substr(0,14)==="data-fancybox-"){return true}}return false};var hasScrollbars=function(el){var overflowY=window.getComputedStyle(el)["overflow-y"],overflowX=window.getComputedStyle(el)["overflow-x"],vertical=(overflowY==="scroll"||overflowY==="auto")&&el.scrollHeight>el.clientHeight,horizontal=(overflowX==="scroll"||overflowX==="auto")&&el.scrollWidth>el.clientWidth;return vertical||horizontal};var isScrollable=function($el){var rez=false;while(true){rez=hasScrollbars($el.get(0));if(rez){break}$el=$el.parent();if(!$el.length||$el.hasClass("fancybox-stage")||$el.is("body")){break}}return rez};var Guestures=function(instance){var self=this;self.instance=instance;self.$bg=instance.$refs.bg;self.$stage=instance.$refs.stage;self.$container=instance.$refs.container;self.destroy();self.$container.on("touchstart.fb.touch mousedown.fb.touch",$.proxy(self,"ontouchstart"))};Guestures.prototype.destroy=function(){var self=this;self.$container.off(".fb.touch");$(document).off(".fb.touch");if(self.requestId){cancelAFrame(self.requestId);self.requestId=null}if(self.tapped){clearTimeout(self.tapped);self.tapped=null}};Guestures.prototype.ontouchstart=function(e){var self=this,$target=$(e.target),instance=self.instance,current=instance.current,$slide=current.$slide,$content=current.$content,isTouchDevice=e.type=="touchstart";if(isTouchDevice){self.$container.off("mousedown.fb.touch")}if(e.originalEvent&&e.originalEvent.button==2){return}if(!$slide.length||!$target.length||isClickable($target)||isClickable($target.parent())){return}if(!$target.is("img")&&e.originalEvent.clientX>$target[0].clientWidth+$target.offset().left){return}if(!current||instance.isAnimating||current.$slide.hasClass("fancybox-animated")){e.stopPropagation();e.preventDefault();return}self.realPoints=self.startPoints=getPointerXY(e);if(!self.startPoints.length){return}
// Allow other scripts to catch touch event if "touch" is set to false
if(current.touch){e.stopPropagation()}self.startEvent=e;self.canTap=true;self.$target=$target;self.$content=$content;self.opts=current.opts.touch;self.isPanning=false;self.isSwiping=false;self.isZooming=false;self.isScrolling=false;self.canPan=instance.canPan();self.startTime=(new Date).getTime();self.distanceX=self.distanceY=self.distance=0;self.canvasWidth=Math.round($slide[0].clientWidth);self.canvasHeight=Math.round($slide[0].clientHeight);self.contentLastPos=null;self.contentStartPos=$.fancybox.getTranslate(self.$content)||{top:0,left:0};self.sliderStartPos=$.fancybox.getTranslate($slide);self.stagePos=$.fancybox.getTranslate(instance.$refs.stage);self.sliderStartPos.top-=self.stagePos.top;self.sliderStartPos.left-=self.stagePos.left;self.contentStartPos.top-=self.stagePos.top;self.contentStartPos.left-=self.stagePos.left;$(document).off(".fb.touch").on(isTouchDevice?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",$.proxy(self,"ontouchend")).on(isTouchDevice?"touchmove.fb.touch":"mousemove.fb.touch",$.proxy(self,"ontouchmove"));if($.fancybox.isMobile){document.addEventListener("scroll",self.onscroll,true)}if(!(self.opts||self.canPan)||!($target.is(self.$stage)||self.$stage.find($target).length)){if($target.is(".fancybox-image")){e.preventDefault()}if(!($.fancybox.isMobile&&$target.parents(".fancybox-caption").length)){return}}self.isScrollable=isScrollable($target)||isScrollable($target.parent());if(!($.fancybox.isMobile&&self.isScrollable)){e.preventDefault()}if(self.startPoints.length===1||current.hasError){if(self.canPan){$.fancybox.stop(self.$content);self.isPanning=true}else{self.isSwiping=true}self.$container.addClass("fancybox-is-grabbing")}if(self.startPoints.length===2&&current.type==="image"&&(current.isLoaded||current.$ghost)){self.canTap=false;self.isSwiping=false;self.isPanning=false;self.isZooming=true;$.fancybox.stop(self.$content);self.centerPointStartX=(self.startPoints[0].x+self.startPoints[1].x)*.5-$(window).scrollLeft();self.centerPointStartY=(self.startPoints[0].y+self.startPoints[1].y)*.5-$(window).scrollTop();self.percentageOfImageAtPinchPointX=(self.centerPointStartX-self.contentStartPos.left)/self.contentStartPos.width;self.percentageOfImageAtPinchPointY=(self.centerPointStartY-self.contentStartPos.top)/self.contentStartPos.height;self.startDistanceBetweenFingers=distance(self.startPoints[0],self.startPoints[1])}};Guestures.prototype.onscroll=function(e){var self=this;self.isScrolling=true;document.removeEventListener("scroll",self.onscroll,true)};Guestures.prototype.ontouchmove=function(e){var self=this;if(e.originalEvent.buttons!==undefined&&e.originalEvent.buttons===0){self.ontouchend(e);return}if(self.isScrolling){self.canTap=false;return}self.newPoints=getPointerXY(e);if(!(self.opts||self.canPan)||!self.newPoints.length||!self.newPoints.length){return}if(!(self.isSwiping&&self.isSwiping===true)){e.preventDefault()}self.distanceX=distance(self.newPoints[0],self.startPoints[0],"x");self.distanceY=distance(self.newPoints[0],self.startPoints[0],"y");self.distance=distance(self.newPoints[0],self.startPoints[0]);if(self.distance>0){if(self.isSwiping){self.onSwipe(e)}else if(self.isPanning){self.onPan()}else if(self.isZooming){self.onZoom()}}};Guestures.prototype.onSwipe=function(e){var self=this,instance=self.instance,swiping=self.isSwiping,left=self.sliderStartPos.left||0,angle;if(swiping===true){if(Math.abs(self.distance)>10){self.canTap=false;if(instance.group.length<2&&self.opts.vertical){self.isSwiping="y"}else if(instance.isDragging||self.opts.vertical===false||self.opts.vertical==="auto"&&$(window).width()>800){self.isSwiping="x"}else{angle=Math.abs(Math.atan2(self.distanceY,self.distanceX)*180/Math.PI);self.isSwiping=angle>45&&angle<135?"y":"x"}if(self.isSwiping==="y"&&$.fancybox.isMobile&&self.isScrollable){self.isScrolling=true;return}instance.isDragging=self.isSwiping;self.startPoints=self.newPoints;$.each(instance.slides,function(index,slide){var slidePos,stagePos;$.fancybox.stop(slide.$slide);slidePos=$.fancybox.getTranslate(slide.$slide);stagePos=$.fancybox.getTranslate(instance.$refs.stage);slide.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(index,className){return(className.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});if(slide.pos===instance.current.pos){self.sliderStartPos.top=slidePos.top-stagePos.top;self.sliderStartPos.left=slidePos.left-stagePos.left}$.fancybox.setTranslate(slide.$slide,{top:slidePos.top-stagePos.top,left:slidePos.left-stagePos.left})});if(instance.SlideShow&&instance.SlideShow.isActive){instance.SlideShow.stop()}}return}if(swiping=="x"){if(self.distanceX>0&&(self.instance.group.length<2||self.instance.current.index===0&&!self.instance.current.opts.loop)){left=left+Math.pow(self.distanceX,.8)}else if(self.distanceX<0&&(self.instance.group.length<2||self.instance.current.index===self.instance.group.length-1&&!self.instance.current.opts.loop)){left=left-Math.pow(-self.distanceX,.8)}else{left=left+self.distanceX}}self.sliderLastPos={top:swiping=="x"?0:self.sliderStartPos.top+self.distanceY,left:left};if(self.requestId){cancelAFrame(self.requestId);self.requestId=null}self.requestId=requestAFrame(function(){if(self.sliderLastPos){$.each(self.instance.slides,function(index,slide){var pos=slide.pos-self.instance.currPos;$.fancybox.setTranslate(slide.$slide,{top:self.sliderLastPos.top,left:self.sliderLastPos.left+pos*self.canvasWidth+pos*slide.opts.gutter})});self.$container.addClass("fancybox-is-sliding")}})};Guestures.prototype.onPan=function(){var self=this;if(distance(self.newPoints[0],self.realPoints[0])<($.fancybox.isMobile?10:5)){self.startPoints=self.newPoints;return}self.canTap=false;self.contentLastPos=self.limitMovement();if(self.requestId){cancelAFrame(self.requestId)}self.requestId=requestAFrame(function(){$.fancybox.setTranslate(self.$content,self.contentLastPos)})};Guestures.prototype.limitMovement=function(){var self=this;var canvasWidth=self.canvasWidth;var canvasHeight=self.canvasHeight;var distanceX=self.distanceX;var distanceY=self.distanceY;var contentStartPos=self.contentStartPos;var currentOffsetX=contentStartPos.left;var currentOffsetY=contentStartPos.top;var currentWidth=contentStartPos.width;var currentHeight=contentStartPos.height;var minTranslateX,minTranslateY,maxTranslateX,maxTranslateY,newOffsetX,newOffsetY;if(currentWidth>canvasWidth){newOffsetX=currentOffsetX+distanceX}else{newOffsetX=currentOffsetX}newOffsetY=currentOffsetY+distanceY;minTranslateX=Math.max(0,canvasWidth*.5-currentWidth*.5);minTranslateY=Math.max(0,canvasHeight*.5-currentHeight*.5);maxTranslateX=Math.min(canvasWidth-currentWidth,canvasWidth*.5-currentWidth*.5);maxTranslateY=Math.min(canvasHeight-currentHeight,canvasHeight*.5-currentHeight*.5);if(distanceX>0&&newOffsetX>minTranslateX){newOffsetX=minTranslateX-1+Math.pow(-minTranslateX+currentOffsetX+distanceX,.8)||0}if(distanceX<0&&newOffsetX<maxTranslateX){newOffsetX=maxTranslateX+1-Math.pow(maxTranslateX-currentOffsetX-distanceX,.8)||0}if(distanceY>0&&newOffsetY>minTranslateY){newOffsetY=minTranslateY-1+Math.pow(-minTranslateY+currentOffsetY+distanceY,.8)||0}if(distanceY<0&&newOffsetY<maxTranslateY){newOffsetY=maxTranslateY+1-Math.pow(maxTranslateY-currentOffsetY-distanceY,.8)||0}return{top:newOffsetY,left:newOffsetX}};Guestures.prototype.limitPosition=function(newOffsetX,newOffsetY,newWidth,newHeight){var self=this;var canvasWidth=self.canvasWidth;var canvasHeight=self.canvasHeight;if(newWidth>canvasWidth){newOffsetX=newOffsetX>0?0:newOffsetX;newOffsetX=newOffsetX<canvasWidth-newWidth?canvasWidth-newWidth:newOffsetX}else{newOffsetX=Math.max(0,canvasWidth/2-newWidth/2)}if(newHeight>canvasHeight){newOffsetY=newOffsetY>0?0:newOffsetY;newOffsetY=newOffsetY<canvasHeight-newHeight?canvasHeight-newHeight:newOffsetY}else{newOffsetY=Math.max(0,canvasHeight/2-newHeight/2)}return{top:newOffsetY,left:newOffsetX}};Guestures.prototype.onZoom=function(){var self=this;var contentStartPos=self.contentStartPos;var currentWidth=contentStartPos.width;var currentHeight=contentStartPos.height;var currentOffsetX=contentStartPos.left;var currentOffsetY=contentStartPos.top;var endDistanceBetweenFingers=distance(self.newPoints[0],self.newPoints[1]);var pinchRatio=endDistanceBetweenFingers/self.startDistanceBetweenFingers;var newWidth=Math.floor(currentWidth*pinchRatio);var newHeight=Math.floor(currentHeight*pinchRatio);var translateFromZoomingX=(currentWidth-newWidth)*self.percentageOfImageAtPinchPointX;var translateFromZoomingY=(currentHeight-newHeight)*self.percentageOfImageAtPinchPointY;var centerPointEndX=(self.newPoints[0].x+self.newPoints[1].x)/2-$(window).scrollLeft();var centerPointEndY=(self.newPoints[0].y+self.newPoints[1].y)/2-$(window).scrollTop();
// And this is the translation due to translation of the centerpoint
var translateFromTranslatingX=centerPointEndX-self.centerPointStartX;var translateFromTranslatingY=centerPointEndY-self.centerPointStartY;var newOffsetX=currentOffsetX+(translateFromZoomingX+translateFromTranslatingX);var newOffsetY=currentOffsetY+(translateFromZoomingY+translateFromTranslatingY);var newPos={top:newOffsetY,left:newOffsetX,scaleX:pinchRatio,scaleY:pinchRatio};self.canTap=false;self.newWidth=newWidth;self.newHeight=newHeight;self.contentLastPos=newPos;if(self.requestId){cancelAFrame(self.requestId)}self.requestId=requestAFrame(function(){$.fancybox.setTranslate(self.$content,self.contentLastPos)})};Guestures.prototype.ontouchend=function(e){var self=this;var swiping=self.isSwiping;var panning=self.isPanning;var zooming=self.isZooming;var scrolling=self.isScrolling;self.endPoints=getPointerXY(e);self.dMs=Math.max((new Date).getTime()-self.startTime,1);self.$container.removeClass("fancybox-is-grabbing");$(document).off(".fb.touch");document.removeEventListener("scroll",self.onscroll,true);if(self.requestId){cancelAFrame(self.requestId);self.requestId=null}self.isSwiping=false;self.isPanning=false;self.isZooming=false;self.isScrolling=false;self.instance.isDragging=false;if(self.canTap){return self.onTap(e)}self.speed=100;self.velocityX=self.distanceX/self.dMs*.5;self.velocityY=self.distanceY/self.dMs*.5;if(panning){self.endPanning()}else if(zooming){self.endZooming()}else{self.endSwiping(swiping,scrolling)}return};Guestures.prototype.endSwiping=function(swiping,scrolling){var self=this,ret=false,len=self.instance.group.length,distanceX=Math.abs(self.distanceX),canAdvance=swiping=="x"&&len>1&&(self.dMs>130&&distanceX>10||distanceX>50),speedX=300;self.sliderLastPos=null;if(swiping=="y"&&!scrolling&&Math.abs(self.distanceY)>50){$.fancybox.animate(self.instance.current.$slide,{top:self.sliderStartPos.top+self.distanceY+self.velocityY*150,opacity:0},200);ret=self.instance.close(true,250)}else if(canAdvance&&self.distanceX>0){ret=self.instance.previous(speedX)}else if(canAdvance&&self.distanceX<0){ret=self.instance.next(speedX)}if(ret===false&&(swiping=="x"||swiping=="y")){self.instance.centerSlide(200)}self.$container.removeClass("fancybox-is-sliding")};Guestures.prototype.endPanning=function(){var self=this,newOffsetX,newOffsetY,newPos;if(!self.contentLastPos){return}if(self.opts.momentum===false||self.dMs>350){newOffsetX=self.contentLastPos.left;newOffsetY=self.contentLastPos.top}else{newOffsetX=self.contentLastPos.left+self.velocityX*500;newOffsetY=self.contentLastPos.top+self.velocityY*500}newPos=self.limitPosition(newOffsetX,newOffsetY,self.contentStartPos.width,self.contentStartPos.height);newPos.width=self.contentStartPos.width;newPos.height=self.contentStartPos.height;$.fancybox.animate(self.$content,newPos,366)};Guestures.prototype.endZooming=function(){var self=this;var current=self.instance.current;var newOffsetX,newOffsetY,newPos,reset;var newWidth=self.newWidth;var newHeight=self.newHeight;if(!self.contentLastPos){return}newOffsetX=self.contentLastPos.left;newOffsetY=self.contentLastPos.top;reset={top:newOffsetY,left:newOffsetX,width:newWidth,height:newHeight,scaleX:1,scaleY:1};$.fancybox.setTranslate(self.$content,reset);if(newWidth<self.canvasWidth&&newHeight<self.canvasHeight){self.instance.scaleToFit(150)}else if(newWidth>current.width||newHeight>current.height){self.instance.scaleToActual(self.centerPointStartX,self.centerPointStartY,150)}else{newPos=self.limitPosition(newOffsetX,newOffsetY,newWidth,newHeight);$.fancybox.animate(self.$content,newPos,150)}};Guestures.prototype.onTap=function(e){var self=this;var $target=$(e.target);var instance=self.instance;var current=instance.current;var endPoints=e&&getPointerXY(e)||self.startPoints;var tapX=endPoints[0]?endPoints[0].x-$(window).scrollLeft()-self.stagePos.left:0;var tapY=endPoints[0]?endPoints[0].y-$(window).scrollTop()-self.stagePos.top:0;var where;var process=function(prefix){var action=current.opts[prefix];if($.isFunction(action)){action=action.apply(instance,[current,e])}if(!action){return}switch(action){case"close":instance.close(self.startEvent);break;case"toggleControls":instance.toggleControls();break;case"next":instance.next();break;case"nextOrClose":if(instance.group.length>1){instance.next()}else{instance.close(self.startEvent)}break;case"zoom":if(current.type=="image"&&(current.isLoaded||current.$ghost)){if(instance.canPan()){instance.scaleToFit()}else if(instance.isScaledDown()){instance.scaleToActual(tapX,tapY)}else if(instance.group.length<2){instance.close(self.startEvent)}}break}};if(e.originalEvent&&e.originalEvent.button==2){return}if(!$target.is("img")&&tapX>$target[0].clientWidth+$target.offset().left){return}if($target.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container")){where="Outside"}else if($target.is(".fancybox-slide")){where="Slide"}else if(instance.current.$content&&instance.current.$content.find($target).addBack().filter($target).length){where="Content"}else{return}if(self.tapped){clearTimeout(self.tapped);self.tapped=null;if(Math.abs(tapX-self.tapX)>50||Math.abs(tapY-self.tapY)>50){return this}process("dblclick"+where)}else{self.tapX=tapX;self.tapY=tapY;if(current.opts["dblclick"+where]&&current.opts["dblclick"+where]!==current.opts["click"+where]){self.tapped=setTimeout(function(){self.tapped=null;if(!instance.isAnimating){process("click"+where)}},500)}else{process("click"+where)}}return this};$(document).on("onActivate.fb",function(e,instance){if(instance&&!instance.Guestures){instance.Guestures=new Guestures(instance)}}).on("beforeClose.fb",function(e,instance){if(instance&&instance.Guestures){instance.Guestures.destroy()}})})(window,document,jQuery);(function(document,$){"use strict";$.extend(true,$.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg>'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg>'+"</button>"},slideShow:{autoStart:false,speed:3e3,progress:true}});var SlideShow=function(instance){this.instance=instance;this.init()};$.extend(SlideShow.prototype,{timer:null,isActive:false,$button:null,init:function(){var self=this,instance=self.instance,opts=instance.group[instance.currIndex].opts.slideShow;self.$button=instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){self.toggle()});if(instance.group.length<2||!opts){self.$button.hide()}else if(opts.progress){self.$progress=$('<div class="fancybox-progress"></div>').appendTo(instance.$refs.inner)}},set:function(force){var self=this,instance=self.instance,current=instance.current;if(current&&(force===true||current.opts.loop||instance.currIndex<instance.group.length-1)){if(self.isActive&&current.contentType!=="video"){if(self.$progress){$.fancybox.animate(self.$progress.show(),{scaleX:1},current.opts.slideShow.speed)}self.timer=setTimeout(function(){if(!instance.current.opts.loop&&instance.current.index==instance.group.length-1){instance.jumpTo(0)}else{instance.next()}},current.opts.slideShow.speed)}}else{self.stop();instance.idleSecondsCounter=0;instance.showControls()}},clear:function(){var self=this;clearTimeout(self.timer);self.timer=null;if(self.$progress){self.$progress.removeAttr("style").hide()}},start:function(){var self=this,current=self.instance.current;if(current){self.$button.attr("title",(current.opts.i18n[current.opts.lang]||current.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause");self.isActive=true;if(current.isComplete){self.set(true)}self.instance.trigger("onSlideShowChange",true)}},stop:function(){var self=this,current=self.instance.current;self.clear();self.$button.attr("title",(current.opts.i18n[current.opts.lang]||current.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play");self.isActive=false;self.instance.trigger("onSlideShowChange",false);if(self.$progress){self.$progress.removeAttr("style").hide()}},toggle:function(){var self=this;if(self.isActive){self.stop()}else{self.start()}}});$(document).on({"onInit.fb":function(e,instance){if(instance&&!instance.SlideShow){instance.SlideShow=new SlideShow(instance)}},"beforeShow.fb":function(e,instance,current,firstRun){var SlideShow=instance&&instance.SlideShow;if(firstRun){if(SlideShow&&current.opts.slideShow.autoStart){SlideShow.start()}}else if(SlideShow&&SlideShow.isActive){SlideShow.clear()}},"afterShow.fb":function(e,instance,current){var SlideShow=instance&&instance.SlideShow;if(SlideShow&&SlideShow.isActive){SlideShow.set()}},"afterKeydown.fb":function(e,instance,current,keypress,keycode){var SlideShow=instance&&instance.SlideShow;if(SlideShow&&current.opts.slideShow&&(keycode===80||keycode===32)&&!$(document.activeElement).is("button,a,input")){keypress.preventDefault();SlideShow.toggle()}},"beforeClose.fb onDeactivate.fb":function(e,instance){var SlideShow=instance&&instance.SlideShow;if(SlideShow){SlideShow.stop()}}});
// Page Visibility API to pause slideshow when window is not active
$(document).on("visibilitychange",function(){var instance=$.fancybox.getInstance(),SlideShow=instance&&instance.SlideShow;if(SlideShow&&SlideShow.isActive){if(document.hidden){SlideShow.clear()}else{SlideShow.set()}}})})(document,jQuery);
// Adds fullscreen functionality
(function(document,$){"use strict";var fn=function(){var fnMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var ret={};for(var i=0;i<fnMap.length;i++){var val=fnMap[i];if(val&&val[1]in document){for(var j=0;j<val.length;j++){ret[fnMap[0][j]]=val[j]}return ret}}return false}();if(fn){var FullScreen={request:function(elem){elem=elem||document.documentElement;elem[fn.requestFullscreen](elem.ALLOW_KEYBOARD_INPUT)},exit:function(){document[fn.exitFullscreen]()},toggle:function(elem){elem=elem||document.documentElement;if(this.isFullscreen()){this.exit()}else{this.request(elem)}},isFullscreen:function(){return Boolean(document[fn.fullscreenElement])},enabled:function(){return Boolean(document[fn.fullscreenEnabled])}};$.extend(true,$.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg>'+"</button>"},fullScreen:{autoStart:false}});$(document).on(fn.fullscreenchange,function(){var isFullscreen=FullScreen.isFullscreen(),instance=$.fancybox.getInstance();if(instance){if(instance.current&&instance.current.type==="image"&&instance.isAnimating){instance.isAnimating=false;instance.update(true,true,0);if(!instance.isComplete){instance.complete()}}instance.trigger("onFullscreenChange",isFullscreen);instance.$refs.container.toggleClass("fancybox-is-fullscreen",isFullscreen);instance.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!isFullscreen).toggleClass("fancybox-button--fsexit",isFullscreen)}})}$(document).on({"onInit.fb":function(e,instance){var $container;if(!fn){instance.$refs.toolbar.find("[data-fancybox-fullscreen]").remove();return}if(instance&&instance.group[instance.currIndex].opts.fullScreen){$container=instance.$refs.container;$container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(e){e.stopPropagation();e.preventDefault();FullScreen.toggle()});if(instance.opts.fullScreen&&instance.opts.fullScreen.autoStart===true){FullScreen.request()}
// Expose API
instance.FullScreen=FullScreen}else if(instance){instance.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()}},"afterKeydown.fb":function(e,instance,current,keypress,keycode){if(instance&&instance.FullScreen&&keycode===70){keypress.preventDefault();instance.FullScreen.toggle()}},"beforeClose.fb":function(e,instance){if(instance&&instance.FullScreen&&instance.$refs.container.hasClass("fancybox-is-fullscreen")){FullScreen.exit()}}})})(document,jQuery);(function(document,$){"use strict";var CLASS="fancybox-thumbs",CLASS_ACTIVE=CLASS+"-active";$.fancybox.defaults=$.extend(true,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg>'+"</button>"},thumbs:{autoStart:false,hideOnClose:true,parentEl:".fancybox-container",axis:"y"}},$.fancybox.defaults);var FancyThumbs=function(instance){this.init(instance)};$.extend(FancyThumbs.prototype,{$button:null,$grid:null,$list:null,isVisible:false,isActive:false,init:function(instance){var self=this,group=instance.group,enabled=0;self.instance=instance;self.opts=group[instance.currIndex].opts.thumbs;instance.Thumbs=self;self.$button=instance.$refs.toolbar.find("[data-fancybox-thumbs]");for(var i=0,len=group.length;i<len;i++){if(group[i].thumb){enabled++}if(enabled>1){break}}if(enabled>1&&!!self.opts){self.$button.removeAttr("style").on("click",function(){self.toggle()});self.isActive=true}else{self.$button.hide()}},create:function(){var self=this,instance=self.instance,parentEl=self.opts.parentEl,list=[],src;if(!self.$grid){self.$grid=$('<div class="'+CLASS+" "+CLASS+"-"+self.opts.axis+'"></div>').appendTo(instance.$refs.container.find(parentEl).addBack().filter(parentEl));
// Add "click" event that performs gallery navigation
self.$grid.on("click","a",function(){instance.jumpTo($(this).attr("data-index"))})}if(!self.$list){self.$list=$('<div class="'+CLASS+'__list">').appendTo(self.$grid)}$.each(instance.group,function(i,item){src=item.thumb;if(!src&&item.type==="image"){src=item.src}list.push('<a href="javascript:;" tabindex="0" data-index="'+i+'"'+(src&&src.length?' style="background-image:url('+src+')"':'class="fancybox-thumbs-missing"')+"></a>")});self.$list[0].innerHTML=list.join("");if(self.opts.axis==="x"){self.$list.width(parseInt(self.$grid.css("padding-right"),10)+instance.group.length*self.$list.children().eq(0).outerWidth(true))}},focus:function(duration){var self=this,$list=self.$list,$grid=self.$grid,thumb,thumbPos;if(!self.instance.current){return}thumb=$list.children().removeClass(CLASS_ACTIVE).filter('[data-index="'+self.instance.current.index+'"]').addClass(CLASS_ACTIVE);thumbPos=thumb.position();if(self.opts.axis==="y"&&(thumbPos.top<0||thumbPos.top>$list.height()-thumb.outerHeight())){$list.stop().animate({scrollTop:$list.scrollTop()+thumbPos.top},duration)}else if(self.opts.axis==="x"&&(thumbPos.left<$grid.scrollLeft()||thumbPos.left>$grid.scrollLeft()+($grid.width()-thumb.outerWidth()))){$list.parent().stop().animate({scrollLeft:thumbPos.left},duration)}},update:function(){var that=this;that.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible);if(that.isVisible){if(!that.$grid){that.create()}that.instance.trigger("onThumbsShow");that.focus(0)}else if(that.$grid){that.instance.trigger("onThumbsHide")}that.instance.update()},hide:function(){this.isVisible=false;this.update()},show:function(){this.isVisible=true;this.update()},toggle:function(){this.isVisible=!this.isVisible;this.update()}});$(document).on({"onInit.fb":function(e,instance){var Thumbs;if(instance&&!instance.Thumbs){Thumbs=new FancyThumbs(instance);if(Thumbs.isActive&&Thumbs.opts.autoStart===true){Thumbs.show()}}},"beforeShow.fb":function(e,instance,item,firstRun){var Thumbs=instance&&instance.Thumbs;if(Thumbs&&Thumbs.isVisible){Thumbs.focus(firstRun?0:250)}},"afterKeydown.fb":function(e,instance,current,keypress,keycode){var Thumbs=instance&&instance.Thumbs;if(Thumbs&&Thumbs.isActive&&keycode===71){keypress.preventDefault();Thumbs.toggle()}},"beforeClose.fb":function(e,instance){var Thumbs=instance&&instance.Thumbs;if(Thumbs&&Thumbs.isVisible&&Thumbs.opts.hideOnClose!==false){Thumbs.$grid.hide()}}})})(document,jQuery);(function(document,$){"use strict";$.extend(true,$.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}">'+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg>'+"</button>"},share:{url:function(instance,item){return(!instance.currentHash&&!(item.type==="inline"||item.type==="html")?item.origSrc||item.src:false)||window.location},tpl:'<div class="fancybox-share">'+"<h1>{{SHARE}}</h1>"+"<p>"+'<a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}">'+'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg>'+"<span>Facebook</span>"+"</a>"+'<a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}">'+'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg>'+"<span>Twitter</span>"+"</a>"+'<a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}">'+'<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg>'+"<span>Pinterest</span>"+"</a>"+"</p>"+'<p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p>'+"</div>"}});function escapeHtml(string){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(string).replace(/[&<>"'`=\/]/g,function(s){return entityMap[s]})}$(document).on("click","[data-fancybox-share]",function(){var instance=$.fancybox.getInstance(),current=instance.current||null,url,tpl;if(!current){return}if($.type(current.opts.share.url)==="function"){url=current.opts.share.url.apply(current,[instance,current])}tpl=current.opts.share.tpl.replace(/\{\{media\}\}/g,current.type==="image"?encodeURIComponent(current.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(url)).replace(/\{\{url_raw\}\}/g,escapeHtml(url)).replace(/\{\{descr\}\}/g,instance.$caption?encodeURIComponent(instance.$caption.text()):"");$.fancybox.open({src:instance.translate(instance,tpl),type:"html",opts:{touch:false,animationEffect:false,afterLoad:function(shareInstance,shareCurrent){instance.$refs.container.one("beforeClose.fb",function(){shareInstance.close(null,0)});shareCurrent.$content.find(".fancybox-share__button").click(function(){window.open(this.href,"Share","width=550, height=450");return false})},mobile:{autoFocus:false}}})})})(document,jQuery);(function(window,document,$){"use strict";if(!$.escapeSelector){$.escapeSelector=function(sel){var rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;var fcssescape=function(ch,asCodePoint){if(asCodePoint){
// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
if(ch==="\x00"){return"�"}return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" "}
// Other potentially-special ASCII characters get backslash-escaped
return"\\"+ch};return(sel+"").replace(rcssescape,fcssescape)}}function parseUrl(){var hash=window.location.hash.substr(1),rez=hash.split("-"),index=rez.length>1&&/^\+?\d+$/.test(rez[rez.length-1])?parseInt(rez.pop(-1),10)||1:1,gallery=rez.join("-");return{hash:hash,index:index<1?1:index,gallery:gallery}}function triggerFromUrl(url){if(url.gallery!==""){$("[data-fancybox='"+$.escapeSelector(url.gallery)+"']").eq(url.index-1).focus().trigger("click.fb-start")}}function getGalleryID(instance){var opts,ret;if(!instance){return false}opts=instance.current?instance.current.opts:instance.opts;ret=opts.hash||(opts.$orig?opts.$orig.data("fancybox")||opts.$orig.data("fancybox-trigger"):"");return ret===""?false:ret}$(function(){if($.fancybox.defaults.hash===false){return}$(document).on({"onInit.fb":function(e,instance){var url,gallery;if(instance.group[instance.currIndex].opts.hash===false){return}url=parseUrl();gallery=getGalleryID(instance);if(gallery&&url.gallery&&gallery==url.gallery){instance.currIndex=url.index-1}},"beforeShow.fb":function(e,instance,current,firstRun){var gallery;if(!current||current.opts.hash===false){return}gallery=getGalleryID(instance);if(!gallery){return}instance.currentHash=gallery+(instance.group.length>1?"-"+(current.index+1):"");if(window.location.hash==="#"+instance.currentHash){return}if(firstRun&&!instance.origHash){instance.origHash=window.location.hash}if(instance.hashTimer){clearTimeout(instance.hashTimer)}instance.hashTimer=setTimeout(function(){if("replaceState"in window.history){window.history[firstRun?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+"#"+instance.currentHash);if(firstRun){instance.hasCreatedHistory=true}}else{window.location.hash=instance.currentHash}instance.hashTimer=null},300)},"beforeClose.fb":function(e,instance,current){if(!current||current.opts.hash===false){return}clearTimeout(instance.hashTimer);if(instance.currentHash&&instance.hasCreatedHistory){window.history.back()}else if(instance.currentHash){if("replaceState"in window.history){window.history.replaceState({},document.title,window.location.pathname+window.location.search+(instance.origHash||""))}else{window.location.hash=instance.origHash}}instance.currentHash=null}});$(window).on("hashchange.fb",function(){var url=parseUrl(),fb=null;$.each($(".fancybox-container").get().reverse(),function(index,value){var tmp=$(value).data("FancyBox");if(tmp&&tmp.currentHash){fb=tmp;return false}});if(fb){if(fb.currentHash!==url.gallery+"-"+url.index&&!(url.index===1&&fb.currentHash==url.gallery)){fb.currentHash=null;fb.close()}}else if(url.gallery!==""){triggerFromUrl(url)}});setTimeout(function(){if(!$.fancybox.getInstance()){triggerFromUrl(parseUrl())}},50)})})(window,document,jQuery);(function(document,$){"use strict";var prevTime=(new Date).getTime();$(document).on({"onInit.fb":function(e,instance,current){instance.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(e){var current=instance.current,currTime=(new Date).getTime();if(instance.group.length<2||current.opts.wheel===false||current.opts.wheel==="auto"&&current.type!=="image"){return}e.preventDefault();e.stopPropagation();if(current.$slide.hasClass("fancybox-animated")){return}e=e.originalEvent||e;if(currTime-prevTime<250){return}prevTime=currTime;instance[(-e.deltaY||-e.deltaX||e.wheelDelta||-e.detail)<0?"next":"previous"]()})}})})(document,jQuery);
(function(factory){"use strict";if(typeof define==="function"&&define.amd){
// AMD
define(["jquery"],factory)}else if(typeof module!=="undefined"&&module.exports){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){var _previousResizeWidth=-1,_updateTimeout=-1;var _parse=function(value){return parseFloat(value)||0};var _rows=function(elements){var tolerance=1,$elements=$(elements),lastTop=null,rows=[];$elements.each(function(){var $that=$(this),top=$that.offset().top-_parse($that.css("margin-top")),lastRow=rows.length>0?rows[rows.length-1]:null;if(lastRow===null){rows.push($that)}else{if(Math.floor(Math.abs(lastTop-top))<=tolerance){rows[rows.length-1]=lastRow.add($that)}else{rows.push($that)}}lastTop=top});return rows};var _parseOptions=function(options){var opts={byRow:true,property:"height",target:null,remove:false};if(typeof options==="object"){return $.extend(opts,options)}if(typeof options==="boolean"){opts.byRow=options}else if(options==="remove"){opts.remove=true}return opts};var matchHeight=$.fn.matchHeight=function(options){var opts=_parseOptions(options);if(opts.remove){var that=this;this.css(opts.property,"");$.each(matchHeight._groups,function(key,group){group.elements=group.elements.not(that)});return this}if(this.length<=1&&!opts.target){return this}matchHeight._groups.push({elements:this,options:opts});matchHeight._apply(this,opts);return this};matchHeight.version="0.7.2";matchHeight._groups=[];matchHeight._throttle=80;matchHeight._maintainScroll=false;matchHeight._beforeUpdate=null;matchHeight._afterUpdate=null;matchHeight._rows=_rows;matchHeight._parse=_parse;matchHeight._parseOptions=_parseOptions;matchHeight._apply=function(elements,options){var opts=_parseOptions(options),$elements=$(elements),rows=[$elements];var scrollTop=$(window).scrollTop(),htmlHeight=$("html").outerHeight(true);var $hiddenParents=$elements.parents().filter(":hidden");$hiddenParents.each(function(){var $that=$(this);$that.data("style-cache",$that.attr("style"))});$hiddenParents.css("display","block");if(opts.byRow&&!opts.target){$elements.each(function(){var $that=$(this),display=$that.css("display");if(display!=="inline-block"&&display!=="flex"&&display!=="inline-flex"){display="block"}$that.data("style-cache",$that.attr("style"));$that.css({display:display,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})});rows=_rows($elements);$elements.each(function(){var $that=$(this);$that.attr("style",$that.data("style-cache")||"")})}$.each(rows,function(key,row){var $row=$(row),targetHeight=0;if(!opts.target){if(opts.byRow&&$row.length<=1){$row.css(opts.property,"");return}$row.each(function(){var $that=$(this),style=$that.attr("style"),display=$that.css("display");if(display!=="inline-block"&&display!=="flex"&&display!=="inline-flex"){display="block"}var css={display:display};css[opts.property]="";$that.css(css);if($that.outerHeight(false)>targetHeight){targetHeight=$that.outerHeight(false)}if(style){$that.attr("style",style)}else{$that.css("display","")}})}else{targetHeight=opts.target.outerHeight(false)}$row.each(function(){var $that=$(this),verticalPadding=0;if(opts.target&&$that.is(opts.target)){return}if($that.css("box-sizing")!=="border-box"){verticalPadding+=_parse($that.css("border-top-width"))+_parse($that.css("border-bottom-width"));verticalPadding+=_parse($that.css("padding-top"))+_parse($that.css("padding-bottom"))}$that.css(opts.property,targetHeight-verticalPadding+"px")})});$hiddenParents.each(function(){var $that=$(this);$that.attr("style",$that.data("style-cache")||null)});if(matchHeight._maintainScroll){$(window).scrollTop(scrollTop/htmlHeight*$("html").outerHeight(true))}return this};/*
    *  matchHeight._applyDataApi
    *  applies matchHeight to all elements with a data-match-height attribute
    */
matchHeight._applyDataApi=function(){var groups={};$("[data-match-height], [data-mh]").each(function(){var $this=$(this),groupId=$this.attr("data-mh")||$this.attr("data-match-height");if(groupId in groups){groups[groupId]=groups[groupId].add($this)}else{groups[groupId]=$this}});$.each(groups,function(){this.matchHeight(true)})};var _update=function(event){if(matchHeight._beforeUpdate){matchHeight._beforeUpdate(event,matchHeight._groups)}$.each(matchHeight._groups,function(){matchHeight._apply(this.elements,this.options)});if(matchHeight._afterUpdate){matchHeight._afterUpdate(event,matchHeight._groups)}};matchHeight._update=function(throttle,event){if(event&&event.type==="resize"){var windowWidth=$(window).width();if(windowWidth===_previousResizeWidth){return}_previousResizeWidth=windowWidth}if(!throttle){_update(event)}else if(_updateTimeout===-1){_updateTimeout=setTimeout(function(){_update(event);_updateTimeout=-1},matchHeight._throttle)}};$(matchHeight._applyDataApi);var on=$.fn.on?"on":"bind";$(window)[on]("load",function(event){matchHeight._update(false,event)});$(window)[on]("resize orientationchange",function(event){matchHeight._update(true,event)})});
(function(root,factory){if(typeof define==="function"&&define.amd){
// AMD. Register as an anonymous module unless amdModuleId is set
define("Chartist",[],function(){return root["Chartist"]=factory()})}else if(typeof module==="object"&&module.exports){module.exports=factory()}else{root["Chartist"]=factory()}})(this,function(){var Chartist={version:"0.11.3"};(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;Chartist.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"};Chartist.noop=function(n){return n};/**
   * Generates a-z from a number 0 to 26
   *
   * @memberof Chartist.Core
   * @param {Number} n A number from 0 to 26 that will result in a letter a-z
   * @return {String} A character from a-z based on the input number n
   */
Chartist.alphaNumerate=function(n){return String.fromCharCode(97+n%26)};/**
   * Simple recursive object extend
   *
   * @memberof Chartist.Core
   * @param {Object} target Target object where the source will be merged into
   * @param {Object...} sources This object (objects) will be merged into target and then target is returned
   * @return {Object} An object that has the same reference as target but is extended and merged with the properties of source
   */
Chartist.extend=function(target){var i,source,sourceProp;target=target||{};for(i=1;i<arguments.length;i++){source=arguments[i];for(var prop in source){sourceProp=source[prop];if(typeof sourceProp==="object"&&sourceProp!==null&&!(sourceProp instanceof Array)){target[prop]=Chartist.extend(target[prop],sourceProp)}else{target[prop]=sourceProp}}}return target};Chartist.replaceAll=function(str,subStr,newSubStr){return str.replace(new RegExp(subStr,"g"),newSubStr)};Chartist.ensureUnit=function(value,unit){if(typeof value==="number"){value=value+unit}return value};Chartist.quantity=function(input){if(typeof input==="string"){var match=/^(\d+)\s*(.*)$/g.exec(input);return{value:+match[1],unit:match[2]||undefined}}return{value:input}};Chartist.querySelector=function(query){return query instanceof Node?query:document.querySelector(query)};/**
   * Functional style helper to produce array with given length initialized with undefined values
   *
   * @memberof Chartist.Core
   * @param length
   * @return {Array}
   */
Chartist.times=function(length){return Array.apply(null,new Array(length))};Chartist.sum=function(previous,current){return previous+(current?current:0)};/**
   * Multiply helper to be used in `Array.map` for multiplying each value of an array with a factor.
   *
   * @memberof Chartist.Core
   * @param {Number} factor
   * @returns {Function} Function that can be used in `Array.map` to multiply each value in an array
   */
Chartist.mapMultiply=function(factor){return function(num){return num*factor}};/**
   * Add helper to be used in `Array.map` for adding a addend to each value of an array.
   *
   * @memberof Chartist.Core
   * @param {Number} addend
   * @returns {Function} Function that can be used in `Array.map` to add a addend to each value in an array
   */
Chartist.mapAdd=function(addend){return function(num){return num+addend}};/**
   * Map for multi dimensional arrays where their nested arrays will be mapped in serial. The output array will have the length of the largest nested array. The callback function is called with variable arguments where each argument is the nested array value (or undefined if there are no more values).
   *
   * @memberof Chartist.Core
   * @param arr
   * @param cb
   * @return {Array}
   */
Chartist.serialMap=function(arr,cb){var result=[],length=Math.max.apply(null,arr.map(function(e){return e.length}));Chartist.times(length).forEach(function(e,index){var args=arr.map(function(e){return e[index]});result[index]=cb.apply(null,args)});return result};Chartist.roundWithPrecision=function(value,digits){var precision=Math.pow(10,digits||Chartist.precision);return Math.round(value*precision)/precision};Chartist.precision=8;/**
   * A map with characters to escape for strings to be safely used as attribute values.
   *
   * @memberof Chartist.Core
   * @type {Object}
   */
Chartist.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};Chartist.serialize=function(data){if(data===null||data===undefined){return data}else if(typeof data==="number"){data=""+data}else if(typeof data==="object"){data=JSON.stringify({data:data})}return Object.keys(Chartist.escapingMap).reduce(function(result,key){return Chartist.replaceAll(result,key,Chartist.escapingMap[key])},data)};Chartist.deserialize=function(data){if(typeof data!=="string"){return data}data=Object.keys(Chartist.escapingMap).reduce(function(result,key){return Chartist.replaceAll(result,Chartist.escapingMap[key],key)},data);try{data=JSON.parse(data);data=data.data!==undefined?data.data:data}catch(e){}return data};Chartist.createSvg=function(container,width,height,className){var svg;width=width||"100%";height=height||"100%";
// Since the DOM API does not support namespaces we need to manually search the returned list http://www.w3.org/TR/selectors-api/
Array.prototype.slice.call(container.querySelectorAll("svg")).filter(function filterChartistSvgObjects(svg){return svg.getAttributeNS(Chartist.namespaces.xmlns,"ct")}).forEach(function removePreviousElement(svg){container.removeChild(svg)});svg=new Chartist.Svg("svg").attr({width:width,height:height}).addClass(className);svg._node.style.width=width;svg._node.style.height=height;
// Add the DOM node to our container
container.appendChild(svg._node);return svg};Chartist.normalizeData=function(data,reverse,multi){var labelCount;var output={raw:data,normalized:{}};output.normalized.series=Chartist.getDataArray({series:data.series||[]},reverse,multi);if(output.normalized.series.every(function(value){return value instanceof Array})){labelCount=Math.max.apply(null,output.normalized.series.map(function(series){return series.length}))}else{labelCount=output.normalized.series.length}output.normalized.labels=(data.labels||[]).slice();Array.prototype.push.apply(output.normalized.labels,Chartist.times(Math.max(0,labelCount-output.normalized.labels.length)).map(function(){return""}));if(reverse){Chartist.reverseData(output.normalized)}return output};Chartist.safeHasProperty=function(object,property){return object!==null&&typeof object==="object"&&object.hasOwnProperty(property)};Chartist.isDataHoleValue=function(value){return value===null||value===undefined||typeof value==="number"&&isNaN(value)};Chartist.reverseData=function(data){data.labels.reverse();data.series.reverse();for(var i=0;i<data.series.length;i++){if(typeof data.series[i]==="object"&&data.series[i].data!==undefined){data.series[i].data.reverse()}else if(data.series[i]instanceof Array){data.series[i].reverse()}}};/**
   * Convert data series into plain array
   *
   * @memberof Chartist.Core
   * @param {Object} data The series object that contains the data to be visualized in the chart
   * @param {Boolean} [reverse] If true the whole data is reversed by the getDataArray call. This will modify the data object passed as first parameter. The labels as well as the series order is reversed. The whole series data arrays are reversed too.
   * @param {Boolean} [multi] Create a multi dimensional array from a series data array where a value object with `x` and `y` values will be created.
   * @return {Array} A plain array that contains the data to be visualized in the chart
   */
Chartist.getDataArray=function(data,reverse,multi){function recursiveConvert(value){if(Chartist.safeHasProperty(value,"value")){return recursiveConvert(value.value)}else if(Chartist.safeHasProperty(value,"data")){return recursiveConvert(value.data)}else if(value instanceof Array){return value.map(recursiveConvert)}else if(Chartist.isDataHoleValue(value)){return undefined}else{if(multi){var multiValue={};
// Single series value arrays are assumed to specify the Y-Axis value
if(typeof multi==="string"){multiValue[multi]=Chartist.getNumberOrUndefined(value)}else{multiValue.y=Chartist.getNumberOrUndefined(value)}multiValue.x=value.hasOwnProperty("x")?Chartist.getNumberOrUndefined(value.x):multiValue.x;multiValue.y=value.hasOwnProperty("y")?Chartist.getNumberOrUndefined(value.y):multiValue.y;return multiValue}else{return Chartist.getNumberOrUndefined(value)}}}return data.series.map(recursiveConvert)};Chartist.normalizePadding=function(padding,fallback){fallback=fallback||0;return typeof padding==="number"?{top:padding,right:padding,bottom:padding,left:padding}:{top:typeof padding.top==="number"?padding.top:fallback,right:typeof padding.right==="number"?padding.right:fallback,bottom:typeof padding.bottom==="number"?padding.bottom:fallback,left:typeof padding.left==="number"?padding.left:fallback}};Chartist.getMetaData=function(series,index){var value=series.data?series.data[index]:series[index];return value?value.meta:undefined};Chartist.orderOfMagnitude=function(value){return Math.floor(Math.log(Math.abs(value))/Math.LN10)};/**
   * Project a data length into screen coordinates (pixels)
   *
   * @memberof Chartist.Core
   * @param {Object} axisLength The svg element for the chart
   * @param {Number} length Single data value from a series array
   * @param {Object} bounds All the values to set the bounds of the chart
   * @return {Number} The projected data length in pixels
   */
Chartist.projectLength=function(axisLength,length,bounds){return length/bounds.range*axisLength};Chartist.getAvailableHeight=function(svg,options){return Math.max((Chartist.quantity(options.height).value||svg.height())-(options.chartPadding.top+options.chartPadding.bottom)-options.axisX.offset,0)};/**
   * Get highest and lowest value of data array. This Array contains the data that will be visualized in the chart.
   *
   * @memberof Chartist.Core
   * @param {Array} data The array that contains the data to be visualized in the chart
   * @param {Object} options The Object that contains the chart options
   * @param {String} dimension Axis dimension 'x' or 'y' used to access the correct value and high / low configuration
   * @return {Object} An object that contains the highest and lowest value that will be visualized on the chart.
   */
Chartist.getHighLow=function(data,options,dimension){
// TODO: Remove workaround for deprecated global high / low config. Axis high / low configuration is preferred
options=Chartist.extend({},options,dimension?options["axis"+dimension.toUpperCase()]:{});var highLow={high:options.high===undefined?-Number.MAX_VALUE:+options.high,low:options.low===undefined?Number.MAX_VALUE:+options.low};var findHigh=options.high===undefined;var findLow=options.low===undefined;function recursiveHighLow(data){if(data===undefined){return undefined}else if(data instanceof Array){for(var i=0;i<data.length;i++){recursiveHighLow(data[i])}}else{var value=dimension?+data[dimension]:+data;if(findHigh&&value>highLow.high){highLow.high=value}if(findLow&&value<highLow.low){highLow.low=value}}}if(findHigh||findLow){recursiveHighLow(data)}if(options.referenceValue||options.referenceValue===0){highLow.high=Math.max(options.referenceValue,highLow.high);highLow.low=Math.min(options.referenceValue,highLow.low)}if(highLow.high<=highLow.low){if(highLow.low===0){highLow.high=1}else if(highLow.low<0){highLow.high=0}else if(highLow.high>0){highLow.low=0}else{
// If data array was empty, values are Number.MAX_VALUE and -Number.MAX_VALUE. Set bounds to prevent errors
highLow.high=1;highLow.low=0}}return highLow};Chartist.isNumeric=function(value){return value===null?false:isFinite(value)};Chartist.isFalseyButZero=function(value){return!value&&value!==0};Chartist.getNumberOrUndefined=function(value){return Chartist.isNumeric(value)?+value:undefined};Chartist.isMultiValue=function(value){return typeof value==="object"&&("x"in value||"y"in value)};Chartist.getMultiValue=function(value,dimension){if(Chartist.isMultiValue(value)){return Chartist.getNumberOrUndefined(value[dimension||"y"])}else{return Chartist.getNumberOrUndefined(value)}};/**
   * Pollard Rho Algorithm to find smallest factor of an integer value. There are more efficient algorithms for factorization, but this one is quite efficient and not so complex.
   *
   * @memberof Chartist.Core
   * @param {Number} num An integer number where the smallest factor should be searched for
   * @returns {Number} The smallest integer factor of the parameter num.
   */
Chartist.rho=function(num){if(num===1){return num}function gcd(p,q){if(p%q===0){return q}else{return gcd(q,p%q)}}function f(x){return x*x+1}var x1=2,x2=2,divisor;if(num%2===0){return 2}do{x1=f(x1)%num;x2=f(f(x2))%num;divisor=gcd(Math.abs(x1-x2),num)}while(divisor===1);return divisor};/**
   * Calculate and retrieve all the bounds for the chart and return them in one array
   *
   * @memberof Chartist.Core
   * @param {Number} axisLength The length of the Axis used for
   * @param {Object} highLow An object containing a high and low property indicating the value range of the chart.
   * @param {Number} scaleMinSpace The minimum projected length a step should result in
   * @param {Boolean} onlyInteger
   * @return {Object} All the values to set the bounds of the chart
   */
Chartist.getBounds=function(axisLength,highLow,scaleMinSpace,onlyInteger){var i,optimizationCounter=0,newMin,newMax,bounds={high:highLow.high,low:highLow.low};bounds.valueRange=bounds.high-bounds.low;bounds.oom=Chartist.orderOfMagnitude(bounds.valueRange);bounds.step=Math.pow(10,bounds.oom);bounds.min=Math.floor(bounds.low/bounds.step)*bounds.step;bounds.max=Math.ceil(bounds.high/bounds.step)*bounds.step;bounds.range=bounds.max-bounds.min;bounds.numberOfSteps=Math.round(bounds.range/bounds.step);var length=Chartist.projectLength(axisLength,bounds.step,bounds);var scaleUp=length<scaleMinSpace;var smallestFactor=onlyInteger?Chartist.rho(bounds.range):0;if(onlyInteger&&Chartist.projectLength(axisLength,1,bounds)>=scaleMinSpace){bounds.step=1}else if(onlyInteger&&smallestFactor<bounds.step&&Chartist.projectLength(axisLength,smallestFactor,bounds)>=scaleMinSpace){bounds.step=smallestFactor}else{while(true){if(scaleUp&&Chartist.projectLength(axisLength,bounds.step,bounds)<=scaleMinSpace){bounds.step*=2}else if(!scaleUp&&Chartist.projectLength(axisLength,bounds.step/2,bounds)>=scaleMinSpace){bounds.step/=2;if(onlyInteger&&bounds.step%1!==0){bounds.step*=2;break}}else{break}if(optimizationCounter++>1e3){throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}}var EPSILON=2.221e-16;bounds.step=Math.max(bounds.step,EPSILON);function safeIncrement(value,increment){if(value===(value+=increment)){value*=1+(increment>0?EPSILON:-EPSILON)}return value}newMin=bounds.min;newMax=bounds.max;while(newMin+bounds.step<=bounds.low){newMin=safeIncrement(newMin,bounds.step)}while(newMax-bounds.step>=bounds.high){newMax=safeIncrement(newMax,-bounds.step)}bounds.min=newMin;bounds.max=newMax;bounds.range=bounds.max-bounds.min;var values=[];for(i=bounds.min;i<=bounds.max;i=safeIncrement(i,bounds.step)){var value=Chartist.roundWithPrecision(i);if(value!==values[values.length-1]){values.push(value)}}bounds.values=values;return bounds};/**
   * Calculate cartesian coordinates of polar coordinates
   *
   * @memberof Chartist.Core
   * @param {Number} centerX X-axis coordinates of center point of circle segment
   * @param {Number} centerY X-axis coordinates of center point of circle segment
   * @param {Number} radius Radius of circle segment
   * @param {Number} angleInDegrees Angle of circle segment in degrees
   * @return {{x:Number, y:Number}} Coordinates of point on circumference
   */
Chartist.polarToCartesian=function(centerX,centerY,radius,angleInDegrees){var angleInRadians=(angleInDegrees-90)*Math.PI/180;return{x:centerX+radius*Math.cos(angleInRadians),y:centerY+radius*Math.sin(angleInRadians)}};Chartist.createChartRect=function(svg,options,fallbackPadding){var hasAxis=!!(options.axisX||options.axisY);var yAxisOffset=hasAxis?options.axisY.offset:0;var xAxisOffset=hasAxis?options.axisX.offset:0;var width=svg.width()||Chartist.quantity(options.width).value||0;var height=svg.height()||Chartist.quantity(options.height).value||0;var normalizedPadding=Chartist.normalizePadding(options.chartPadding,fallbackPadding);width=Math.max(width,yAxisOffset+normalizedPadding.left+normalizedPadding.right);height=Math.max(height,xAxisOffset+normalizedPadding.top+normalizedPadding.bottom);var chartRect={padding:normalizedPadding,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};if(hasAxis){if(options.axisX.position==="start"){chartRect.y2=normalizedPadding.top+xAxisOffset;chartRect.y1=Math.max(height-normalizedPadding.bottom,chartRect.y2+1)}else{chartRect.y2=normalizedPadding.top;chartRect.y1=Math.max(height-normalizedPadding.bottom-xAxisOffset,chartRect.y2+1)}if(options.axisY.position==="start"){chartRect.x1=normalizedPadding.left+yAxisOffset;chartRect.x2=Math.max(width-normalizedPadding.right,chartRect.x1+1)}else{chartRect.x1=normalizedPadding.left;chartRect.x2=Math.max(width-normalizedPadding.right-yAxisOffset,chartRect.x1+1)}}else{chartRect.x1=normalizedPadding.left;chartRect.x2=Math.max(width-normalizedPadding.right,chartRect.x1+1);chartRect.y2=normalizedPadding.top;chartRect.y1=Math.max(height-normalizedPadding.bottom,chartRect.y2+1)}return chartRect};Chartist.createGrid=function(position,index,axis,offset,length,group,classes,eventEmitter){var positionalData={};positionalData[axis.units.pos+"1"]=position;positionalData[axis.units.pos+"2"]=position;positionalData[axis.counterUnits.pos+"1"]=offset;positionalData[axis.counterUnits.pos+"2"]=offset+length;var gridElement=group.elem("line",positionalData,classes.join(" "));eventEmitter.emit("draw",Chartist.extend({type:"grid",axis:axis,index:index,group:group,element:gridElement},positionalData))};Chartist.createGridBackground=function(gridGroup,chartRect,className,eventEmitter){var gridBackground=gridGroup.elem("rect",{x:chartRect.x1,y:chartRect.y2,width:chartRect.width(),height:chartRect.height()},className,true);eventEmitter.emit("draw",{type:"gridBackground",group:gridGroup,element:gridBackground})};Chartist.createLabel=function(position,length,index,labels,axis,axisOffset,labelOffset,group,classes,useForeignObject,eventEmitter){var labelElement;var positionalData={};positionalData[axis.units.pos]=position+labelOffset[axis.units.pos];positionalData[axis.counterUnits.pos]=labelOffset[axis.counterUnits.pos];positionalData[axis.units.len]=length;positionalData[axis.counterUnits.len]=Math.max(0,axisOffset-10);if(useForeignObject){var content=document.createElement("span");content.className=classes.join(" ");content.setAttribute("xmlns",Chartist.namespaces.xhtml);content.innerText=labels[index];content.style[axis.units.len]=Math.round(positionalData[axis.units.len])+"px";content.style[axis.counterUnits.len]=Math.round(positionalData[axis.counterUnits.len])+"px";labelElement=group.foreignObject(content,Chartist.extend({style:"overflow: visible;"},positionalData))}else{labelElement=group.elem("text",positionalData,classes.join(" ")).text(labels[index])}eventEmitter.emit("draw",Chartist.extend({type:"label",axis:axis,index:index,group:group,element:labelElement,text:labels[index]},positionalData))};Chartist.getSeriesOption=function(series,options,key){if(series.name&&options.series&&options.series[series.name]){var seriesOptions=options.series[series.name];return seriesOptions.hasOwnProperty(key)?seriesOptions[key]:options[key]}else{return options[key]}};/**
   * Provides options handling functionality with callback for options changes triggered by responsive options and media query matches
   *
   * @memberof Chartist.Core
   * @param {Object} options Options set by user
   * @param {Array} responsiveOptions Optional functions to add responsive behavior to chart
   * @param {Object} eventEmitter The event emitter that will be used to emit the options changed events
   * @return {Object} The consolidated options object from the defaults, base and matching responsive options
   */
Chartist.optionsProvider=function(options,responsiveOptions,eventEmitter){var baseOptions=Chartist.extend({},options),currentOptions,mediaQueryListeners=[],i;function updateCurrentOptions(mediaEvent){var previousOptions=currentOptions;currentOptions=Chartist.extend({},baseOptions);if(responsiveOptions){for(i=0;i<responsiveOptions.length;i++){var mql=window.matchMedia(responsiveOptions[i][0]);if(mql.matches){currentOptions=Chartist.extend(currentOptions,responsiveOptions[i][1])}}}if(eventEmitter&&mediaEvent){eventEmitter.emit("optionsChanged",{previousOptions:previousOptions,currentOptions:currentOptions})}}function removeMediaQueryListeners(){mediaQueryListeners.forEach(function(mql){mql.removeListener(updateCurrentOptions)})}if(!window.matchMedia){throw"window.matchMedia not found! Make sure you're using a polyfill."}else if(responsiveOptions){for(i=0;i<responsiveOptions.length;i++){var mql=window.matchMedia(responsiveOptions[i][0]);mql.addListener(updateCurrentOptions);mediaQueryListeners.push(mql)}}updateCurrentOptions();return{removeMediaQueryListeners:removeMediaQueryListeners,getCurrentOptions:function getCurrentOptions(){return Chartist.extend({},currentOptions)}}};/**
   * Splits a list of coordinates and associated values into segments. Each returned segment contains a pathCoordinates
   * valueData property describing the segment.
   *
   * With the default options, segments consist of contiguous sets of points that do not have an undefined value. Any
   * points with undefined values are discarded.
   *
   * **Options**
   * The following options are used to determine how segments are formed
   * ```javascript
   * var options = {
   *   // If fillHoles is true, undefined values are simply discarded without creating a new segment. Assuming other options are default, this returns single segment.
   *   fillHoles: false,
   *   // If increasingX is true, the coordinates in all segments have strictly increasing x-values.
   *   increasingX: false
   * };
   * ```
   *
   * @memberof Chartist.Core
   * @param {Array} pathCoordinates List of point coordinates to be split in the form [x1, y1, x2, y2 ... xn, yn]
   * @param {Array} values List of associated point values in the form [v1, v2 .. vn]
   * @param {Object} options Options set by user
   * @return {Array} List of segments, each containing a pathCoordinates and valueData property.
   */
Chartist.splitIntoSegments=function(pathCoordinates,valueData,options){var defaultOptions={increasingX:false,fillHoles:false};options=Chartist.extend({},defaultOptions,options);var segments=[];var hole=true;for(var i=0;i<pathCoordinates.length;i+=2){if(Chartist.getMultiValue(valueData[i/2].value)===undefined){if(!options.fillHoles){hole=true}}else{if(options.increasingX&&i>=2&&pathCoordinates[i]<=pathCoordinates[i-2]){hole=true}if(hole){segments.push({pathCoordinates:[],valueData:[]});
// As we have a valid value now, we are not in a "hole" anymore
hole=false}
// Add to the segment pathCoordinates and valueData
segments[segments.length-1].pathCoordinates.push(pathCoordinates[i],pathCoordinates[i+1]);segments[segments.length-1].valueData.push(valueData[i/2])}}return segments}})(this,Chartist);(function(globalRoot,Chartist){"use strict";Chartist.Interpolation={};Chartist.Interpolation.none=function(options){var defaultOptions={fillHoles:false};options=Chartist.extend({},defaultOptions,options);return function none(pathCoordinates,valueData){var path=new Chartist.Svg.Path;var hole=true;for(var i=0;i<pathCoordinates.length;i+=2){var currX=pathCoordinates[i];var currY=pathCoordinates[i+1];var currData=valueData[i/2];if(Chartist.getMultiValue(currData.value)!==undefined){if(hole){path.move(currX,currY,false,currData)}else{path.line(currX,currY,false,currData)}hole=false}else if(!options.fillHoles){hole=true}}return path}};/**
   * Simple smoothing creates horizontal handles that are positioned with a fraction of the length between two data points. You can use the divisor option to specify the amount of smoothing.
   *
   * Simple smoothing can be used instead of `Chartist.Smoothing.cardinal` if you'd like to get rid of the artifacts it produces sometimes. Simple smoothing produces less flowing lines but is accurate by hitting the points and it also doesn't swing below or above the given data point.
   *
   * All smoothing functions within Chartist are factory functions that accept an options parameter. The simple interpolation function accepts one configuration parameter `divisor`, between 1 and ∞, which controls the smoothing characteristics.
   *
   * @example
   * var chart = new Chartist.Line('.ct-chart', {
   *   labels: [1, 2, 3, 4, 5],
   *   series: [[1, 2, 8, 1, 7]]
   * }, {
   *   lineSmooth: Chartist.Interpolation.simple({
   *     divisor: 2,
   *     fillHoles: false
   *   })
   * });
   *
   *
   * @memberof Chartist.Interpolation
   * @param {Object} options The options of the simple interpolation factory function.
   * @return {Function}
   */
Chartist.Interpolation.simple=function(options){var defaultOptions={divisor:2,fillHoles:false};options=Chartist.extend({},defaultOptions,options);var d=1/Math.max(1,options.divisor);return function simple(pathCoordinates,valueData){var path=new Chartist.Svg.Path;var prevX,prevY,prevData;for(var i=0;i<pathCoordinates.length;i+=2){var currX=pathCoordinates[i];var currY=pathCoordinates[i+1];var length=(currX-prevX)*d;var currData=valueData[i/2];if(currData.value!==undefined){if(prevData===undefined){path.move(currX,currY,false,currData)}else{path.curve(prevX+length,prevY,currX-length,currY,currX,currY,false,currData)}prevX=currX;prevY=currY;prevData=currData}else if(!options.fillHoles){prevX=currX=prevData=undefined}}return path}};/**
   * Cardinal / Catmull-Rome spline interpolation is the default smoothing function in Chartist. It produces nice results where the splines will always meet the points. It produces some artifacts though when data values are increased or decreased rapidly. The line may not follow a very accurate path and if the line should be accurate this smoothing function does not produce the best results.
   *
   * Cardinal splines can only be created if there are more than two data points. If this is not the case this smoothing will fallback to `Chartist.Smoothing.none`.
   *
   * All smoothing functions within Chartist are factory functions that accept an options parameter. The cardinal interpolation function accepts one configuration parameter `tension`, between 0 and 1, which controls the smoothing intensity.
   *
   * @example
   * var chart = new Chartist.Line('.ct-chart', {
   *   labels: [1, 2, 3, 4, 5],
   *   series: [[1, 2, 8, 1, 7]]
   * }, {
   *   lineSmooth: Chartist.Interpolation.cardinal({
   *     tension: 1,
   *     fillHoles: false
   *   })
   * });
   *
   * @memberof Chartist.Interpolation
   * @param {Object} options The options of the cardinal factory function.
   * @return {Function}
   */
Chartist.Interpolation.cardinal=function(options){var defaultOptions={tension:1,fillHoles:false};options=Chartist.extend({},defaultOptions,options);var t=Math.min(1,Math.max(0,options.tension)),c=1-t;return function cardinal(pathCoordinates,valueData){var segments=Chartist.splitIntoSegments(pathCoordinates,valueData,{fillHoles:options.fillHoles});if(!segments.length){return Chartist.Interpolation.none()([])}else if(segments.length>1){var paths=[];segments.forEach(function(segment){paths.push(cardinal(segment.pathCoordinates,segment.valueData))});return Chartist.Svg.Path.join(paths)}else{pathCoordinates=segments[0].pathCoordinates;valueData=segments[0].valueData;if(pathCoordinates.length<=4){return Chartist.Interpolation.none()(pathCoordinates,valueData)}var path=(new Chartist.Svg.Path).move(pathCoordinates[0],pathCoordinates[1],false,valueData[0]),z;for(var i=0,iLen=pathCoordinates.length;iLen-2*!z>i;i+=2){var p=[{x:+pathCoordinates[i-2],y:+pathCoordinates[i-1]},{x:+pathCoordinates[i],y:+pathCoordinates[i+1]},{x:+pathCoordinates[i+2],y:+pathCoordinates[i+3]},{x:+pathCoordinates[i+4],y:+pathCoordinates[i+5]}];if(z){if(!i){p[0]={x:+pathCoordinates[iLen-2],y:+pathCoordinates[iLen-1]}}else if(iLen-4===i){p[3]={x:+pathCoordinates[0],y:+pathCoordinates[1]}}else if(iLen-2===i){p[2]={x:+pathCoordinates[0],y:+pathCoordinates[1]};p[3]={x:+pathCoordinates[2],y:+pathCoordinates[3]}}}else{if(iLen-4===i){p[3]=p[2]}else if(!i){p[0]={x:+pathCoordinates[i],y:+pathCoordinates[i+1]}}}path.curve(t*(-p[0].x+6*p[1].x+p[2].x)/6+c*p[2].x,t*(-p[0].y+6*p[1].y+p[2].y)/6+c*p[2].y,t*(p[1].x+6*p[2].x-p[3].x)/6+c*p[2].x,t*(p[1].y+6*p[2].y-p[3].y)/6+c*p[2].y,p[2].x,p[2].y,false,valueData[(i+2)/2])}return path}}};/**
   * Monotone Cubic spline interpolation produces a smooth curve which preserves monotonicity. Unlike cardinal splines, the curve will not extend beyond the range of y-values of the original data points.
   *
   * Monotone Cubic splines can only be created if there are more than two data points. If this is not the case this smoothing will fallback to `Chartist.Smoothing.none`.
   *
   * The x-values of subsequent points must be increasing to fit a Monotone Cubic spline. If this condition is not met for a pair of adjacent points, then there will be a break in the curve between those data points.
   *
   * All smoothing functions within Chartist are factory functions that accept an options parameter.
   *
   * @example
   * var chart = new Chartist.Line('.ct-chart', {
   *   labels: [1, 2, 3, 4, 5],
   *   series: [[1, 2, 8, 1, 7]]
   * }, {
   *   lineSmooth: Chartist.Interpolation.monotoneCubic({
   *     fillHoles: false
   *   })
   * });
   *
   * @memberof Chartist.Interpolation
   * @param {Object} options The options of the monotoneCubic factory function.
   * @return {Function}
   */
Chartist.Interpolation.monotoneCubic=function(options){var defaultOptions={fillHoles:false};options=Chartist.extend({},defaultOptions,options);return function monotoneCubic(pathCoordinates,valueData){var segments=Chartist.splitIntoSegments(pathCoordinates,valueData,{fillHoles:options.fillHoles,increasingX:true});if(!segments.length){return Chartist.Interpolation.none()([])}else if(segments.length>1){var paths=[];segments.forEach(function(segment){paths.push(monotoneCubic(segment.pathCoordinates,segment.valueData))});return Chartist.Svg.Path.join(paths)}else{pathCoordinates=segments[0].pathCoordinates;valueData=segments[0].valueData;if(pathCoordinates.length<=4){return Chartist.Interpolation.none()(pathCoordinates,valueData)}var xs=[],ys=[],i,n=pathCoordinates.length/2,ms=[],ds=[],dys=[],dxs=[],path;for(i=0;i<n;i++){xs[i]=pathCoordinates[i*2];ys[i]=pathCoordinates[i*2+1]}for(i=0;i<n-1;i++){dys[i]=ys[i+1]-ys[i];dxs[i]=xs[i+1]-xs[i];ds[i]=dys[i]/dxs[i]}ms[0]=ds[0];ms[n-1]=ds[n-2];for(i=1;i<n-1;i++){if(ds[i]===0||ds[i-1]===0||ds[i-1]>0!==ds[i]>0){ms[i]=0}else{ms[i]=3*(dxs[i-1]+dxs[i])/((2*dxs[i]+dxs[i-1])/ds[i-1]+(dxs[i]+2*dxs[i-1])/ds[i]);if(!isFinite(ms[i])){ms[i]=0}}}path=(new Chartist.Svg.Path).move(xs[0],ys[0],false,valueData[0]);for(i=0;i<n-1;i++){path.curve(xs[i]+dxs[i]/3,ys[i]+ms[i]*dxs[i]/3,xs[i+1]-dxs[i]/3,ys[i+1]-ms[i+1]*dxs[i]/3,xs[i+1],ys[i+1],false,valueData[i+1])}return path}}};/**
   * Step interpolation will cause the line chart to move in steps rather than diagonal or smoothed lines. This interpolation will create additional points that will also be drawn when the `showPoint` option is enabled.
   *
   * All smoothing functions within Chartist are factory functions that accept an options parameter. The step interpolation function accepts one configuration parameter `postpone`, that can be `true` or `false`. The default value is `true` and will cause the step to occur where the value actually changes. If a different behaviour is needed where the step is shifted to the left and happens before the actual value, this option can be set to `false`.
   *
   * @example
   * var chart = new Chartist.Line('.ct-chart', {
   *   labels: [1, 2, 3, 4, 5],
   *   series: [[1, 2, 8, 1, 7]]
   * }, {
   *   lineSmooth: Chartist.Interpolation.step({
   *     postpone: true,
   *     fillHoles: false
   *   })
   * });
   *
   * @memberof Chartist.Interpolation
   * @param options
   * @returns {Function}
   */
Chartist.Interpolation.step=function(options){var defaultOptions={postpone:true,fillHoles:false};options=Chartist.extend({},defaultOptions,options);return function step(pathCoordinates,valueData){var path=new Chartist.Svg.Path;var prevX,prevY,prevData;for(var i=0;i<pathCoordinates.length;i+=2){var currX=pathCoordinates[i];var currY=pathCoordinates[i+1];var currData=valueData[i/2];if(currData.value!==undefined){if(prevData===undefined){path.move(currX,currY,false,currData)}else{if(options.postpone){path.line(currX,prevY,false,prevData)}else{path.line(prevX,currY,false,currData)}
// Line to the actual point (this should only be a Y-Axis movement
path.line(currX,currY,false,currData)}prevX=currX;prevY=currY;prevData=currData}else if(!options.fillHoles){prevX=prevY=prevData=undefined}}return path}}})(this,Chartist);/**
 * A very basic event module that helps to generate and catch events.
 *
 * @module Chartist.Event
 */
(function(globalRoot,Chartist){"use strict";Chartist.EventEmitter=function(){var handlers=[];/**
     * Add an event handler for a specific event
     *
     * @memberof Chartist.Event
     * @param {String} event The event name
     * @param {Function} handler A event handler function
     */
function addEventHandler(event,handler){handlers[event]=handlers[event]||[];handlers[event].push(handler)}/**
     * Remove an event handler of a specific event name or remove all event handlers for a specific event.
     *
     * @memberof Chartist.Event
     * @param {String} event The event name where a specific or all handlers should be removed
     * @param {Function} [handler] An optional event handler function. If specified only this specific handler will be removed and otherwise all handlers are removed.
     */
function removeEventHandler(event,handler){if(handlers[event]){if(handler){handlers[event].splice(handlers[event].indexOf(handler),1);if(handlers[event].length===0){delete handlers[event]}}else{delete handlers[event]}}}/**
     * Use this function to emit an event. All handlers that are listening for this event will be triggered with the data parameter.
     *
     * @memberof Chartist.Event
     * @param {String} event The event name that should be triggered
     * @param {*} data Arbitrary data that will be passed to the event handler callback functions
     */
function emit(event,data){if(handlers[event]){handlers[event].forEach(function(handler){handler(data)})}if(handlers["*"]){handlers["*"].forEach(function(starHandler){starHandler(event,data)})}}return{addEventHandler:addEventHandler,removeEventHandler:removeEventHandler,emit:emit}}})(this,Chartist);(function(globalRoot,Chartist){"use strict";function listToArray(list){var arr=[];if(list.length){for(var i=0;i<list.length;i++){arr.push(list[i])}}return arr}function extend(properties,superProtoOverride){var superProto=superProtoOverride||this.prototype||Chartist.Class;var proto=Object.create(superProto);Chartist.Class.cloneDefinitions(proto,properties);var constr=function(){var fn=proto.constructor||function(){},instance;instance=this===Chartist?Object.create(proto):this;fn.apply(instance,Array.prototype.slice.call(arguments,0));return instance};constr.prototype=proto;constr.super=superProto;constr.extend=this.extend;return constr}function cloneDefinitions(){var args=listToArray(arguments);var target=args[0];args.splice(1,args.length-1).forEach(function(source){Object.getOwnPropertyNames(source).forEach(function(propName){delete target[propName];Object.defineProperty(target,propName,Object.getOwnPropertyDescriptor(source,propName))})});return target}Chartist.Class={extend:extend,cloneDefinitions:cloneDefinitions}})(this,Chartist);(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;function update(data,options,override){if(data){this.data=data||{};this.data.labels=this.data.labels||[];this.data.series=this.data.series||[];this.eventEmitter.emit("data",{type:"update",data:this.data})}if(options){this.options=Chartist.extend({},override?this.options:this.defaultOptions,options);if(!this.initializeTimeoutId){this.optionsProvider.removeMediaQueryListeners();this.optionsProvider=Chartist.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter)}}if(!this.initializeTimeoutId){this.createChart(this.optionsProvider.getCurrentOptions())}return this}/**
   * This method can be called on the API object of each chart and will un-register all event listeners that were added to other components. This currently includes a window.resize listener as well as media query listeners if any responsive options have been provided. Use this function if you need to destroy and recreate Chartist charts dynamically.
   *
   * @memberof Chartist.Base
   */
function detach(){if(!this.initializeTimeoutId){window.removeEventListener("resize",this.resizeListener);this.optionsProvider.removeMediaQueryListeners()}else{window.clearTimeout(this.initializeTimeoutId)}return this}function on(event,handler){this.eventEmitter.addEventHandler(event,handler);return this}function off(event,handler){this.eventEmitter.removeEventHandler(event,handler);return this}function initialize(){
// Add window resize listener that re-creates the chart
window.addEventListener("resize",this.resizeListener);this.optionsProvider=Chartist.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter);this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this));if(this.options.plugins){this.options.plugins.forEach(function(plugin){if(plugin instanceof Array){plugin[0](this,plugin[1])}else{plugin(this)}}.bind(this))}this.eventEmitter.emit("data",{type:"initial",data:this.data});this.createChart(this.optionsProvider.getCurrentOptions());
// As chart is initialized from the event loop now we can reset our timeout reference
this.initializeTimeoutId=undefined}function Base(query,data,defaultOptions,options,responsiveOptions){this.container=Chartist.querySelector(query);this.data=data||{};this.data.labels=this.data.labels||[];this.data.series=this.data.series||[];this.defaultOptions=defaultOptions;this.options=options;this.responsiveOptions=responsiveOptions;this.eventEmitter=Chartist.EventEmitter();this.supportsForeignObject=Chartist.Svg.isSupported("Extensibility");this.supportsAnimations=Chartist.Svg.isSupported("AnimationEventsAttribute");this.resizeListener=function resizeListener(){this.update()}.bind(this);if(this.container){if(this.container.__chartist__){this.container.__chartist__.detach()}this.container.__chartist__=this}this.initializeTimeoutId=setTimeout(initialize.bind(this),0)}Chartist.Base=Chartist.Class.extend({constructor:Base,optionsProvider:undefined,container:undefined,svg:undefined,eventEmitter:undefined,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:update,detach:detach,on:on,off:off,version:Chartist.version,supportsForeignObject:false})})(this,Chartist);(function(globalRoot,Chartist){"use strict";var document=globalRoot.document;/**
   * Chartist.Svg creates a new SVG object wrapper with a starting element. You can use the wrapper to fluently create sub-elements and modify them.
   *
   * @memberof Chartist.Svg
   * @constructor
   * @param {String|Element} name The name of the SVG element to create or an SVG dom element which should be wrapped into Chartist.Svg
   * @param {Object} attributes An object with properties that will be added as attributes to the SVG element that is created. Attributes with undefined values will not be added.
   * @param {String} className This class or class list will be added to the SVG element
   * @param {Object} parent The parent SVG wrapper object where this newly created wrapper and it's element will be attached to as child
   * @param {Boolean} insertFirst If this param is set to true in conjunction with a parent element the newly created element will be added as first child element in the parent element
   */
function Svg(name,attributes,className,parent,insertFirst){if(name instanceof Element){this._node=name}else{this._node=document.createElementNS(Chartist.namespaces.svg,name);if(name==="svg"){this.attr({"xmlns:ct":Chartist.namespaces.ct})}}if(attributes){this.attr(attributes)}if(className){this.addClass(className)}if(parent){if(insertFirst&&parent._node.firstChild){parent._node.insertBefore(this._node,parent._node.firstChild)}else{parent._node.appendChild(this._node)}}}/**
   * Set attributes on the current SVG element of the wrapper you're currently working on.
   *
   * @memberof Chartist.Svg
   * @param {Object|String} attributes An object with properties that will be added as attributes to the SVG element that is created. Attributes with undefined values will not be added. If this parameter is a String then the function is used as a getter and will return the attribute value.
   * @param {String} [ns] If specified, the attribute will be obtained using getAttributeNs. In order to write namepsaced attributes you can use the namespace:attribute notation within the attributes object.
   * @return {Object|String} The current wrapper object will be returned so it can be used for chaining or the attribute value if used as getter function.
   */
function attr(attributes,ns){if(typeof attributes==="string"){if(ns){return this._node.getAttributeNS(ns,attributes)}else{return this._node.getAttribute(attributes)}}Object.keys(attributes).forEach(function(key){if(attributes[key]===undefined){return}if(key.indexOf(":")!==-1){var namespacedAttribute=key.split(":");this._node.setAttributeNS(Chartist.namespaces[namespacedAttribute[0]],key,attributes[key])}else{this._node.setAttribute(key,attributes[key])}}.bind(this));return this}/**
   * Create a new SVG element whose wrapper object will be selected for further operations. This way you can also create nested groups easily.
   *
   * @memberof Chartist.Svg
   * @param {String} name The name of the SVG element that should be created as child element of the currently selected element wrapper
   * @param {Object} [attributes] An object with properties that will be added as attributes to the SVG element that is created. Attributes with undefined values will not be added.
   * @param {String} [className] This class or class list will be added to the SVG element
   * @param {Boolean} [insertFirst] If this param is set to true in conjunction with a parent element the newly created element will be added as first child element in the parent element
   * @return {Chartist.Svg} Returns a Chartist.Svg wrapper object that can be used to modify the containing SVG data
   */
function elem(name,attributes,className,insertFirst){return new Chartist.Svg(name,attributes,className,this,insertFirst)}function parent(){return this._node.parentNode instanceof SVGElement?new Chartist.Svg(this._node.parentNode):null}function root(){var node=this._node;while(node.nodeName!=="svg"){node=node.parentNode}return new Chartist.Svg(node)}/**
   * Find the first child SVG element of the current element that matches a CSS selector. The returned object is a Chartist.Svg wrapper.
   *
   * @memberof Chartist.Svg
   * @param {String} selector A CSS selector that is used to query for child SVG elements
   * @return {Chartist.Svg} The SVG wrapper for the element found or null if no element was found
   */
function querySelector(selector){var foundNode=this._node.querySelector(selector);return foundNode?new Chartist.Svg(foundNode):null}/**
   * Find the all child SVG elements of the current element that match a CSS selector. The returned object is a Chartist.Svg.List wrapper.
   *
   * @memberof Chartist.Svg
   * @param {String} selector A CSS selector that is used to query for child SVG elements
   * @return {Chartist.Svg.List} The SVG wrapper list for the element found or null if no element was found
   */
function querySelectorAll(selector){var foundNodes=this._node.querySelectorAll(selector);return foundNodes.length?new Chartist.Svg.List(foundNodes):null}function getNode(){return this._node}/**
   * This method creates a foreignObject (see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/foreignObject) that allows to embed HTML content into a SVG graphic. With the help of foreignObjects you can enable the usage of regular HTML elements inside of SVG where they are subject for SVG positioning and transformation but the Browser will use the HTML rendering capabilities for the containing DOM.
   *
   * @memberof Chartist.Svg
   * @param {Node|String} content The DOM Node, or HTML string that will be converted to a DOM Node, that is then placed into and wrapped by the foreignObject
   * @param {String} [attributes] An object with properties that will be added as attributes to the foreignObject element that is created. Attributes with undefined values will not be added.
   * @param {String} [className] This class or class list will be added to the SVG element
   * @param {Boolean} [insertFirst] Specifies if the foreignObject should be inserted as first child
   * @return {Chartist.Svg} New wrapper object that wraps the foreignObject element
   */
function foreignObject(content,attributes,className,insertFirst){if(typeof content==="string"){var container=document.createElement("div");container.innerHTML=content;content=container.firstChild}
// Adding namespace to content element
content.setAttribute("xmlns",Chartist.namespaces.xmlns);var fnObj=this.elem("foreignObject",attributes,className,insertFirst);
// Add content to foreignObjectElement
fnObj._node.appendChild(content);return fnObj}function text(t){this._node.appendChild(document.createTextNode(t));return this}function empty(){while(this._node.firstChild){this._node.removeChild(this._node.firstChild)}return this}function remove(){this._node.parentNode.removeChild(this._node);return this.parent()}function replace(newElement){this._node.parentNode.replaceChild(newElement._node,this._node);return newElement}function append(element,insertFirst){if(insertFirst&&this._node.firstChild){this._node.insertBefore(element._node,this._node.firstChild)}else{this._node.appendChild(element._node)}return this}/**
   * Returns an array of class names that are attached to the current wrapper element. This method can not be chained further.
   *
   * @memberof Chartist.Svg
   * @return {Array} A list of classes or an empty array if there are no classes on the current element
   */
function classes(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}/**
   * Adds one or a space separated list of classes to the current element and ensures the classes are only existing once.
   *
   * @memberof Chartist.Svg
   * @param {String} names A white space separated list of class names
   * @return {Chartist.Svg} The wrapper of the current element
   */
function addClass(names){this._node.setAttribute("class",this.classes(this._node).concat(names.trim().split(/\s+/)).filter(function(elem,pos,self){return self.indexOf(elem)===pos}).join(" "));return this}/**
   * Removes one or a space separated list of classes from the current element.
   *
   * @memberof Chartist.Svg
   * @param {String} names A white space separated list of class names
   * @return {Chartist.Svg} The wrapper of the current element
   */
function removeClass(names){var removedClasses=names.trim().split(/\s+/);this._node.setAttribute("class",this.classes(this._node).filter(function(name){return removedClasses.indexOf(name)===-1}).join(" "));return this}function removeAllClasses(){this._node.setAttribute("class","");return this}function height(){return this._node.getBoundingClientRect().height}function width(){return this._node.getBoundingClientRect().width}/**
   * The animate function lets you animate the current element with SMIL animations. You can add animations for multiple attributes at the same time by using an animation definition object. This object should contain SMIL animation attributes. Please refer to http://www.w3.org/TR/SVG/animate.html for a detailed specification about the available animation attributes. Additionally an easing property can be passed in the animation definition object. This can be a string with a name of an easing function in `Chartist.Svg.Easing` or an array with four numbers specifying a cubic Bézier curve.
   * **An animations object could look like this:**
   * ```javascript
   * element.animate({
   *   opacity: {
   *     dur: 1000,
   *     from: 0,
   *     to: 1
   *   },
   *   x1: {
   *     dur: '1000ms',
   *     from: 100,
   *     to: 200,
   *     easing: 'easeOutQuart'
   *   },
   *   y1: {
   *     dur: '2s',
   *     from: 0,
   *     to: 100
   *   }
   * });
   * ```
   * **Automatic unit conversion**
   * For the `dur` and the `begin` animate attribute you can also omit a unit by passing a number. The number will automatically be converted to milli seconds.
   * **Guided mode**
   * The default behavior of SMIL animations with offset using the `begin` attribute is that the attribute will keep it's original value until the animation starts. Mostly this behavior is not desired as you'd like to have your element attributes already initialized with the animation `from` value even before the animation starts. Also if you don't specify `fill="freeze"` on an animate element or if you delete the animation after it's done (which is done in guided mode) the attribute will switch back to the initial value. This behavior is also not desired when performing simple one-time animations. For one-time animations you'd want to trigger animations immediately instead of relative to the document begin time. That's why in guided mode Chartist.Svg will also use the `begin` property to schedule a timeout and manually start the animation after the timeout. If you're using multiple SMIL definition objects for an attribute (in an array), guided mode will be disabled for this attribute, even if you explicitly enabled it.
   * If guided mode is enabled the following behavior is added:
   * - Before the animation starts (even when delayed with `begin`) the animated attribute will be set already to the `from` value of the animation
   * - `begin` is explicitly set to `indefinite` so it can be started manually without relying on document begin time (creation)
   * - The animate element will be forced to use `fill="freeze"`
   * - The animation will be triggered with `beginElement()` in a timeout where `begin` of the definition object is interpreted in milli seconds. If no `begin` was specified the timeout is triggered immediately.
   * - After the animation the element attribute value will be set to the `to` value of the animation
   * - The animate element is deleted from the DOM
   *
   * @memberof Chartist.Svg
   * @param {Object} animations An animations object where the property keys are the attributes you'd like to animate. The properties should be objects again that contain the SMIL animation attributes (usually begin, dur, from, and to). The property begin and dur is auto converted (see Automatic unit conversion). You can also schedule multiple animations for the same attribute by passing an Array of SMIL definition objects. Attributes that contain an array of SMIL definition objects will not be executed in guided mode.
   * @param {Boolean} guided Specify if guided mode should be activated for this animation (see Guided mode). If not otherwise specified, guided mode will be activated.
   * @param {Object} eventEmitter If specified, this event emitter will be notified when an animation starts or ends.
   * @return {Chartist.Svg} The current element where the animation was added
   */
function animate(animations,guided,eventEmitter){if(guided===undefined){guided=true}Object.keys(animations).forEach(function createAnimateForAttributes(attribute){function createAnimate(animationDefinition,guided){var attributeProperties={},animate,timeout,easing;if(animationDefinition.easing){easing=animationDefinition.easing instanceof Array?animationDefinition.easing:Chartist.Svg.Easing[animationDefinition.easing];delete animationDefinition.easing}animationDefinition.begin=Chartist.ensureUnit(animationDefinition.begin,"ms");animationDefinition.dur=Chartist.ensureUnit(animationDefinition.dur,"ms");if(easing){animationDefinition.calcMode="spline";animationDefinition.keySplines=easing.join(" ");animationDefinition.keyTimes="0;1"}
// Adding "fill: freeze" if we are in guided mode and set initial attribute values
if(guided){animationDefinition.fill="freeze";
// Animated property on our element should already be set to the animation from value in guided mode
attributeProperties[attribute]=animationDefinition.from;this.attr(attributeProperties);timeout=Chartist.quantity(animationDefinition.begin||0).value;animationDefinition.begin="indefinite"}animate=this.elem("animate",Chartist.extend({attributeName:attribute},animationDefinition));if(guided){setTimeout(function(){try{animate._node.beginElement()}catch(err){attributeProperties[attribute]=animationDefinition.to;this.attr(attributeProperties);animate.remove()}}.bind(this),timeout)}if(eventEmitter){animate._node.addEventListener("beginEvent",function handleBeginEvent(){eventEmitter.emit("animationBegin",{element:this,animate:animate._node,params:animationDefinition})}.bind(this))}animate._node.addEventListener("endEvent",function handleEndEvent(){if(eventEmitter){eventEmitter.emit("animationEnd",{element:this,animate:animate._node,params:animationDefinition})}if(guided){attributeProperties[attribute]=animationDefinition.to;this.attr(attributeProperties);animate.remove()}}.bind(this))}if(animations[attribute]instanceof Array){animations[attribute].forEach(function(animationDefinition){createAnimate.bind(this)(animationDefinition,false)}.bind(this))}else{createAnimate.bind(this)(animations[attribute],guided)}}.bind(this));return this}Chartist.Svg=Chartist.Class.extend({constructor:Svg,attr:attr,elem:elem,parent:parent,root:root,querySelector:querySelector,querySelectorAll:querySelectorAll,getNode:getNode,foreignObject:foreignObject,text:text,empty:empty,remove:remove,replace:replace,append:append,classes:classes,addClass:addClass,removeClass:removeClass,removeAllClasses:removeAllClasses,height:height,width:width,animate:animate});Chartist.Svg.isSupported=function(feature){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+feature,"1.1")};var easingCubicBeziers={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};Chartist.Svg.Easing=easingCubicBeziers;/**
   * This helper class is to wrap multiple `Chartist.Svg` elements into a list where you can call the `Chartist.Svg` functions on all elements in the list with one call. This is helpful when you'd like to perform calls with `Chartist.Svg` on multiple elements.
   * An instance of this class is also returned by `Chartist.Svg.querySelectorAll`.
   *
   * @memberof Chartist.Svg
   * @param {Array<Node>|NodeList} nodeList An Array of SVG DOM nodes or a SVG DOM NodeList (as returned by document.querySelectorAll)
   * @constructor
   */
function SvgList(nodeList){var list=this;this.svgElements=[];for(var i=0;i<nodeList.length;i++){this.svgElements.push(new Chartist.Svg(nodeList[i]))}
// Add delegation methods for Chartist.Svg
Object.keys(Chartist.Svg.prototype).filter(function(prototypeProperty){return["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(prototypeProperty)===-1}).forEach(function(prototypeProperty){list[prototypeProperty]=function(){var args=Array.prototype.slice.call(arguments,0);list.svgElements.forEach(function(element){Chartist.Svg.prototype[prototypeProperty].apply(element,args)});return list}})}Chartist.Svg.List=Chartist.Class.extend({constructor:SvgList})})(this,Chartist);(function(globalRoot,Chartist){"use strict";var elementDescriptions={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]};var defaultOptions={accuracy:3};function element(command,params,pathElements,pos,relative,data){var pathElement=Chartist.extend({command:relative?command.toLowerCase():command.toUpperCase()},params,data?{data:data}:{});pathElements.splice(pos,0,pathElement)}function forEachParam(pathElements,cb){pathElements.forEach(function(pathElement,pathElementIndex){elementDescriptions[pathElement.command.toLowerCase()].forEach(function(paramName,paramIndex){cb(pathElement,paramName,pathElementIndex,paramIndex,pathElements)})})}function SvgPath(close,options){this.pathElements=[];this.pos=0;this.close=close;this.options=Chartist.extend({},defaultOptions,options)}/**
   * Gets or sets the current position (cursor) inside of the path. You can move around the cursor freely but limited to 0 or the count of existing elements. All modifications with element functions will insert new elements at the position of this cursor.
   *
   * @memberof Chartist.Svg.Path
   * @param {Number} [pos] If a number is passed then the cursor is set to this position in the path element array.
   * @return {Chartist.Svg.Path|Number} If the position parameter was passed then the return value will be the path object for easy call chaining. If no position parameter was passed then the current position is returned.
   */
function position(pos){if(pos!==undefined){this.pos=Math.max(0,Math.min(this.pathElements.length,pos));return this}else{return this.pos}}function remove(count){this.pathElements.splice(this.pos,count);return this}/**
   * Use this function to add a new move SVG path element.
   *
   * @memberof Chartist.Svg.Path
   * @param {Number} x The x coordinate for the move element.
   * @param {Number} y The y coordinate for the move element.
   * @param {Boolean} [relative] If set to true the move element will be created with relative coordinates (lowercase letter)
   * @param {*} [data] Any data that should be stored with the element object that will be accessible in pathElement
   * @return {Chartist.Svg.Path} The current path object for easy call chaining.
   */
function move(x,y,relative,data){element("M",{x:+x,y:+y},this.pathElements,this.pos++,relative,data);return this}/**
   * Use this function to add a new line SVG path element.
   *
   * @memberof Chartist.Svg.Path
   * @param {Number} x The x coordinate for the line element.
   * @param {Number} y The y coordinate for the line element.
   * @param {Boolean} [relative] If set to true the line element will be created with relative coordinates (lowercase letter)
   * @param {*} [data] Any data that should be stored with the element object that will be accessible in pathElement
   * @return {Chartist.Svg.Path} The current path object for easy call chaining.
   */
function line(x,y,relative,data){element("L",{x:+x,y:+y},this.pathElements,this.pos++,relative,data);return this}/**
   * Use this function to add a new curve SVG path element.
   *
   * @memberof Chartist.Svg.Path
   * @param {Number} x1 The x coordinate for the first control point of the bezier curve.
   * @param {Number} y1 The y coordinate for the first control point of the bezier curve.
   * @param {Number} x2 The x coordinate for the second control point of the bezier curve.
   * @param {Number} y2 The y coordinate for the second control point of the bezier curve.
   * @param {Number} x The x coordinate for the target point of the curve element.
   * @param {Number} y The y coordinate for the target point of the curve element.
   * @param {Boolean} [relative] If set to true the curve element will be created with relative coordinates (lowercase letter)
   * @param {*} [data] Any data that should be stored with the element object that will be accessible in pathElement
   * @return {Chartist.Svg.Path} The current path object for easy call chaining.
   */
function curve(x1,y1,x2,y2,x,y,relative,data){element("C",{x1:+x1,y1:+y1,x2:+x2,y2:+y2,x:+x,y:+y},this.pathElements,this.pos++,relative,data);return this}/**
   * Use this function to add a new non-bezier curve SVG path element.
   *
   * @memberof Chartist.Svg.Path
   * @param {Number} rx The radius to be used for the x-axis of the arc.
   * @param {Number} ry The radius to be used for the y-axis of the arc.
   * @param {Number} xAr Defines the orientation of the arc
   * @param {Number} lAf Large arc flag
   * @param {Number} sf Sweep flag
   * @param {Number} x The x coordinate for the target point of the curve element.
   * @param {Number} y The y coordinate for the target point of the curve element.
   * @param {Boolean} [relative] If set to true the curve element will be created with relative coordinates (lowercase letter)
   * @param {*} [data] Any data that should be stored with the element object that will be accessible in pathElement
   * @return {Chartist.Svg.Path} The current path object for easy call chaining.
   */
function arc(rx,ry,xAr,lAf,sf,x,y,relative,data){element("A",{rx:+rx,ry:+ry,xAr:+xAr,lAf:+lAf,sf:+sf,x:+x,y:+y},this.pathElements,this.pos++,relative,data);return this}/**
   * Parses an SVG path seen in the d attribute of path elements, and inserts the parsed elements into the existing path object at the current cursor position. Any closing path indicators (Z at the end of the path) will be ignored by the parser as this is provided by the close option in the options of the path object.
   *
   * @memberof Chartist.Svg.Path
   * @param {String} path Any SVG path that contains move (m), line (l) or curve (c) components.
   * @return {Chartist.Svg.Path} The current path object for easy call chaining.
   */
function parse(path){var chunks=path.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(result,element){if(element.match(/[A-Za-z]/)){result.push([])}result[result.length-1].push(element);return result},[]);if(chunks[chunks.length-1][0].toUpperCase()==="Z"){chunks.pop()}var elements=chunks.map(function(chunk){var command=chunk.shift(),description=elementDescriptions[command.toLowerCase()];return Chartist.extend({command:command},description.reduce(function(result,paramName,index){result[paramName]=+chunk[index];return result},{}))});var spliceArgs=[this.pos,0];Array.prototype.push.apply(spliceArgs,elements);Array.prototype.splice.apply(this.pathElements,spliceArgs);this.pos+=elements.length;return this}function stringify(){var accuracyMultiplier=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(path,pathElement){var params=elementDescriptions[pathElement.command.toLowerCase()].map(function(paramName){return this.options.accuracy?Math.round(pathElement[paramName]*accuracyMultiplier)/accuracyMultiplier:pathElement[paramName]}.bind(this));return path+pathElement.command+params.join(",")}.bind(this),"")+(this.close?"Z":"")}function scale(x,y){forEachParam(this.pathElements,function(pathElement,paramName){pathElement[paramName]*=paramName[0]==="x"?x:y});return this}function translate(x,y){forEachParam(this.pathElements,function(pathElement,paramName){pathElement[paramName]+=paramName[0]==="x"?x:y});return this}function transform(transformFnc){forEachParam(this.pathElements,function(pathElement,paramName,pathElementIndex,paramIndex,pathElements){var transformed=transformFnc(pathElement,paramName,pathElementIndex,paramIndex,pathElements);if(transformed||transformed===0){pathElement[paramName]=transformed}});return this}function clone(close){var c=new Chartist.Svg.Path(close||this.close);c.pos=this.pos;c.pathElements=this.pathElements.slice().map(function cloneElements(pathElement){return Chartist.extend({},pathElement)});c.options=Chartist.extend({},this.options);return c}/**
   * Split a Svg.Path object by a specific command in the path chain. The path chain will be split and an array of newly created paths objects will be returned. This is useful if you'd like to split an SVG path by it's move commands, for example, in order to isolate chunks of drawings.
   *
   * @memberof Chartist.Svg.Path
   * @param {String} command The command you'd like to use to split the path
   * @return {Array<Chartist.Svg.Path>}
   */
function splitByCommand(command){var split=[new Chartist.Svg.Path];this.pathElements.forEach(function(pathElement){if(pathElement.command===command.toUpperCase()&&split[split.length-1].pathElements.length!==0){split.push(new Chartist.Svg.Path)}split[split.length-1].pathElements.push(pathElement)});return split}/**
   * This static function on `Chartist.Svg.Path` is joining multiple paths together into one paths.
   *
   * @memberof Chartist.Svg.Path
   * @param {Array<Chartist.Svg.Path>} paths A list of paths to be joined together. The order is important.
   * @param {boolean} close If the newly created path should be a closed path
   * @param {Object} options Path options for the newly created path.
   * @return {Chartist.Svg.Path}
   */
function join(paths,close,options){var joinedPath=new Chartist.Svg.Path(close,options);for(var i=0;i<paths.length;i++){var path=paths[i];for(var j=0;j<path.pathElements.length;j++){joinedPath.pathElements.push(path.pathElements[j])}}return joinedPath}Chartist.Svg.Path=Chartist.Class.extend({constructor:SvgPath,position:position,remove:remove,move:move,line:line,curve:curve,arc:arc,scale:scale,translate:translate,transform:transform,parse:parse,stringify:stringify,clone:clone,splitByCommand:splitByCommand});Chartist.Svg.Path.elementDescriptions=elementDescriptions;Chartist.Svg.Path.join=join})(this,Chartist);(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;var axisUnits={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};function Axis(units,chartRect,ticks,options){this.units=units;this.counterUnits=units===axisUnits.x?axisUnits.y:axisUnits.x;this.chartRect=chartRect;this.axisLength=chartRect[units.rectEnd]-chartRect[units.rectStart];this.gridOffset=chartRect[units.rectOffset];this.ticks=ticks;this.options=options}function createGridAndLabels(gridGroup,labelGroup,useForeignObject,chartOptions,eventEmitter){var axisOptions=chartOptions["axis"+this.units.pos.toUpperCase()];var projectedValues=this.ticks.map(this.projectValue.bind(this));var labelValues=this.ticks.map(axisOptions.labelInterpolationFnc);projectedValues.forEach(function(projectedValue,index){var labelOffset={x:0,y:0};var labelLength;if(projectedValues[index+1]){labelLength=projectedValues[index+1]-projectedValue}else{labelLength=Math.max(this.axisLength-projectedValue,30)}if(Chartist.isFalseyButZero(labelValues[index])&&labelValues[index]!==""){return}if(this.units.pos==="x"){projectedValue=this.chartRect.x1+projectedValue;labelOffset.x=chartOptions.axisX.labelOffset.x;if(chartOptions.axisX.position==="start"){labelOffset.y=this.chartRect.padding.top+chartOptions.axisX.labelOffset.y+(useForeignObject?5:20)}else{labelOffset.y=this.chartRect.y1+chartOptions.axisX.labelOffset.y+(useForeignObject?5:20)}}else{projectedValue=this.chartRect.y1-projectedValue;labelOffset.y=chartOptions.axisY.labelOffset.y-(useForeignObject?labelLength:0);if(chartOptions.axisY.position==="start"){labelOffset.x=useForeignObject?this.chartRect.padding.left+chartOptions.axisY.labelOffset.x:this.chartRect.x1-10}else{labelOffset.x=this.chartRect.x2+chartOptions.axisY.labelOffset.x+10}}if(axisOptions.showGrid){Chartist.createGrid(projectedValue,index,this,this.gridOffset,this.chartRect[this.counterUnits.len](),gridGroup,[chartOptions.classNames.grid,chartOptions.classNames[this.units.dir]],eventEmitter)}if(axisOptions.showLabel){Chartist.createLabel(projectedValue,labelLength,index,labelValues,this,axisOptions.offset,labelOffset,labelGroup,[chartOptions.classNames.label,chartOptions.classNames[this.units.dir],axisOptions.position==="start"?chartOptions.classNames[axisOptions.position]:chartOptions.classNames["end"]],useForeignObject,eventEmitter)}}.bind(this))}Chartist.Axis=Chartist.Class.extend({constructor:Axis,createGridAndLabels:createGridAndLabels,projectValue:function(value,index,data){throw new Error("Base axis can't be instantiated!")}});Chartist.Axis.units=axisUnits})(this,Chartist);/**
 * The auto scale axis uses standard linear scale projection of values along an axis. It uses order of magnitude to find a scale automatically and evaluates the available space in order to find the perfect amount of ticks for your chart.
 * **Options**
 * The following options are used by this axis in addition to the default axis options outlined in the axis configuration of the chart default settings.
 * ```javascript
 * var options = {
 *   // If high is specified then the axis will display values explicitly up to this value and the computed maximum from the data is ignored
 *   high: 100,
 *   // If low is specified then the axis will display values explicitly down to this value and the computed minimum from the data is ignored
 *   low: 0,
 *   // This option will be used when finding the right scale division settings. The amount of ticks on the scale will be determined so that as many ticks as possible will be displayed, while not violating this minimum required space (in pixel).
 *   scaleMinSpace: 20,
 *   // Can be set to true or false. If set to true, the scale will be generated with whole numbers only.
 *   onlyInteger: true,
 *   // The reference value can be used to make sure that this value will always be on the chart. This is especially useful on bipolar charts where the bipolar center always needs to be part of the chart.
 *   referenceValue: 5
 * };
 * ```
 *
 * @module Chartist.AutoScaleAxis
 */
(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;function AutoScaleAxis(axisUnit,data,chartRect,options){var highLow=options.highLow||Chartist.getHighLow(data,options,axisUnit.pos);this.bounds=Chartist.getBounds(chartRect[axisUnit.rectEnd]-chartRect[axisUnit.rectStart],highLow,options.scaleMinSpace||20,options.onlyInteger);this.range={min:this.bounds.min,max:this.bounds.max};Chartist.AutoScaleAxis.super.constructor.call(this,axisUnit,chartRect,this.bounds.values,options)}function projectValue(value){return this.axisLength*(+Chartist.getMultiValue(value,this.units.pos)-this.bounds.min)/this.bounds.range}Chartist.AutoScaleAxis=Chartist.Axis.extend({constructor:AutoScaleAxis,projectValue:projectValue})})(this,Chartist);/**
 * The fixed scale axis uses standard linear projection of values along an axis. It makes use of a divisor option to divide the range provided from the minimum and maximum value or the options high and low that will override the computed minimum and maximum.
 * **Options**
 * The following options are used by this axis in addition to the default axis options outlined in the axis configuration of the chart default settings.
 * ```javascript
 * var options = {
 *   // If high is specified then the axis will display values explicitly up to this value and the computed maximum from the data is ignored
 *   high: 100,
 *   // If low is specified then the axis will display values explicitly down to this value and the computed minimum from the data is ignored
 *   low: 0,
 *   // If specified then the value range determined from minimum to maximum (or low and high) will be divided by this number and ticks will be generated at those division points. The default divisor is 1.
 *   divisor: 4,
 *   // If ticks is explicitly set, then the axis will not compute the ticks with the divisor, but directly use the data in ticks to determine at what points on the axis a tick need to be generated.
 *   ticks: [1, 10, 20, 30]
 * };
 * ```
 *
 * @module Chartist.FixedScaleAxis
 */
(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;function FixedScaleAxis(axisUnit,data,chartRect,options){var highLow=options.highLow||Chartist.getHighLow(data,options,axisUnit.pos);this.divisor=options.divisor||1;this.ticks=options.ticks||Chartist.times(this.divisor).map(function(value,index){return highLow.low+(highLow.high-highLow.low)/this.divisor*index}.bind(this));this.ticks.sort(function(a,b){return a-b});this.range={min:highLow.low,max:highLow.high};Chartist.FixedScaleAxis.super.constructor.call(this,axisUnit,chartRect,this.ticks,options);this.stepLength=this.axisLength/this.divisor}function projectValue(value){return this.axisLength*(+Chartist.getMultiValue(value,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}Chartist.FixedScaleAxis=Chartist.Axis.extend({constructor:FixedScaleAxis,projectValue:projectValue})})(this,Chartist);/**
 * The step axis for step based charts like bar chart or step based line charts. It uses a fixed amount of ticks that will be equally distributed across the whole axis length. The projection is done using the index of the data value rather than the value itself and therefore it's only useful for distribution purpose.
 * **Options**
 * The following options are used by this axis in addition to the default axis options outlined in the axis configuration of the chart default settings.
 * ```javascript
 * var options = {
 *   // Ticks to be used to distribute across the axis length. As this axis type relies on the index of the value rather than the value, arbitrary data that can be converted to a string can be used as ticks.
 *   ticks: ['One', 'Two', 'Three'],
 *   // If set to true the full width will be used to distribute the values where the last value will be at the maximum of the axis length. If false the spaces between the ticks will be evenly distributed instead.
 *   stretch: true
 * };
 * ```
 *
 * @module Chartist.StepAxis
 */
(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;function StepAxis(axisUnit,data,chartRect,options){Chartist.StepAxis.super.constructor.call(this,axisUnit,chartRect,options.ticks,options);var calc=Math.max(1,options.ticks.length-(options.stretch?1:0));this.stepLength=this.axisLength/calc}function projectValue(value,index){return this.stepLength*index}Chartist.StepAxis=Chartist.Axis.extend({constructor:StepAxis,projectValue:projectValue})})(this,Chartist);(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;var defaultOptions={
// Options for X-Axis
axisX:{offset:30,position:"end",
// Allows you to correct label positioning on this axis by positive or negative x and y offset.
labelOffset:{x:0,y:0},showLabel:true,showGrid:true,labelInterpolationFnc:Chartist.noop,
// Set the axis type to be used to project values on this axis. If not defined, Chartist.StepAxis will be used for the X-Axis, where the ticks option will be set to the labels in the data and the stretch option will be set to the global fullWidth option. This type can be changed to any axis constructor available (e.g. Chartist.FixedScaleAxis), where all axis options should be present here.
type:undefined},
// Options for Y-Axis
axisY:{offset:40,position:"start",
// Allows you to correct label positioning on this axis by positive or negative x and y offset.
labelOffset:{x:0,y:0},showLabel:true,showGrid:true,labelInterpolationFnc:Chartist.noop,
// Set the axis type to be used to project values on this axis. If not defined, Chartist.AutoScaleAxis will be used for the Y-Axis, where the high and low options will be set to the global high and low options. This type can be changed to any axis constructor available (e.g. Chartist.FixedScaleAxis), where all axis options should be present here.
type:undefined,scaleMinSpace:20,onlyInteger:false},width:undefined,height:undefined,showLine:true,showPoint:true,showArea:false,areaBase:0,lineSmooth:true,showGridBackground:false,low:undefined,high:undefined,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:false,reverseData:false,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};function createChart(options){var data=Chartist.normalizeData(this.data,options.reverseData,true);this.svg=Chartist.createSvg(this.container,options.width,options.height,options.classNames.chart);var gridGroup=this.svg.elem("g").addClass(options.classNames.gridGroup);var seriesGroup=this.svg.elem("g");var labelGroup=this.svg.elem("g").addClass(options.classNames.labelGroup);var chartRect=Chartist.createChartRect(this.svg,options,defaultOptions.padding);var axisX,axisY;if(options.axisX.type===undefined){axisX=new Chartist.StepAxis(Chartist.Axis.units.x,data.normalized.series,chartRect,Chartist.extend({},options.axisX,{ticks:data.normalized.labels,stretch:options.fullWidth}))}else{axisX=options.axisX.type.call(Chartist,Chartist.Axis.units.x,data.normalized.series,chartRect,options.axisX)}if(options.axisY.type===undefined){axisY=new Chartist.AutoScaleAxis(Chartist.Axis.units.y,data.normalized.series,chartRect,Chartist.extend({},options.axisY,{high:Chartist.isNumeric(options.high)?options.high:options.axisY.high,low:Chartist.isNumeric(options.low)?options.low:options.axisY.low}))}else{axisY=options.axisY.type.call(Chartist,Chartist.Axis.units.y,data.normalized.series,chartRect,options.axisY)}axisX.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter);axisY.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter);if(options.showGridBackground){Chartist.createGridBackground(gridGroup,chartRect,options.classNames.gridBackground,this.eventEmitter)}data.raw.series.forEach(function(series,seriesIndex){var seriesElement=seriesGroup.elem("g");seriesElement.attr({"ct:series-name":series.name,"ct:meta":Chartist.serialize(series.meta)});seriesElement.addClass([options.classNames.series,series.className||options.classNames.series+"-"+Chartist.alphaNumerate(seriesIndex)].join(" "));var pathCoordinates=[],pathData=[];data.normalized.series[seriesIndex].forEach(function(value,valueIndex){var p={x:chartRect.x1+axisX.projectValue(value,valueIndex,data.normalized.series[seriesIndex]),y:chartRect.y1-axisY.projectValue(value,valueIndex,data.normalized.series[seriesIndex])};pathCoordinates.push(p.x,p.y);pathData.push({value:value,valueIndex:valueIndex,meta:Chartist.getMetaData(series,valueIndex)})}.bind(this));var seriesOptions={lineSmooth:Chartist.getSeriesOption(series,options,"lineSmooth"),showPoint:Chartist.getSeriesOption(series,options,"showPoint"),showLine:Chartist.getSeriesOption(series,options,"showLine"),showArea:Chartist.getSeriesOption(series,options,"showArea"),areaBase:Chartist.getSeriesOption(series,options,"areaBase")};var smoothing=typeof seriesOptions.lineSmooth==="function"?seriesOptions.lineSmooth:seriesOptions.lineSmooth?Chartist.Interpolation.monotoneCubic():Chartist.Interpolation.none();var path=smoothing(pathCoordinates,pathData);if(seriesOptions.showPoint){path.pathElements.forEach(function(pathElement){var point=seriesElement.elem("line",{x1:pathElement.x,y1:pathElement.y,x2:pathElement.x+.01,y2:pathElement.y},options.classNames.point).attr({"ct:value":[pathElement.data.value.x,pathElement.data.value.y].filter(Chartist.isNumeric).join(","),"ct:meta":Chartist.serialize(pathElement.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:pathElement.data.value,index:pathElement.data.valueIndex,meta:pathElement.data.meta,series:series,seriesIndex:seriesIndex,axisX:axisX,axisY:axisY,group:seriesElement,element:point,x:pathElement.x,y:pathElement.y})}.bind(this))}if(seriesOptions.showLine){var line=seriesElement.elem("path",{d:path.stringify()},options.classNames.line,true);this.eventEmitter.emit("draw",{type:"line",values:data.normalized.series[seriesIndex],path:path.clone(),chartRect:chartRect,index:seriesIndex,series:series,seriesIndex:seriesIndex,seriesMeta:series.meta,axisX:axisX,axisY:axisY,group:seriesElement,element:line})}
// Area currently only works with axes that support a range!
if(seriesOptions.showArea&&axisY.range){var areaBase=Math.max(Math.min(seriesOptions.areaBase,axisY.range.max),axisY.range.min);var areaBaseProjected=chartRect.y1-axisY.projectValue(areaBase);path.splitByCommand("M").filter(function onlySolidSegments(pathSegment){return pathSegment.pathElements.length>1}).map(function convertToArea(solidPathSegments){var firstElement=solidPathSegments.pathElements[0];var lastElement=solidPathSegments.pathElements[solidPathSegments.pathElements.length-1];
// As the closing option is set our path will be automatically closed
return solidPathSegments.clone(true).position(0).remove(1).move(firstElement.x,areaBaseProjected).line(firstElement.x,firstElement.y).position(solidPathSegments.pathElements.length+1).line(lastElement.x,areaBaseProjected)}).forEach(function createArea(areaPath){var area=seriesElement.elem("path",{d:areaPath.stringify()},options.classNames.area,true);this.eventEmitter.emit("draw",{type:"area",values:data.normalized.series[seriesIndex],path:areaPath.clone(),series:series,seriesIndex:seriesIndex,axisX:axisX,axisY:axisY,chartRect:chartRect,index:seriesIndex,group:seriesElement,element:area})}.bind(this))}}.bind(this));this.eventEmitter.emit("created",{bounds:axisY.bounds,chartRect:chartRect,axisX:axisX,axisY:axisY,svg:this.svg,options:options})}/**
   * This method creates a new line chart.
   *
   * @memberof Chartist.Line
   * @param {String|Node} query A selector query string or directly a DOM element
   * @param {Object} data The data object that needs to consist of a labels and a series array
   * @param {Object} [options] The options object with options that override the default options. Check the examples for a detailed list.
   * @param {Array} [responsiveOptions] Specify an array of responsive option arrays which are a media query and options object pair => [[mediaQueryString, optionsObject],[more...]]
   * @return {Object} An object which exposes the API for the created chart
   *
   * @example
   * // Create a simple line chart
   * var data = {
   *   // A labels array that can contain any sort of values
   *   labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
   *   // Our series array that contains series objects or in this case series data arrays
   *   series: [
   *     [5, 2, 4, 2, 0]
   *   ]
   * };
   *
   * // As options we currently only set a static size of 300x200 px
   * var options = {
   *   width: '300px',
   *   height: '200px'
   * };
   *
   * // In the global name space Chartist we call the Line function to initialize a line chart. As a first parameter we pass in a selector where we would like to get our chart created. Second parameter is the actual data object and as a third parameter we pass in our options
   * new Chartist.Line('.ct-chart', data, options);
   *
   * @example
   * // Use specific interpolation function with configuration from the Chartist.Interpolation module
   *
   * var chart = new Chartist.Line('.ct-chart', {
   *   labels: [1, 2, 3, 4, 5],
   *   series: [
   *     [1, 1, 8, 1, 7]
   *   ]
   * }, {
   *   lineSmooth: Chartist.Interpolation.cardinal({
   *     tension: 0.2
   *   })
   * });
   *
   * @example
   * // Create a line chart with responsive options
   *
   * var data = {
   *   // A labels array that can contain any sort of values
   *   labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
   *   // Our series array that contains series objects or in this case series data arrays
   *   series: [
   *     [5, 2, 4, 2, 0]
   *   ]
   * };
   *
   * // In addition to the regular options we specify responsive option overrides that will override the default configutation based on the matching media queries.
   * var responsiveOptions = [
   *   ['screen and (min-width: 641px) and (max-width: 1024px)', {
   *     showPoint: false,
   *     axisX: {
   *       labelInterpolationFnc: function(value) {
   *         // Will return Mon, Tue, Wed etc. on medium screens
   *         return value.slice(0, 3);
   *       }
   *     }
   *   }],
   *   ['screen and (max-width: 640px)', {
   *     showLine: false,
   *     axisX: {
   *       labelInterpolationFnc: function(value) {
   *         // Will return M, T, W etc. on small screens
   *         return value[0];
   *       }
   *     }
   *   }]
   * ];
   *
   * new Chartist.Line('.ct-chart', data, null, responsiveOptions);
   *
   */
function Line(query,data,options,responsiveOptions){Chartist.Line.super.constructor.call(this,query,data,defaultOptions,Chartist.extend({},defaultOptions,options),responsiveOptions)}Chartist.Line=Chartist.Base.extend({constructor:Line,createChart:createChart})})(this,Chartist);(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;var defaultOptions={
// Options for X-Axis
axisX:{offset:30,position:"end",
// Allows you to correct label positioning on this axis by positive or negative x and y offset.
labelOffset:{x:0,y:0},showLabel:true,showGrid:true,labelInterpolationFnc:Chartist.noop,scaleMinSpace:30,onlyInteger:false},
// Options for Y-Axis
axisY:{offset:40,position:"start",
// Allows you to correct label positioning on this axis by positive or negative x and y offset.
labelOffset:{x:0,y:0},showLabel:true,showGrid:true,labelInterpolationFnc:Chartist.noop,scaleMinSpace:20,onlyInteger:false},width:undefined,height:undefined,high:undefined,low:undefined,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:false,stackMode:"accumulate",
// Inverts the axes of the bar chart in order to draw a horizontal bar chart. Be aware that you also need to invert your axis settings as the Y Axis will now display the labels and the X Axis the values.
horizontalBars:false,distributeSeries:false,reverseData:false,showGridBackground:false,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};function createChart(options){var data;var highLow;if(options.distributeSeries){data=Chartist.normalizeData(this.data,options.reverseData,options.horizontalBars?"x":"y");data.normalized.series=data.normalized.series.map(function(value){return[value]})}else{data=Chartist.normalizeData(this.data,options.reverseData,options.horizontalBars?"x":"y")}this.svg=Chartist.createSvg(this.container,options.width,options.height,options.classNames.chart+(options.horizontalBars?" "+options.classNames.horizontalBars:""));var gridGroup=this.svg.elem("g").addClass(options.classNames.gridGroup);var seriesGroup=this.svg.elem("g");var labelGroup=this.svg.elem("g").addClass(options.classNames.labelGroup);if(options.stackBars&&data.normalized.series.length!==0){var serialSums=Chartist.serialMap(data.normalized.series,function serialSums(){return Array.prototype.slice.call(arguments).map(function(value){return value}).reduce(function(prev,curr){return{x:prev.x+(curr&&curr.x)||0,y:prev.y+(curr&&curr.y)||0}},{x:0,y:0})});highLow=Chartist.getHighLow([serialSums],options,options.horizontalBars?"x":"y")}else{highLow=Chartist.getHighLow(data.normalized.series,options,options.horizontalBars?"x":"y")}highLow.high=+options.high||(options.high===0?0:highLow.high);highLow.low=+options.low||(options.low===0?0:highLow.low);var chartRect=Chartist.createChartRect(this.svg,options,defaultOptions.padding);var valueAxis,labelAxisTicks,labelAxis,axisX,axisY;if(options.distributeSeries&&options.stackBars){labelAxisTicks=data.normalized.labels.slice(0,1)}else{labelAxisTicks=data.normalized.labels}
// Set labelAxis and valueAxis based on the horizontalBars setting. This setting will flip the axes if necessary.
if(options.horizontalBars){if(options.axisX.type===undefined){valueAxis=axisX=new Chartist.AutoScaleAxis(Chartist.Axis.units.x,data.normalized.series,chartRect,Chartist.extend({},options.axisX,{highLow:highLow,referenceValue:0}))}else{valueAxis=axisX=options.axisX.type.call(Chartist,Chartist.Axis.units.x,data.normalized.series,chartRect,Chartist.extend({},options.axisX,{highLow:highLow,referenceValue:0}))}if(options.axisY.type===undefined){labelAxis=axisY=new Chartist.StepAxis(Chartist.Axis.units.y,data.normalized.series,chartRect,{ticks:labelAxisTicks})}else{labelAxis=axisY=options.axisY.type.call(Chartist,Chartist.Axis.units.y,data.normalized.series,chartRect,options.axisY)}}else{if(options.axisX.type===undefined){labelAxis=axisX=new Chartist.StepAxis(Chartist.Axis.units.x,data.normalized.series,chartRect,{ticks:labelAxisTicks})}else{labelAxis=axisX=options.axisX.type.call(Chartist,Chartist.Axis.units.x,data.normalized.series,chartRect,options.axisX)}if(options.axisY.type===undefined){valueAxis=axisY=new Chartist.AutoScaleAxis(Chartist.Axis.units.y,data.normalized.series,chartRect,Chartist.extend({},options.axisY,{highLow:highLow,referenceValue:0}))}else{valueAxis=axisY=options.axisY.type.call(Chartist,Chartist.Axis.units.y,data.normalized.series,chartRect,Chartist.extend({},options.axisY,{highLow:highLow,referenceValue:0}))}}var zeroPoint=options.horizontalBars?chartRect.x1+valueAxis.projectValue(0):chartRect.y1-valueAxis.projectValue(0);var stackedBarValues=[];labelAxis.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter);valueAxis.createGridAndLabels(gridGroup,labelGroup,this.supportsForeignObject,options,this.eventEmitter);if(options.showGridBackground){Chartist.createGridBackground(gridGroup,chartRect,options.classNames.gridBackground,this.eventEmitter)}data.raw.series.forEach(function(series,seriesIndex){var biPol=seriesIndex-(data.raw.series.length-1)/2;var periodHalfLength;var seriesElement;if(options.distributeSeries&&!options.stackBars){periodHalfLength=labelAxis.axisLength/data.normalized.series.length/2}else if(options.distributeSeries&&options.stackBars){periodHalfLength=labelAxis.axisLength/2}else{periodHalfLength=labelAxis.axisLength/data.normalized.series[seriesIndex].length/2}
// Adding the series group to the series element
seriesElement=seriesGroup.elem("g");seriesElement.attr({"ct:series-name":series.name,"ct:meta":Chartist.serialize(series.meta)});seriesElement.addClass([options.classNames.series,series.className||options.classNames.series+"-"+Chartist.alphaNumerate(seriesIndex)].join(" "));data.normalized.series[seriesIndex].forEach(function(value,valueIndex){var projected,bar,previousStack,labelAxisValueIndex;
// We need to set labelAxisValueIndex based on some options combinations
if(options.distributeSeries&&!options.stackBars){labelAxisValueIndex=seriesIndex}else if(options.distributeSeries&&options.stackBars){labelAxisValueIndex=0}else{labelAxisValueIndex=valueIndex}if(options.horizontalBars){projected={x:chartRect.x1+valueAxis.projectValue(value&&value.x?value.x:0,valueIndex,data.normalized.series[seriesIndex]),y:chartRect.y1-labelAxis.projectValue(value&&value.y?value.y:0,labelAxisValueIndex,data.normalized.series[seriesIndex])}}else{projected={x:chartRect.x1+labelAxis.projectValue(value&&value.x?value.x:0,labelAxisValueIndex,data.normalized.series[seriesIndex]),y:chartRect.y1-valueAxis.projectValue(value&&value.y?value.y:0,valueIndex,data.normalized.series[seriesIndex])}}
// the periodHalfLength value. Also we do arrange the different series so that they align up to each other using
if(labelAxis instanceof Chartist.StepAxis){if(!labelAxis.options.stretch){projected[labelAxis.units.pos]+=periodHalfLength*(options.horizontalBars?-1:1)}projected[labelAxis.units.pos]+=options.stackBars||options.distributeSeries?0:biPol*options.seriesBarDistance*(options.horizontalBars?-1:1)}previousStack=stackedBarValues[valueIndex]||zeroPoint;stackedBarValues[valueIndex]=previousStack-(zeroPoint-projected[labelAxis.counterUnits.pos]);if(value===undefined){return}var positions={};positions[labelAxis.units.pos+"1"]=projected[labelAxis.units.pos];positions[labelAxis.units.pos+"2"]=projected[labelAxis.units.pos];if(options.stackBars&&(options.stackMode==="accumulate"||!options.stackMode)){positions[labelAxis.counterUnits.pos+"1"]=previousStack;positions[labelAxis.counterUnits.pos+"2"]=stackedBarValues[valueIndex]}else{positions[labelAxis.counterUnits.pos+"1"]=zeroPoint;positions[labelAxis.counterUnits.pos+"2"]=projected[labelAxis.counterUnits.pos]}positions.x1=Math.min(Math.max(positions.x1,chartRect.x1),chartRect.x2);positions.x2=Math.min(Math.max(positions.x2,chartRect.x1),chartRect.x2);positions.y1=Math.min(Math.max(positions.y1,chartRect.y2),chartRect.y1);positions.y2=Math.min(Math.max(positions.y2,chartRect.y2),chartRect.y1);var metaData=Chartist.getMetaData(series,valueIndex);bar=seriesElement.elem("line",positions,options.classNames.bar).attr({"ct:value":[value.x,value.y].filter(Chartist.isNumeric).join(","),"ct:meta":Chartist.serialize(metaData)});this.eventEmitter.emit("draw",Chartist.extend({type:"bar",value:value,index:valueIndex,meta:metaData,series:series,seriesIndex:seriesIndex,axisX:axisX,axisY:axisY,chartRect:chartRect,group:seriesElement,element:bar},positions))}.bind(this))}.bind(this));this.eventEmitter.emit("created",{bounds:valueAxis.bounds,chartRect:chartRect,axisX:axisX,axisY:axisY,svg:this.svg,options:options})}/**
   * This method creates a new bar chart and returns API object that you can use for later changes.
   *
   * @memberof Chartist.Bar
   * @param {String|Node} query A selector query string or directly a DOM element
   * @param {Object} data The data object that needs to consist of a labels and a series array
   * @param {Object} [options] The options object with options that override the default options. Check the examples for a detailed list.
   * @param {Array} [responsiveOptions] Specify an array of responsive option arrays which are a media query and options object pair => [[mediaQueryString, optionsObject],[more...]]
   * @return {Object} An object which exposes the API for the created chart
   *
   * @example
   * // Create a simple bar chart
   * var data = {
   *   labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
   *   series: [
   *     [5, 2, 4, 2, 0]
   *   ]
   * };
   *
   * // In the global name space Chartist we call the Bar function to initialize a bar chart. As a first parameter we pass in a selector where we would like to get our chart created and as a second parameter we pass our data object.
   * new Chartist.Bar('.ct-chart', data);
   *
   * @example
   * // This example creates a bipolar grouped bar chart where the boundaries are limitted to -10 and 10
   * new Chartist.Bar('.ct-chart', {
   *   labels: [1, 2, 3, 4, 5, 6, 7],
   *   series: [
   *     [1, 3, 2, -5, -3, 1, -6],
   *     [-5, -2, -4, -1, 2, -3, 1]
   *   ]
   * }, {
   *   seriesBarDistance: 12,
   *   low: -10,
   *   high: 10
   * });
   *
   */
function Bar(query,data,options,responsiveOptions){Chartist.Bar.super.constructor.call(this,query,data,defaultOptions,Chartist.extend({},defaultOptions,options),responsiveOptions)}Chartist.Bar=Chartist.Base.extend({constructor:Bar,createChart:createChart})})(this,Chartist);(function(globalRoot,Chartist){"use strict";var window=globalRoot.window;var document=globalRoot.document;var defaultOptions={width:undefined,height:undefined,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},
// The start angle of the pie chart in degrees where 0 points north. A higher value offsets the start angle clockwise.
startAngle:0,
// An optional total you can specify. By specifying a total value, the sum of the values in the series must be this total in order to draw a full pie. You can use this parameter to draw only parts of a pie or gauge charts.
total:undefined,donut:false,donutSolid:false,donutWidth:60,showLabel:true,labelOffset:0,labelPosition:"inside",
// An interpolation function for the label value
labelInterpolationFnc:Chartist.noop,labelDirection:"neutral",reverseData:false,ignoreEmptyValues:false};function determineAnchorPosition(center,label,direction){var toTheRight=label.x>center.x;if(toTheRight&&direction==="explode"||!toTheRight&&direction==="implode"){return"start"}else if(toTheRight&&direction==="implode"||!toTheRight&&direction==="explode"){return"end"}else{return"middle"}}function createChart(options){var data=Chartist.normalizeData(this.data);var seriesGroups=[],labelsGroup,chartRect,radius,labelRadius,totalDataSum,startAngle=options.startAngle;this.svg=Chartist.createSvg(this.container,options.width,options.height,options.donut?options.classNames.chartDonut:options.classNames.chartPie);chartRect=Chartist.createChartRect(this.svg,options,defaultOptions.padding);radius=Math.min(chartRect.width()/2,chartRect.height()/2);totalDataSum=options.total||data.normalized.series.reduce(function(previousValue,currentValue){return previousValue+currentValue},0);var donutWidth=Chartist.quantity(options.donutWidth);if(donutWidth.unit==="%"){donutWidth.value*=radius/100}
// See this proposal for more details: http://lists.w3.org/Archives/Public/www-svg/2003Oct/0000.html
radius-=options.donut&&!options.donutSolid?donutWidth.value/2:0;if(options.labelPosition==="outside"||options.donut&&!options.donutSolid){labelRadius=radius}else if(options.labelPosition==="center"){labelRadius=0}else if(options.donutSolid){labelRadius=radius-donutWidth.value/2}else{labelRadius=radius/2}
// Add the offset to the labelRadius where a negative offset means closed to the center of the chart
labelRadius+=options.labelOffset;var center={x:chartRect.x1+chartRect.width()/2,y:chartRect.y2+chartRect.height()/2};var hasSingleValInSeries=data.raw.series.filter(function(val){return val.hasOwnProperty("value")?val.value!==0:val!==0}).length===1;data.raw.series.forEach(function(series,index){seriesGroups[index]=this.svg.elem("g",null,null)}.bind(this));if(options.showLabel){labelsGroup=this.svg.elem("g",null,null)}data.raw.series.forEach(function(series,index){if(data.normalized.series[index]===0&&options.ignoreEmptyValues)return;seriesGroups[index].attr({"ct:series-name":series.name});seriesGroups[index].addClass([options.classNames.series,series.className||options.classNames.series+"-"+Chartist.alphaNumerate(index)].join(" "));
// If the whole dataset is 0 endAngle should be zero. Can't divide by 0.
var endAngle=totalDataSum>0?startAngle+data.normalized.series[index]/totalDataSum*360:0;var overlappigStartAngle=Math.max(0,startAngle-(index===0||hasSingleValInSeries?0:.2));if(endAngle-overlappigStartAngle>=359.99){endAngle=overlappigStartAngle+359.99}var start=Chartist.polarToCartesian(center.x,center.y,radius,overlappigStartAngle),end=Chartist.polarToCartesian(center.x,center.y,radius,endAngle);var innerStart,innerEnd,donutSolidRadius;var path=new Chartist.Svg.Path(!options.donut||options.donutSolid).move(end.x,end.y).arc(radius,radius,0,endAngle-startAngle>180,0,start.x,start.y);if(!options.donut){path.line(center.x,center.y)}else if(options.donutSolid){donutSolidRadius=radius-donutWidth.value;innerStart=Chartist.polarToCartesian(center.x,center.y,donutSolidRadius,startAngle-(index===0||hasSingleValInSeries?0:.2));innerEnd=Chartist.polarToCartesian(center.x,center.y,donutSolidRadius,endAngle);path.line(innerStart.x,innerStart.y);path.arc(donutSolidRadius,donutSolidRadius,0,endAngle-startAngle>180,1,innerEnd.x,innerEnd.y)}var pathClassName=options.classNames.slicePie;if(options.donut){pathClassName=options.classNames.sliceDonut;if(options.donutSolid){pathClassName=options.classNames.sliceDonutSolid}}var pathElement=seriesGroups[index].elem("path",{d:path.stringify()},pathClassName);
// Adding the pie series value to the path
pathElement.attr({"ct:value":data.normalized.series[index],"ct:meta":Chartist.serialize(series.meta)});if(options.donut&&!options.donutSolid){pathElement._node.style.strokeWidth=donutWidth.value+"px"}this.eventEmitter.emit("draw",{type:"slice",value:data.normalized.series[index],totalDataSum:totalDataSum,index:index,meta:series.meta,series:series,group:seriesGroups[index],element:pathElement,path:path.clone(),center:center,radius:radius,startAngle:startAngle,endAngle:endAngle});if(options.showLabel){var labelPosition;if(data.raw.series.length===1){labelPosition={x:center.x,y:center.y}}else{labelPosition=Chartist.polarToCartesian(center.x,center.y,labelRadius,startAngle+(endAngle-startAngle)/2)}var rawValue;if(data.normalized.labels&&!Chartist.isFalseyButZero(data.normalized.labels[index])){rawValue=data.normalized.labels[index]}else{rawValue=data.normalized.series[index]}var interpolatedValue=options.labelInterpolationFnc(rawValue,index);if(interpolatedValue||interpolatedValue===0){var labelElement=labelsGroup.elem("text",{dx:labelPosition.x,dy:labelPosition.y,"text-anchor":determineAnchorPosition(center,labelPosition,options.labelDirection)},options.classNames.label).text(""+interpolatedValue);this.eventEmitter.emit("draw",{type:"label",index:index,group:labelsGroup,element:labelElement,text:""+interpolatedValue,x:labelPosition.x,y:labelPosition.y})}}
// Set next startAngle to current endAngle.
startAngle=endAngle}.bind(this));this.eventEmitter.emit("created",{chartRect:chartRect,svg:this.svg,options:options})}/**
   * This method creates a new pie chart and returns an object that can be used to redraw the chart.
   *
   * @memberof Chartist.Pie
   * @param {String|Node} query A selector query string or directly a DOM element
   * @param {Object} data The data object in the pie chart needs to have a series property with a one dimensional data array. The values will be normalized against each other and don't necessarily need to be in percentage. The series property can also be an array of value objects that contain a value property and a className property to override the CSS class name for the series group.
   * @param {Object} [options] The options object with options that override the default options. Check the examples for a detailed list.
   * @param {Array} [responsiveOptions] Specify an array of responsive option arrays which are a media query and options object pair => [[mediaQueryString, optionsObject],[more...]]
   * @return {Object} An object with a version and an update method to manually redraw the chart
   *
   * @example
   * // Simple pie chart example with four series
   * new Chartist.Pie('.ct-chart', {
   *   series: [10, 2, 4, 3]
   * });
   *
   * @example
   * // Drawing a donut chart
   * new Chartist.Pie('.ct-chart', {
   *   series: [10, 2, 4, 3]
   * }, {
   *   donut: true
   * });
   *
   * @example
   * // Using donut, startAngle and total to draw a gauge chart
   * new Chartist.Pie('.ct-chart', {
   *   series: [20, 10, 30, 40]
   * }, {
   *   donut: true,
   *   donutWidth: 20,
   *   startAngle: 270,
   *   total: 200
   * });
   *
   * @example
   * // Drawing a pie chart with padding and labels that are outside the pie
   * new Chartist.Pie('.ct-chart', {
   *   series: [20, 10, 30, 40]
   * }, {
   *   chartPadding: 30,
   *   labelOffset: 50,
   *   labelDirection: 'explode'
   * });
   *
   * @example
   * // Overriding the class names for individual series as well as a name and meta data.
   * // The name will be written as ct:series-name attribute and the meta data will be serialized and written
   * // to a ct:meta attribute.
   * new Chartist.Pie('.ct-chart', {
   *   series: [{
   *     value: 20,
   *     name: 'Series 1',
   *     className: 'my-custom-class-one',
   *     meta: 'Meta One'
   *   }, {
   *     value: 10,
   *     name: 'Series 2',
   *     className: 'my-custom-class-two',
   *     meta: 'Meta Two'
   *   }, {
   *     value: 70,
   *     name: 'Series 3',
   *     className: 'my-custom-class-three',
   *     meta: 'Meta Three'
   *   }]
   * });
   */
function Pie(query,data,options,responsiveOptions){Chartist.Pie.super.constructor.call(this,query,data,defaultOptions,Chartist.extend({},defaultOptions,options),responsiveOptions)}Chartist.Pie=Chartist.Base.extend({constructor:Pie,createChart:createChart,determineAnchorPosition:determineAnchorPosition})})(this,Chartist);return Chartist});
(function(root,factory){if(typeof define==="function"&&define.amd){
// AMD. Register as an anonymous module.
define(["chartist"],function(chartist){return root.returnExportsGlobal=factory(chartist)})}else if(typeof exports==="object"){module.exports=factory(require("chartist"))}else{root["Chartist.plugins.legend"]=factory(root.Chartist)}})(this,function(Chartist){"use strict";var defaultOptions={className:"",classNames:false,removeAll:false,legendNames:false,clickable:true,onClick:null,position:"top"};Chartist.plugins=Chartist.plugins||{};Chartist.plugins.legend=function(options){if(options&&options.position){if(!(options.position==="top"||options.position==="bottom"||options.position instanceof HTMLElement)){throw Error("The position you entered is not a valid position")}if(options.position instanceof HTMLElement){var cachedDOMPosition=options.position;delete options.position}}options=Chartist.extend({},defaultOptions,options);if(cachedDOMPosition){options.position=cachedDOMPosition}return function legend(chart){var existingLegendElement=chart.container.querySelector(".ct-legend");if(existingLegendElement){existingLegendElement.parentNode.removeChild(existingLegendElement)}if(options.clickable){var newSeries=chart.data.series.map(function(series,seriesIndex){if(typeof series!=="object"){series={value:series}}series.className=series.className||chart.options.classNames.series+"-"+Chartist.alphaNumerate(seriesIndex);return series});chart.data.series=newSeries}var legendElement=document.createElement("ul"),isPieChart=chart instanceof Chartist.Pie;legendElement.className="ct-legend";if(chart instanceof Chartist.Pie){legendElement.classList.add("ct-legend-inside")}if(typeof options.className==="string"&&options.className.length>0){legendElement.classList.add(options.className)}if(chart.options.width){legendElement.style.cssText="width: "+chart.options.width+"px;margin: 0 auto;"}var legendNames=chart.data.series,useLabels=isPieChart&&chart.data.labels;if(useLabels){var originalLabels=chart.data.labels.slice(0);legendNames=chart.data.labels}legendNames=options.legendNames||legendNames;var legends=[];var seriesMetadata=new Array(chart.data.series.length);var activeLegendCount=0;for(var i=0;i<chart.data.series.length;i++){seriesMetadata[i]={data:chart.data.series[i],label:useLabels?chart.data.labels[i]:null,legend:-1}}var classNamesViable=Array.isArray(options.classNames)&&options.classNames.length===legendNames.length;legendNames.forEach(function(legend,i){var legendText=legend.name||legend;var legendSeries=legend.series||[i];var li=document.createElement("li");li.className="ct-series-"+i;
// Append specific class to a legend element, if viable classes are given
if(classNamesViable){li.className+=" "+options.classNames[i]}li.setAttribute("data-legend",i);li.textContent=legendText;legendElement.appendChild(li);legendSeries.forEach(function(seriesIndex){seriesMetadata[seriesIndex].legend=i});legends.push({text:legendText,series:legendSeries,active:true});activeLegendCount++});chart.on("created",function(data){
// Append the legend element to the DOM
if(!(options.position instanceof HTMLElement)){switch(options.position){case"top":chart.container.insertBefore(legendElement,chart.container.childNodes[0]);break;case"bottom":chart.container.insertBefore(legendElement,null);break}}else{
// Appends the legend element as the last child of a given HTMLElement
options.position.insertBefore(legendElement,null)}});if(options.clickable){legendElement.addEventListener("click",function(e){var li=e.target;if(li.parentNode!==legendElement||!li.hasAttribute("data-legend"))return;e.preventDefault();var legendIndex=parseInt(li.getAttribute("data-legend"));var legend=legends[legendIndex];if(!legends[legendIndex].active){legend.active=true;activeLegendCount++;li.classList.remove("inactive")}else{legend.active=false;activeLegendCount--;li.classList.add("inactive");if(!options.removeAll&&activeLegendCount==0){for(var i=0;i<legends.length;i++){legends[i].active=true;activeLegendCount++;legendElement.childNodes[i].classList.remove("inactive")}}}var newSeries=[];var newLabels=[];for(var i=0;i<seriesMetadata.length;i++){if(seriesMetadata[i].legend!=-1&&legends[seriesMetadata[i].legend].active){newSeries.push(seriesMetadata[i].data);newLabels.push(seriesMetadata[i].label)}}chart.data.series=newSeries;if(useLabels){chart.data.labels=newLabels}chart.update();if(options.onClick){options.onClick(chart,e)}})}}};return Chartist.plugins.legend});
(function(root,factory){if(typeof define==="function"&&define.amd){
// AMD. Register as an anonymous module.
define(["chartist"],function(Chartist){return root.returnExportsGlobal=factory(Chartist)})}else if(typeof exports==="object"){module.exports=factory(require("chartist"))}else{root["Chartist.plugins.tooltip"]=factory(Chartist)}})(this,function(Chartist){(function(window,document,Chartist){"use strict";var defaultOptions={currency:undefined,currencyFormatCallback:undefined,tooltipOffset:{x:0,y:-20},anchorToPoint:false,appendToBody:false,"class":undefined,pointClass:"ct-point"};Chartist.plugins=Chartist.plugins||{};Chartist.plugins.tooltip=function(options){options=Chartist.extend({},defaultOptions,options);return function tooltip(chart){var tooltipSelector=options.pointClass;if(chart.constructor.name==Chartist.Bar.prototype.constructor.name){tooltipSelector="ct-bar"}else if(chart.constructor.name==Chartist.Pie.prototype.constructor.name){
// Added support for donut graph
if(chart.options.donut){tooltipSelector="ct-slice-donut"}else{tooltipSelector="ct-slice-pie"}}var $chart=chart.container;var $toolTip=$chart.querySelector(".chartist-tooltip");if(!$toolTip){$toolTip=document.createElement("div");$toolTip.className=!options.class?"chartist-tooltip":"chartist-tooltip "+options.class;if(!options.appendToBody){$chart.appendChild($toolTip)}else{document.body.appendChild($toolTip)}}var height=$toolTip.offsetHeight;var width=$toolTip.offsetWidth;hide($toolTip);function on(event,selector,callback){$chart.addEventListener(event,function(e){if(!selector||hasClass(e.target,selector))callback(e)})}on("mouseover",tooltipSelector,function(event){var $point=event.target;var tooltipText="";var isPieChart=chart instanceof Chartist.Pie?$point:$point.parentNode;var seriesName=isPieChart?$point.parentNode.getAttribute("ct:meta")||$point.parentNode.getAttribute("ct:series-name"):"";var meta=$point.getAttribute("ct:meta")||seriesName||"";var hasMeta=!!meta;var value=$point.getAttribute("ct:value");if(options.transformTooltipTextFnc&&typeof options.transformTooltipTextFnc==="function"){value=options.transformTooltipTextFnc(value)}if(options.tooltipFnc&&typeof options.tooltipFnc==="function"){tooltipText=options.tooltipFnc(meta,value)}else{if(options.metaIsHTML){var txt=document.createElement("textarea");txt.innerHTML=meta;meta=txt.value}meta='<span class="chartist-tooltip-meta">'+meta+"</span>";if(hasMeta){tooltipText+=meta+"<br>"}else{if(chart instanceof Chartist.Pie){var label=next($point,"ct-label");if(label){tooltipText+=text(label)+"<br>"}}}if(value){if(options.currency){if(options.currencyFormatCallback!=undefined){value=options.currencyFormatCallback(value,options)}else{value=options.currency+value.replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")}}value='<span class="chartist-tooltip-value">'+value+"</span>";tooltipText+=value}}if(tooltipText){$toolTip.innerHTML=tooltipText;setPosition(event);show($toolTip);height=$toolTip.offsetHeight;width=$toolTip.offsetWidth}});on("mouseout",tooltipSelector,function(){hide($toolTip)});on("mousemove",null,function(event){if(false===options.anchorToPoint)setPosition(event)});function setPosition(event){height=height||$toolTip.offsetHeight;width=width||$toolTip.offsetWidth;var offsetX=-width/2+options.tooltipOffset.x;var offsetY=-height+options.tooltipOffset.y;var anchorX,anchorY;if(!options.appendToBody){var box=$chart.getBoundingClientRect();var left=event.pageX-box.left-window.pageXOffset;var top=event.pageY-box.top-window.pageYOffset;if(true===options.anchorToPoint&&event.target.x2&&event.target.y2){anchorX=parseInt(event.target.x2.baseVal.value);anchorY=parseInt(event.target.y2.baseVal.value)}$toolTip.style.top=(anchorY||top)+offsetY+"px";$toolTip.style.left=(anchorX||left)+offsetX+"px"}else{$toolTip.style.top=event.pageY+offsetY+"px";$toolTip.style.left=event.pageX+offsetX+"px"}}}};function show(element){if(!hasClass(element,"tooltip-show")){element.className=element.className+" tooltip-show"}}function hide(element){var regex=new RegExp("tooltip-show"+"\\s*","gi");element.className=element.className.replace(regex,"").trim()}function hasClass(element,className){return(" "+element.getAttribute("class")+" ").indexOf(" "+className+" ")>-1}function next(element,className){do{element=element.nextSibling}while(element&&!hasClass(element,className));return element}function text(element){return element.innerText||element.textContent}})(window,document,Chartist);return Chartist.plugins.tooltip});
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.8.0
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports!=="undefined"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){"use strict";var Slick=window.Slick||{};Slick=function(){var instanceUid=0;function Slick(element,settings){var _=this,dataSettings;_.defaults={accessibility:true,adaptiveHeight:false,appendArrows:$(element),appendDots:$(element),arrows:true,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:false,autoplaySpeed:3e3,centerMode:false,centerPadding:"50px",cssEase:"ease",customPaging:function(slider,i){return $('<button type="button" />').text(i+1)},dots:false,dotsClass:"slick-dots",draggable:true,easing:"linear",edgeFriction:.35,fade:false,focusOnSelect:false,focusOnChange:false,infinite:true,initialSlide:0,lazyLoad:"ondemand",mobileFirst:false,pauseOnHover:true,pauseOnFocus:true,pauseOnDotsHover:false,respondTo:"window",responsive:null,rows:1,rtl:false,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:true,swipeToSlide:false,touchMove:true,touchThreshold:5,useCSS:true,useTransform:true,variableWidth:false,vertical:false,verticalSwiping:false,waitForAnimate:true,zIndex:1e3};_.initials={animating:false,dragging:false,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:false,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:false,slideOffset:0,swipeLeft:null,swiping:false,$list:null,touchObject:{},transformsEnabled:false,unslicked:false};$.extend(_,_.initials);_.activeBreakpoint=null;_.animType=null;_.animProp=null;_.breakpoints=[];_.breakpointSettings=[];_.cssTransitions=false;_.focussed=false;_.interrupted=false;_.hidden="hidden";_.paused=true;_.positionProp=null;_.respondTo=null;_.rowCount=1;_.shouldClick=true;_.$slider=$(element);_.$slidesCache=null;_.transformType=null;_.transitionType=null;_.visibilityChange="visibilitychange";_.windowWidth=0;_.windowTimer=null;dataSettings=$(element).data("slick")||{};_.options=$.extend({},_.defaults,settings,dataSettings);_.currentSlide=_.options.initialSlide;_.originalSettings=_.options;if(typeof document.mozHidden!=="undefined"){_.hidden="mozHidden";_.visibilityChange="mozvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){_.hidden="webkitHidden";_.visibilityChange="webkitvisibilitychange"}_.autoPlay=$.proxy(_.autoPlay,_);_.autoPlayClear=$.proxy(_.autoPlayClear,_);_.autoPlayIterator=$.proxy(_.autoPlayIterator,_);_.changeSlide=$.proxy(_.changeSlide,_);_.clickHandler=$.proxy(_.clickHandler,_);_.selectHandler=$.proxy(_.selectHandler,_);_.setPosition=$.proxy(_.setPosition,_);_.swipeHandler=$.proxy(_.swipeHandler,_);_.dragHandler=$.proxy(_.dragHandler,_);_.keyHandler=$.proxy(_.keyHandler,_);_.instanceUid=instanceUid++;
// A simple way to check for HTML strings
_.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;_.registerBreakpoints();_.init(true)}return Slick}();Slick.prototype.activateADA=function(){var _=this;_.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};Slick.prototype.addSlide=Slick.prototype.slickAdd=function(markup,index,addBefore){var _=this;if(typeof index==="boolean"){addBefore=index;index=null}else if(index<0||index>=_.slideCount){return false}_.unload();if(typeof index==="number"){if(index===0&&_.$slides.length===0){$(markup).appendTo(_.$slideTrack)}else if(addBefore){$(markup).insertBefore(_.$slides.eq(index))}else{$(markup).insertAfter(_.$slides.eq(index))}}else{if(addBefore===true){$(markup).prependTo(_.$slideTrack)}else{$(markup).appendTo(_.$slideTrack)}}_.$slides=_.$slideTrack.children(this.options.slide);_.$slideTrack.children(this.options.slide).detach();_.$slideTrack.append(_.$slides);_.$slides.each(function(index,element){$(element).attr("data-slick-index",index)});_.$slidesCache=_.$slides;_.reinit()};Slick.prototype.animateHeight=function(){var _=this;if(_.options.slidesToShow===1&&_.options.adaptiveHeight===true&&_.options.vertical===false){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(true);_.$list.animate({height:targetHeight},_.options.speed)}};Slick.prototype.animateSlide=function(targetLeft,callback){var animProps={},_=this;_.animateHeight();if(_.options.rtl===true&&_.options.vertical===false){targetLeft=-targetLeft}if(_.transformsEnabled===false){if(_.options.vertical===false){_.$slideTrack.animate({left:targetLeft},_.options.speed,_.options.easing,callback)}else{_.$slideTrack.animate({top:targetLeft},_.options.speed,_.options.easing,callback)}}else{if(_.cssTransitions===false){if(_.options.rtl===true){_.currentLeft=-_.currentLeft}$({animStart:_.currentLeft}).animate({animStart:targetLeft},{duration:_.options.speed,easing:_.options.easing,step:function(now){now=Math.ceil(now);if(_.options.vertical===false){animProps[_.animType]="translate("+now+"px, 0px)";_.$slideTrack.css(animProps)}else{animProps[_.animType]="translate(0px,"+now+"px)";_.$slideTrack.css(animProps)}},complete:function(){if(callback){callback.call()}}})}else{_.applyTransition();targetLeft=Math.ceil(targetLeft);if(_.options.vertical===false){animProps[_.animType]="translate3d("+targetLeft+"px, 0px, 0px)"}else{animProps[_.animType]="translate3d(0px,"+targetLeft+"px, 0px)"}_.$slideTrack.css(animProps);if(callback){setTimeout(function(){_.disableTransition();callback.call()},_.options.speed)}}}};Slick.prototype.getNavTarget=function(){var _=this,asNavFor=_.options.asNavFor;if(asNavFor&&asNavFor!==null){asNavFor=$(asNavFor).not(_.$slider)}return asNavFor};Slick.prototype.asNavFor=function(index){var _=this,asNavFor=_.getNavTarget();if(asNavFor!==null&&typeof asNavFor==="object"){asNavFor.each(function(){var target=$(this).slick("getSlick");if(!target.unslicked){target.slideHandler(index,true)}})}};Slick.prototype.applyTransition=function(slide){var _=this,transition={};if(_.options.fade===false){transition[_.transitionType]=_.transformType+" "+_.options.speed+"ms "+_.options.cssEase}else{transition[_.transitionType]="opacity "+_.options.speed+"ms "+_.options.cssEase}if(_.options.fade===false){_.$slideTrack.css(transition)}else{_.$slides.eq(slide).css(transition)}};Slick.prototype.autoPlay=function(){var _=this;_.autoPlayClear();if(_.slideCount>_.options.slidesToShow){_.autoPlayTimer=setInterval(_.autoPlayIterator,_.options.autoplaySpeed)}};Slick.prototype.autoPlayClear=function(){var _=this;if(_.autoPlayTimer){clearInterval(_.autoPlayTimer)}};Slick.prototype.autoPlayIterator=function(){var _=this,slideTo=_.currentSlide+_.options.slidesToScroll;if(!_.paused&&!_.interrupted&&!_.focussed){if(_.options.infinite===false){if(_.direction===1&&_.currentSlide+1===_.slideCount-1){_.direction=0}else if(_.direction===0){slideTo=_.currentSlide-_.options.slidesToScroll;if(_.currentSlide-1===0){_.direction=1}}}_.slideHandler(slideTo)}};Slick.prototype.buildArrows=function(){var _=this;if(_.options.arrows===true){_.$prevArrow=$(_.options.prevArrow).addClass("slick-arrow");_.$nextArrow=$(_.options.nextArrow).addClass("slick-arrow");if(_.slideCount>_.options.slidesToShow){_.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");_.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");if(_.htmlExpr.test(_.options.prevArrow)){_.$prevArrow.prependTo(_.options.appendArrows)}if(_.htmlExpr.test(_.options.nextArrow)){_.$nextArrow.appendTo(_.options.appendArrows)}if(_.options.infinite!==true){_.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")}}else{_.$prevArrow.add(_.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"})}}};Slick.prototype.buildDots=function(){var _=this,i,dot;if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){_.$slider.addClass("slick-dotted");dot=$("<ul />").addClass(_.options.dotsClass);for(i=0;i<=_.getDotCount();i+=1){dot.append($("<li />").append(_.options.customPaging.call(this,_,i)))}_.$dots=dot.appendTo(_.options.appendDots);_.$dots.find("li").first().addClass("slick-active")}};Slick.prototype.buildOut=function(){var _=this;_.$slides=_.$slider.children(_.options.slide+":not(.slick-cloned)").addClass("slick-slide");_.slideCount=_.$slides.length;_.$slides.each(function(index,element){$(element).attr("data-slick-index",index).data("originalStyling",$(element).attr("style")||"")});_.$slider.addClass("slick-slider");_.$slideTrack=_.slideCount===0?$('<div class="slick-track"/>').appendTo(_.$slider):_.$slides.wrapAll('<div class="slick-track"/>').parent();_.$list=_.$slideTrack.wrap('<div class="slick-list"/>').parent();_.$slideTrack.css("opacity",0);if(_.options.centerMode===true||_.options.swipeToSlide===true){_.options.slidesToScroll=1}$("img[data-lazy]",_.$slider).not("[src]").addClass("slick-loading");_.setupInfinite();_.buildArrows();_.buildDots();_.updateDots();_.setSlideClasses(typeof _.currentSlide==="number"?_.currentSlide:0);if(_.options.draggable===true){_.$list.addClass("draggable")}};Slick.prototype.buildRows=function(){var _=this,a,b,c,newSlides,numOfSlides,originalSlides,slidesPerSection;newSlides=document.createDocumentFragment();originalSlides=_.$slider.children();if(_.options.rows>0){slidesPerSection=_.options.slidesPerRow*_.options.rows;numOfSlides=Math.ceil(originalSlides.length/slidesPerSection);for(a=0;a<numOfSlides;a++){var slide=document.createElement("div");for(b=0;b<_.options.rows;b++){var row=document.createElement("div");for(c=0;c<_.options.slidesPerRow;c++){var target=a*slidesPerSection+(b*_.options.slidesPerRow+c);if(originalSlides.get(target)){row.appendChild(originalSlides.get(target))}}slide.appendChild(row)}newSlides.appendChild(slide)}_.$slider.empty().append(newSlides);_.$slider.children().children().children().css({width:100/_.options.slidesPerRow+"%",display:"inline-block"})}};Slick.prototype.checkResponsive=function(initial,forceUpdate){var _=this,breakpoint,targetBreakpoint,respondToWidth,triggerBreakpoint=false;var sliderWidth=_.$slider.width();var windowWidth=window.innerWidth||$(window).width();if(_.respondTo==="window"){respondToWidth=windowWidth}else if(_.respondTo==="slider"){respondToWidth=sliderWidth}else if(_.respondTo==="min"){respondToWidth=Math.min(windowWidth,sliderWidth)}if(_.options.responsive&&_.options.responsive.length&&_.options.responsive!==null){targetBreakpoint=null;for(breakpoint in _.breakpoints){if(_.breakpoints.hasOwnProperty(breakpoint)){if(_.originalSettings.mobileFirst===false){if(respondToWidth<_.breakpoints[breakpoint]){targetBreakpoint=_.breakpoints[breakpoint]}}else{if(respondToWidth>_.breakpoints[breakpoint]){targetBreakpoint=_.breakpoints[breakpoint]}}}}if(targetBreakpoint!==null){if(_.activeBreakpoint!==null){if(targetBreakpoint!==_.activeBreakpoint||forceUpdate){_.activeBreakpoint=targetBreakpoint;if(_.breakpointSettings[targetBreakpoint]==="unslick"){_.unslick(targetBreakpoint)}else{_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]);if(initial===true){_.currentSlide=_.options.initialSlide}_.refresh(initial)}triggerBreakpoint=targetBreakpoint}}else{_.activeBreakpoint=targetBreakpoint;if(_.breakpointSettings[targetBreakpoint]==="unslick"){_.unslick(targetBreakpoint)}else{_.options=$.extend({},_.originalSettings,_.breakpointSettings[targetBreakpoint]);if(initial===true){_.currentSlide=_.options.initialSlide}_.refresh(initial)}triggerBreakpoint=targetBreakpoint}}else{if(_.activeBreakpoint!==null){_.activeBreakpoint=null;_.options=_.originalSettings;if(initial===true){_.currentSlide=_.options.initialSlide}_.refresh(initial);triggerBreakpoint=targetBreakpoint}}if(!initial&&triggerBreakpoint!==false){_.$slider.trigger("breakpoint",[_,triggerBreakpoint])}}};Slick.prototype.changeSlide=function(event,dontAnimate){var _=this,$target=$(event.currentTarget),indexOffset,slideOffset,unevenOffset;if($target.is("a")){event.preventDefault()}if(!$target.is("li")){$target=$target.closest("li")}unevenOffset=_.slideCount%_.options.slidesToScroll!==0;indexOffset=unevenOffset?0:(_.slideCount-_.currentSlide)%_.options.slidesToScroll;switch(event.data.message){case"previous":slideOffset=indexOffset===0?_.options.slidesToScroll:_.options.slidesToShow-indexOffset;if(_.slideCount>_.options.slidesToShow){_.slideHandler(_.currentSlide-slideOffset,false,dontAnimate)}break;case"next":slideOffset=indexOffset===0?_.options.slidesToScroll:indexOffset;if(_.slideCount>_.options.slidesToShow){_.slideHandler(_.currentSlide+slideOffset,false,dontAnimate)}break;case"index":var index=event.data.index===0?0:event.data.index||$target.index()*_.options.slidesToScroll;_.slideHandler(_.checkNavigable(index),false,dontAnimate);$target.children().trigger("focus");break;default:return}};Slick.prototype.checkNavigable=function(index){var _=this,navigables,prevNavigable;navigables=_.getNavigableIndexes();prevNavigable=0;if(index>navigables[navigables.length-1]){index=navigables[navigables.length-1]}else{for(var n in navigables){if(index<navigables[n]){index=prevNavigable;break}prevNavigable=navigables[n]}}return index};Slick.prototype.cleanUpEvents=function(){var _=this;if(_.options.dots&&_.$dots!==null){$("li",_.$dots).off("click.slick",_.changeSlide).off("mouseenter.slick",$.proxy(_.interrupt,_,true)).off("mouseleave.slick",$.proxy(_.interrupt,_,false));if(_.options.accessibility===true){_.$dots.off("keydown.slick",_.keyHandler)}}_.$slider.off("focus.slick blur.slick");if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow&&_.$prevArrow.off("click.slick",_.changeSlide);_.$nextArrow&&_.$nextArrow.off("click.slick",_.changeSlide);if(_.options.accessibility===true){_.$prevArrow&&_.$prevArrow.off("keydown.slick",_.keyHandler);_.$nextArrow&&_.$nextArrow.off("keydown.slick",_.keyHandler)}}_.$list.off("touchstart.slick mousedown.slick",_.swipeHandler);_.$list.off("touchmove.slick mousemove.slick",_.swipeHandler);_.$list.off("touchend.slick mouseup.slick",_.swipeHandler);_.$list.off("touchcancel.slick mouseleave.slick",_.swipeHandler);_.$list.off("click.slick",_.clickHandler);$(document).off(_.visibilityChange,_.visibility);_.cleanUpSlideEvents();if(_.options.accessibility===true){_.$list.off("keydown.slick",_.keyHandler)}if(_.options.focusOnSelect===true){$(_.$slideTrack).children().off("click.slick",_.selectHandler)}$(window).off("orientationchange.slick.slick-"+_.instanceUid,_.orientationChange);$(window).off("resize.slick.slick-"+_.instanceUid,_.resize);$("[draggable!=true]",_.$slideTrack).off("dragstart",_.preventDefault);$(window).off("load.slick.slick-"+_.instanceUid,_.setPosition)};Slick.prototype.cleanUpSlideEvents=function(){var _=this;_.$list.off("mouseenter.slick",$.proxy(_.interrupt,_,true));_.$list.off("mouseleave.slick",$.proxy(_.interrupt,_,false))};Slick.prototype.cleanUpRows=function(){var _=this,originalSlides;if(_.options.rows>0){originalSlides=_.$slides.children().children();originalSlides.removeAttr("style");_.$slider.empty().append(originalSlides)}};Slick.prototype.clickHandler=function(event){var _=this;if(_.shouldClick===false){event.stopImmediatePropagation();event.stopPropagation();event.preventDefault()}};Slick.prototype.destroy=function(refresh){var _=this;_.autoPlayClear();_.touchObject={};_.cleanUpEvents();$(".slick-cloned",_.$slider).detach();if(_.$dots){_.$dots.remove()}if(_.$prevArrow&&_.$prevArrow.length){_.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");if(_.htmlExpr.test(_.options.prevArrow)){_.$prevArrow.remove()}}if(_.$nextArrow&&_.$nextArrow.length){_.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");if(_.htmlExpr.test(_.options.nextArrow)){_.$nextArrow.remove()}}if(_.$slides){_.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){$(this).attr("style",$(this).data("originalStyling"))});_.$slideTrack.children(this.options.slide).detach();_.$slideTrack.detach();_.$list.detach();_.$slider.append(_.$slides)}_.cleanUpRows();_.$slider.removeClass("slick-slider");_.$slider.removeClass("slick-initialized");_.$slider.removeClass("slick-dotted");_.unslicked=true;if(!refresh){_.$slider.trigger("destroy",[_])}};Slick.prototype.disableTransition=function(slide){var _=this,transition={};transition[_.transitionType]="";if(_.options.fade===false){_.$slideTrack.css(transition)}else{_.$slides.eq(slide).css(transition)}};Slick.prototype.fadeSlide=function(slideIndex,callback){var _=this;if(_.cssTransitions===false){_.$slides.eq(slideIndex).css({zIndex:_.options.zIndex});_.$slides.eq(slideIndex).animate({opacity:1},_.options.speed,_.options.easing,callback)}else{_.applyTransition(slideIndex);_.$slides.eq(slideIndex).css({opacity:1,zIndex:_.options.zIndex});if(callback){setTimeout(function(){_.disableTransition(slideIndex);callback.call()},_.options.speed)}}};Slick.prototype.fadeSlideOut=function(slideIndex){var _=this;if(_.cssTransitions===false){_.$slides.eq(slideIndex).animate({opacity:0,zIndex:_.options.zIndex-2},_.options.speed,_.options.easing)}else{_.applyTransition(slideIndex);_.$slides.eq(slideIndex).css({opacity:0,zIndex:_.options.zIndex-2})}};Slick.prototype.filterSlides=Slick.prototype.slickFilter=function(filter){var _=this;if(filter!==null){_.$slidesCache=_.$slides;_.unload();_.$slideTrack.children(this.options.slide).detach();_.$slidesCache.filter(filter).appendTo(_.$slideTrack);_.reinit()}};Slick.prototype.focusHandler=function(){var _=this;_.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(event){event.stopImmediatePropagation();var $sf=$(this);setTimeout(function(){if(_.options.pauseOnFocus){_.focussed=$sf.is(":focus");_.autoPlay()}},0)})};Slick.prototype.getCurrent=Slick.prototype.slickCurrentSlide=function(){var _=this;return _.currentSlide};Slick.prototype.getDotCount=function(){var _=this;var breakPoint=0;var counter=0;var pagerQty=0;if(_.options.infinite===true){if(_.slideCount<=_.options.slidesToShow){++pagerQty}else{while(breakPoint<_.slideCount){++pagerQty;breakPoint=counter+_.options.slidesToScroll;counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow}}}else if(_.options.centerMode===true){pagerQty=_.slideCount}else if(!_.options.asNavFor){pagerQty=1+Math.ceil((_.slideCount-_.options.slidesToShow)/_.options.slidesToScroll)}else{while(breakPoint<_.slideCount){++pagerQty;breakPoint=counter+_.options.slidesToScroll;counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow}}return pagerQty-1};Slick.prototype.getLeft=function(slideIndex){var _=this,targetLeft,verticalHeight,verticalOffset=0,targetSlide,coef;_.slideOffset=0;verticalHeight=_.$slides.first().outerHeight(true);if(_.options.infinite===true){if(_.slideCount>_.options.slidesToShow){_.slideOffset=_.slideWidth*_.options.slidesToShow*-1;coef=-1;if(_.options.vertical===true&&_.options.centerMode===true){if(_.options.slidesToShow===2){coef=-1.5}else if(_.options.slidesToShow===1){coef=-2}}verticalOffset=verticalHeight*_.options.slidesToShow*coef}if(_.slideCount%_.options.slidesToScroll!==0){if(slideIndex+_.options.slidesToScroll>_.slideCount&&_.slideCount>_.options.slidesToShow){if(slideIndex>_.slideCount){_.slideOffset=(_.options.slidesToShow-(slideIndex-_.slideCount))*_.slideWidth*-1;verticalOffset=(_.options.slidesToShow-(slideIndex-_.slideCount))*verticalHeight*-1}else{_.slideOffset=_.slideCount%_.options.slidesToScroll*_.slideWidth*-1;verticalOffset=_.slideCount%_.options.slidesToScroll*verticalHeight*-1}}}}else{if(slideIndex+_.options.slidesToShow>_.slideCount){_.slideOffset=(slideIndex+_.options.slidesToShow-_.slideCount)*_.slideWidth;verticalOffset=(slideIndex+_.options.slidesToShow-_.slideCount)*verticalHeight}}if(_.slideCount<=_.options.slidesToShow){_.slideOffset=0;verticalOffset=0}if(_.options.centerMode===true&&_.slideCount<=_.options.slidesToShow){_.slideOffset=_.slideWidth*Math.floor(_.options.slidesToShow)/2-_.slideWidth*_.slideCount/2}else if(_.options.centerMode===true&&_.options.infinite===true){_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)-_.slideWidth}else if(_.options.centerMode===true){_.slideOffset=0;_.slideOffset+=_.slideWidth*Math.floor(_.options.slidesToShow/2)}if(_.options.vertical===false){targetLeft=slideIndex*_.slideWidth*-1+_.slideOffset}else{targetLeft=slideIndex*verticalHeight*-1+verticalOffset}if(_.options.variableWidth===true){if(_.slideCount<=_.options.slidesToShow||_.options.infinite===false){targetSlide=_.$slideTrack.children(".slick-slide").eq(slideIndex)}else{targetSlide=_.$slideTrack.children(".slick-slide").eq(slideIndex+_.options.slidesToShow)}if(_.options.rtl===true){if(targetSlide[0]){targetLeft=(_.$slideTrack.width()-targetSlide[0].offsetLeft-targetSlide.width())*-1}else{targetLeft=0}}else{targetLeft=targetSlide[0]?targetSlide[0].offsetLeft*-1:0}if(_.options.centerMode===true){if(_.slideCount<=_.options.slidesToShow||_.options.infinite===false){targetSlide=_.$slideTrack.children(".slick-slide").eq(slideIndex)}else{targetSlide=_.$slideTrack.children(".slick-slide").eq(slideIndex+_.options.slidesToShow+1)}if(_.options.rtl===true){if(targetSlide[0]){targetLeft=(_.$slideTrack.width()-targetSlide[0].offsetLeft-targetSlide.width())*-1}else{targetLeft=0}}else{targetLeft=targetSlide[0]?targetSlide[0].offsetLeft*-1:0}targetLeft+=(_.$list.width()-targetSlide.outerWidth())/2}}return targetLeft};Slick.prototype.getOption=Slick.prototype.slickGetOption=function(option){var _=this;return _.options[option]};Slick.prototype.getNavigableIndexes=function(){var _=this,breakPoint=0,counter=0,indexes=[],max;if(_.options.infinite===false){max=_.slideCount}else{breakPoint=_.options.slidesToScroll*-1;counter=_.options.slidesToScroll*-1;max=_.slideCount*2}while(breakPoint<max){indexes.push(breakPoint);breakPoint=counter+_.options.slidesToScroll;counter+=_.options.slidesToScroll<=_.options.slidesToShow?_.options.slidesToScroll:_.options.slidesToShow}return indexes};Slick.prototype.getSlick=function(){return this};Slick.prototype.getSlideCount=function(){var _=this,slidesTraversed,swipedSlide,centerOffset;centerOffset=_.options.centerMode===true?_.slideWidth*Math.floor(_.options.slidesToShow/2):0;if(_.options.swipeToSlide===true){_.$slideTrack.find(".slick-slide").each(function(index,slide){if(slide.offsetLeft-centerOffset+$(slide).outerWidth()/2>_.swipeLeft*-1){swipedSlide=slide;return false}});slidesTraversed=Math.abs($(swipedSlide).attr("data-slick-index")-_.currentSlide)||1;return slidesTraversed}else{return _.options.slidesToScroll}};Slick.prototype.goTo=Slick.prototype.slickGoTo=function(slide,dontAnimate){var _=this;_.changeSlide({data:{message:"index",index:parseInt(slide)}},dontAnimate)};Slick.prototype.init=function(creation){var _=this;if(!$(_.$slider).hasClass("slick-initialized")){$(_.$slider).addClass("slick-initialized");_.buildRows();_.buildOut();_.setProps();_.startLoad();_.loadSlider();_.initializeEvents();_.updateArrows();_.updateDots();_.checkResponsive(true);_.focusHandler()}if(creation){_.$slider.trigger("init",[_])}if(_.options.accessibility===true){_.initADA()}if(_.options.autoplay){_.paused=false;_.autoPlay()}};Slick.prototype.initADA=function(){var _=this,numDotGroups=Math.ceil(_.slideCount/_.options.slidesToShow),tabControlIndexes=_.getNavigableIndexes().filter(function(val){return val>=0&&val<_.slideCount});_.$slides.add(_.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});if(_.$dots!==null){_.$slides.not(_.$slideTrack.find(".slick-cloned")).each(function(i){var slideControlIndex=tabControlIndexes.indexOf(i);$(this).attr({role:"tabpanel",id:"slick-slide"+_.instanceUid+i,tabindex:-1});if(slideControlIndex!==-1){var ariaButtonControl="slick-slide-control"+_.instanceUid+slideControlIndex;if($("#"+ariaButtonControl).length){$(this).attr({"aria-describedby":ariaButtonControl})}}});_.$dots.attr("role","tablist").find("li").each(function(i){var mappedSlideIndex=tabControlIndexes[i];$(this).attr({role:"presentation"});$(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+_.instanceUid+i,"aria-controls":"slick-slide"+_.instanceUid+mappedSlideIndex,"aria-label":i+1+" of "+numDotGroups,"aria-selected":null,tabindex:"-1"})}).eq(_.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end()}for(var i=_.currentSlide,max=i+_.options.slidesToShow;i<max;i++){if(_.options.focusOnChange){_.$slides.eq(i).attr({tabindex:"0"})}else{_.$slides.eq(i).removeAttr("tabindex")}}_.activateADA()};Slick.prototype.initArrowEvents=function(){var _=this;if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},_.changeSlide);_.$nextArrow.off("click.slick").on("click.slick",{message:"next"},_.changeSlide);if(_.options.accessibility===true){_.$prevArrow.on("keydown.slick",_.keyHandler);_.$nextArrow.on("keydown.slick",_.keyHandler)}}};Slick.prototype.initDotEvents=function(){var _=this;if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){$("li",_.$dots).on("click.slick",{message:"index"},_.changeSlide);if(_.options.accessibility===true){_.$dots.on("keydown.slick",_.keyHandler)}}if(_.options.dots===true&&_.options.pauseOnDotsHover===true&&_.slideCount>_.options.slidesToShow){$("li",_.$dots).on("mouseenter.slick",$.proxy(_.interrupt,_,true)).on("mouseleave.slick",$.proxy(_.interrupt,_,false))}};Slick.prototype.initSlideEvents=function(){var _=this;if(_.options.pauseOnHover){_.$list.on("mouseenter.slick",$.proxy(_.interrupt,_,true));_.$list.on("mouseleave.slick",$.proxy(_.interrupt,_,false))}};Slick.prototype.initializeEvents=function(){var _=this;_.initArrowEvents();_.initDotEvents();_.initSlideEvents();_.$list.on("touchstart.slick mousedown.slick",{action:"start"},_.swipeHandler);_.$list.on("touchmove.slick mousemove.slick",{action:"move"},_.swipeHandler);_.$list.on("touchend.slick mouseup.slick",{action:"end"},_.swipeHandler);_.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},_.swipeHandler);_.$list.on("click.slick",_.clickHandler);$(document).on(_.visibilityChange,$.proxy(_.visibility,_));if(_.options.accessibility===true){_.$list.on("keydown.slick",_.keyHandler)}if(_.options.focusOnSelect===true){$(_.$slideTrack).children().on("click.slick",_.selectHandler)}$(window).on("orientationchange.slick.slick-"+_.instanceUid,$.proxy(_.orientationChange,_));$(window).on("resize.slick.slick-"+_.instanceUid,$.proxy(_.resize,_));$("[draggable!=true]",_.$slideTrack).on("dragstart",_.preventDefault);$(window).on("load.slick.slick-"+_.instanceUid,_.setPosition);$(_.setPosition)};Slick.prototype.initUI=function(){var _=this;if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow.show();_.$nextArrow.show()}if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){_.$dots.show()}};Slick.prototype.keyHandler=function(event){var _=this;if(!event.target.tagName.match("TEXTAREA|INPUT|SELECT")){if(event.keyCode===37&&_.options.accessibility===true){_.changeSlide({data:{message:_.options.rtl===true?"next":"previous"}})}else if(event.keyCode===39&&_.options.accessibility===true){_.changeSlide({data:{message:_.options.rtl===true?"previous":"next"}})}}};Slick.prototype.lazyLoad=function(){var _=this,loadRange,cloneRange,rangeStart,rangeEnd;function loadImages(imagesScope){$("img[data-lazy]",imagesScope).each(function(){var image=$(this),imageSource=$(this).attr("data-lazy"),imageSrcSet=$(this).attr("data-srcset"),imageSizes=$(this).attr("data-sizes")||_.$slider.attr("data-sizes"),imageToLoad=document.createElement("img");imageToLoad.onload=function(){image.animate({opacity:0},100,function(){if(imageSrcSet){image.attr("srcset",imageSrcSet);if(imageSizes){image.attr("sizes",imageSizes)}}image.attr("src",imageSource).animate({opacity:1},200,function(){image.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")});_.$slider.trigger("lazyLoaded",[_,image,imageSource])})};imageToLoad.onerror=function(){image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");_.$slider.trigger("lazyLoadError",[_,image,imageSource])};imageToLoad.src=imageSource})}if(_.options.centerMode===true){if(_.options.infinite===true){rangeStart=_.currentSlide+(_.options.slidesToShow/2+1);rangeEnd=rangeStart+_.options.slidesToShow+2}else{rangeStart=Math.max(0,_.currentSlide-(_.options.slidesToShow/2+1));rangeEnd=2+(_.options.slidesToShow/2+1)+_.currentSlide}}else{rangeStart=_.options.infinite?_.options.slidesToShow+_.currentSlide:_.currentSlide;rangeEnd=Math.ceil(rangeStart+_.options.slidesToShow);if(_.options.fade===true){if(rangeStart>0)rangeStart--;if(rangeEnd<=_.slideCount)rangeEnd++}}loadRange=_.$slider.find(".slick-slide").slice(rangeStart,rangeEnd);if(_.options.lazyLoad==="anticipated"){var prevSlide=rangeStart-1,nextSlide=rangeEnd,$slides=_.$slider.find(".slick-slide");for(var i=0;i<_.options.slidesToScroll;i++){if(prevSlide<0)prevSlide=_.slideCount-1;loadRange=loadRange.add($slides.eq(prevSlide));loadRange=loadRange.add($slides.eq(nextSlide));prevSlide--;nextSlide++}}loadImages(loadRange);if(_.slideCount<=_.options.slidesToShow){cloneRange=_.$slider.find(".slick-slide");loadImages(cloneRange)}else if(_.currentSlide>=_.slideCount-_.options.slidesToShow){cloneRange=_.$slider.find(".slick-cloned").slice(0,_.options.slidesToShow);loadImages(cloneRange)}else if(_.currentSlide===0){cloneRange=_.$slider.find(".slick-cloned").slice(_.options.slidesToShow*-1);loadImages(cloneRange)}};Slick.prototype.loadSlider=function(){var _=this;_.setPosition();_.$slideTrack.css({opacity:1});_.$slider.removeClass("slick-loading");_.initUI();if(_.options.lazyLoad==="progressive"){_.progressiveLazyLoad()}};Slick.prototype.next=Slick.prototype.slickNext=function(){var _=this;_.changeSlide({data:{message:"next"}})};Slick.prototype.orientationChange=function(){var _=this;_.checkResponsive();_.setPosition()};Slick.prototype.pause=Slick.prototype.slickPause=function(){var _=this;_.autoPlayClear();_.paused=true};Slick.prototype.play=Slick.prototype.slickPlay=function(){var _=this;_.autoPlay();_.options.autoplay=true;_.paused=false;_.focussed=false;_.interrupted=false};Slick.prototype.postSlide=function(index){var _=this;if(!_.unslicked){_.$slider.trigger("afterChange",[_,index]);_.animating=false;if(_.slideCount>_.options.slidesToShow){_.setPosition()}_.swipeLeft=null;if(_.options.autoplay){_.autoPlay()}if(_.options.accessibility===true){_.initADA();if(_.options.focusOnChange){var $currentSlide=$(_.$slides.get(_.currentSlide));$currentSlide.attr("tabindex",0).focus()}}}};Slick.prototype.prev=Slick.prototype.slickPrev=function(){var _=this;_.changeSlide({data:{message:"previous"}})};Slick.prototype.preventDefault=function(event){event.preventDefault()};Slick.prototype.progressiveLazyLoad=function(tryCount){tryCount=tryCount||1;var _=this,$imgsToLoad=$("img[data-lazy]",_.$slider),image,imageSource,imageSrcSet,imageSizes,imageToLoad;if($imgsToLoad.length){image=$imgsToLoad.first();imageSource=image.attr("data-lazy");imageSrcSet=image.attr("data-srcset");imageSizes=image.attr("data-sizes")||_.$slider.attr("data-sizes");imageToLoad=document.createElement("img");imageToLoad.onload=function(){if(imageSrcSet){image.attr("srcset",imageSrcSet);if(imageSizes){image.attr("sizes",imageSizes)}}image.attr("src",imageSource).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading");if(_.options.adaptiveHeight===true){_.setPosition()}_.$slider.trigger("lazyLoaded",[_,image,imageSource]);_.progressiveLazyLoad()};imageToLoad.onerror=function(){if(tryCount<3){setTimeout(function(){_.progressiveLazyLoad(tryCount+1)},500)}else{image.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");_.$slider.trigger("lazyLoadError",[_,image,imageSource]);_.progressiveLazyLoad()}};imageToLoad.src=imageSource}else{_.$slider.trigger("allImagesLoaded",[_])}};Slick.prototype.refresh=function(initializing){var _=this,currentSlide,lastVisibleIndex;lastVisibleIndex=_.slideCount-_.options.slidesToShow;if(!_.options.infinite&&_.currentSlide>lastVisibleIndex){_.currentSlide=lastVisibleIndex}if(_.slideCount<=_.options.slidesToShow){_.currentSlide=0}currentSlide=_.currentSlide;_.destroy(true);$.extend(_,_.initials,{currentSlide:currentSlide});_.init();if(!initializing){_.changeSlide({data:{message:"index",index:currentSlide}},false)}};Slick.prototype.registerBreakpoints=function(){var _=this,breakpoint,currentBreakpoint,l,responsiveSettings=_.options.responsive||null;if($.type(responsiveSettings)==="array"&&responsiveSettings.length){_.respondTo=_.options.respondTo||"window";for(breakpoint in responsiveSettings){l=_.breakpoints.length-1;if(responsiveSettings.hasOwnProperty(breakpoint)){currentBreakpoint=responsiveSettings[breakpoint].breakpoint;while(l>=0){if(_.breakpoints[l]&&_.breakpoints[l]===currentBreakpoint){_.breakpoints.splice(l,1)}l--}_.breakpoints.push(currentBreakpoint);_.breakpointSettings[currentBreakpoint]=responsiveSettings[breakpoint].settings}}_.breakpoints.sort(function(a,b){return _.options.mobileFirst?a-b:b-a})}};Slick.prototype.reinit=function(){var _=this;_.$slides=_.$slideTrack.children(_.options.slide).addClass("slick-slide");_.slideCount=_.$slides.length;if(_.currentSlide>=_.slideCount&&_.currentSlide!==0){_.currentSlide=_.currentSlide-_.options.slidesToScroll}if(_.slideCount<=_.options.slidesToShow){_.currentSlide=0}_.registerBreakpoints();_.setProps();_.setupInfinite();_.buildArrows();_.updateArrows();_.initArrowEvents();_.buildDots();_.updateDots();_.initDotEvents();_.cleanUpSlideEvents();_.initSlideEvents();_.checkResponsive(false,true);if(_.options.focusOnSelect===true){$(_.$slideTrack).children().on("click.slick",_.selectHandler)}_.setSlideClasses(typeof _.currentSlide==="number"?_.currentSlide:0);_.setPosition();_.focusHandler();_.paused=!_.options.autoplay;_.autoPlay();_.$slider.trigger("reInit",[_])};Slick.prototype.resize=function(){var _=this;if($(window).width()!==_.windowWidth){clearTimeout(_.windowDelay);_.windowDelay=window.setTimeout(function(){_.windowWidth=$(window).width();_.checkResponsive();if(!_.unslicked){_.setPosition()}},50)}};Slick.prototype.removeSlide=Slick.prototype.slickRemove=function(index,removeBefore,removeAll){var _=this;if(typeof index==="boolean"){removeBefore=index;index=removeBefore===true?0:_.slideCount-1}else{index=removeBefore===true?--index:index}if(_.slideCount<1||index<0||index>_.slideCount-1){return false}_.unload();if(removeAll===true){_.$slideTrack.children().remove()}else{_.$slideTrack.children(this.options.slide).eq(index).remove()}_.$slides=_.$slideTrack.children(this.options.slide);_.$slideTrack.children(this.options.slide).detach();

_.$slideTrack.append(_.$slides);_.$slidesCache=_.$slides;_.reinit()};Slick.prototype.setCSS=function(position){var _=this,positionProps={},x,y;if(_.options.rtl===true){position=-position}x=_.positionProp=="left"?Math.ceil(position)+"px":"0px";y=_.positionProp=="top"?Math.ceil(position)+"px":"0px";positionProps[_.positionProp]=position;if(_.transformsEnabled===false){_.$slideTrack.css(positionProps)}else{positionProps={};if(_.cssTransitions===false){positionProps[_.animType]="translate("+x+", "+y+")";_.$slideTrack.css(positionProps)}else{positionProps[_.animType]="translate3d("+x+", "+y+", 0px)";_.$slideTrack.css(positionProps)}}};Slick.prototype.setDimensions=function(){var _=this;if(_.options.vertical===false){if(_.options.centerMode===true){_.$list.css({padding:"0px "+_.options.centerPadding})}}else{_.$list.height(_.$slides.first().outerHeight(true)*_.options.slidesToShow);if(_.options.centerMode===true){_.$list.css({padding:_.options.centerPadding+" 0px"})}}_.listWidth=_.$list.width();_.listHeight=_.$list.height();if(_.options.vertical===false&&_.options.variableWidth===false){_.slideWidth=Math.ceil(_.listWidth/_.options.slidesToShow);_.$slideTrack.width(Math.ceil(_.slideWidth*_.$slideTrack.children(".slick-slide").length))}else if(_.options.variableWidth===true){_.$slideTrack.width(5e3*_.slideCount)}else{_.slideWidth=Math.ceil(_.listWidth);_.$slideTrack.height(Math.ceil(_.$slides.first().outerHeight(true)*_.$slideTrack.children(".slick-slide").length))}var offset=_.$slides.first().outerWidth(true)-_.$slides.first().width();if(_.options.variableWidth===false)_.$slideTrack.children(".slick-slide").width(_.slideWidth-offset)};Slick.prototype.setFade=function(){var _=this,targetLeft;_.$slides.each(function(index,element){targetLeft=_.slideWidth*index*-1;if(_.options.rtl===true){$(element).css({position:"relative",right:targetLeft,top:0,zIndex:_.options.zIndex-2,opacity:0})}else{$(element).css({position:"relative",left:targetLeft,top:0,zIndex:_.options.zIndex-2,opacity:0})}});_.$slides.eq(_.currentSlide).css({zIndex:_.options.zIndex-1,opacity:1})};Slick.prototype.setHeight=function(){var _=this;if(_.options.slidesToShow===1&&_.options.adaptiveHeight===true&&_.options.vertical===false){var targetHeight=_.$slides.eq(_.currentSlide).outerHeight(true);_.$list.css("height",targetHeight)}};Slick.prototype.setOption=Slick.prototype.slickSetOption=function(){var _=this,l,item,option,value,refresh=false,type;if($.type(arguments[0])==="object"){option=arguments[0];refresh=arguments[1];type="multiple"}else if($.type(arguments[0])==="string"){option=arguments[0];value=arguments[1];refresh=arguments[2];if(arguments[0]==="responsive"&&$.type(arguments[1])==="array"){type="responsive"}else if(typeof arguments[1]!=="undefined"){type="single"}}if(type==="single"){_.options[option]=value}else if(type==="multiple"){$.each(option,function(opt,val){_.options[opt]=val})}else if(type==="responsive"){for(item in value){if($.type(_.options.responsive)!=="array"){_.options.responsive=[value[item]]}else{l=_.options.responsive.length-1;while(l>=0){if(_.options.responsive[l].breakpoint===value[item].breakpoint){_.options.responsive.splice(l,1)}l--}_.options.responsive.push(value[item])}}}if(refresh){_.unload();_.reinit()}};Slick.prototype.setPosition=function(){var _=this;_.setDimensions();_.setHeight();if(_.options.fade===false){_.setCSS(_.getLeft(_.currentSlide))}else{_.setFade()}_.$slider.trigger("setPosition",[_])};Slick.prototype.setProps=function(){var _=this,bodyStyle=document.body.style;_.positionProp=_.options.vertical===true?"top":"left";if(_.positionProp==="top"){_.$slider.addClass("slick-vertical")}else{_.$slider.removeClass("slick-vertical")}if(bodyStyle.WebkitTransition!==undefined||bodyStyle.MozTransition!==undefined||bodyStyle.msTransition!==undefined){if(_.options.useCSS===true){_.cssTransitions=true}}if(_.options.fade){if(typeof _.options.zIndex==="number"){if(_.options.zIndex<3){_.options.zIndex=3}}else{_.options.zIndex=_.defaults.zIndex}}if(bodyStyle.OTransform!==undefined){_.animType="OTransform";_.transformType="-o-transform";_.transitionType="OTransition";if(bodyStyle.perspectiveProperty===undefined&&bodyStyle.webkitPerspective===undefined)_.animType=false}if(bodyStyle.MozTransform!==undefined){_.animType="MozTransform";_.transformType="-moz-transform";_.transitionType="MozTransition";if(bodyStyle.perspectiveProperty===undefined&&bodyStyle.MozPerspective===undefined)_.animType=false}if(bodyStyle.webkitTransform!==undefined){_.animType="webkitTransform";_.transformType="-webkit-transform";_.transitionType="webkitTransition";if(bodyStyle.perspectiveProperty===undefined&&bodyStyle.webkitPerspective===undefined)_.animType=false}if(bodyStyle.msTransform!==undefined){_.animType="msTransform";_.transformType="-ms-transform";_.transitionType="msTransition";if(bodyStyle.msTransform===undefined)_.animType=false}if(bodyStyle.transform!==undefined&&_.animType!==false){_.animType="transform";_.transformType="transform";_.transitionType="transition"}_.transformsEnabled=_.options.useTransform&&(_.animType!==null&&_.animType!==false)};Slick.prototype.setSlideClasses=function(index){var _=this,centerOffset,allSlides,indexOffset,remainder;allSlides=_.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");_.$slides.eq(index).addClass("slick-current");if(_.options.centerMode===true){var evenCoef=_.options.slidesToShow%2===0?1:0;centerOffset=Math.floor(_.options.slidesToShow/2);if(_.options.infinite===true){if(index>=centerOffset&&index<=_.slideCount-1-centerOffset){_.$slides.slice(index-centerOffset+evenCoef,index+centerOffset+1).addClass("slick-active").attr("aria-hidden","false")}else{indexOffset=_.options.slidesToShow+index;allSlides.slice(indexOffset-centerOffset+1+evenCoef,indexOffset+centerOffset+2).addClass("slick-active").attr("aria-hidden","false")}if(index===0){allSlides.eq(allSlides.length-1-_.options.slidesToShow).addClass("slick-center")}else if(index===_.slideCount-1){allSlides.eq(_.options.slidesToShow).addClass("slick-center")}}_.$slides.eq(index).addClass("slick-center")}else{if(index>=0&&index<=_.slideCount-_.options.slidesToShow){_.$slides.slice(index,index+_.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")}else if(allSlides.length<=_.options.slidesToShow){allSlides.addClass("slick-active").attr("aria-hidden","false")}else{remainder=_.slideCount%_.options.slidesToShow;indexOffset=_.options.infinite===true?_.options.slidesToShow+index:index;if(_.options.slidesToShow==_.options.slidesToScroll&&_.slideCount-index<_.options.slidesToShow){allSlides.slice(indexOffset-(_.options.slidesToShow-remainder),indexOffset+remainder).addClass("slick-active").attr("aria-hidden","false")}else{allSlides.slice(indexOffset,indexOffset+_.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")}}}if(_.options.lazyLoad==="ondemand"||_.options.lazyLoad==="anticipated"){_.lazyLoad()}};Slick.prototype.setupInfinite=function(){var _=this,i,slideIndex,infiniteCount;if(_.options.fade===true){_.options.centerMode=false}if(_.options.infinite===true&&_.options.fade===false){slideIndex=null;if(_.slideCount>_.options.slidesToShow){if(_.options.centerMode===true){infiniteCount=_.options.slidesToShow+1}else{infiniteCount=_.options.slidesToShow}for(i=_.slideCount;i>_.slideCount-infiniteCount;i-=1){slideIndex=i-1;$(_.$slides[slideIndex]).clone(true).attr("id","").attr("data-slick-index",slideIndex-_.slideCount).prependTo(_.$slideTrack).addClass("slick-cloned")}for(i=0;i<infiniteCount+_.slideCount;i+=1){slideIndex=i;$(_.$slides[slideIndex]).clone(true).attr("id","").attr("data-slick-index",slideIndex+_.slideCount).appendTo(_.$slideTrack).addClass("slick-cloned")}_.$slideTrack.find(".slick-cloned").find("[id]").each(function(){$(this).attr("id","")})}}};Slick.prototype.interrupt=function(toggle){var _=this;if(!toggle){_.autoPlay()}_.interrupted=toggle};Slick.prototype.selectHandler=function(event){var _=this;var targetElement=$(event.target).is(".slick-slide")?$(event.target):$(event.target).parents(".slick-slide");var index=parseInt(targetElement.attr("data-slick-index"));if(!index)index=0;if(_.slideCount<=_.options.slidesToShow){_.slideHandler(index,false,true);return}_.slideHandler(index)};Slick.prototype.slideHandler=function(index,sync,dontAnimate){var targetSlide,animSlide,oldSlide,slideLeft,targetLeft=null,_=this,navTarget;sync=sync||false;if(_.animating===true&&_.options.waitForAnimate===true){return}if(_.options.fade===true&&_.currentSlide===index){return}if(sync===false){_.asNavFor(index)}targetSlide=index;targetLeft=_.getLeft(targetSlide);slideLeft=_.getLeft(_.currentSlide);_.currentLeft=_.swipeLeft===null?slideLeft:_.swipeLeft;if(_.options.infinite===false&&_.options.centerMode===false&&(index<0||index>_.getDotCount()*_.options.slidesToScroll)){if(_.options.fade===false){targetSlide=_.currentSlide;if(dontAnimate!==true&&_.slideCount>_.options.slidesToShow){_.animateSlide(slideLeft,function(){_.postSlide(targetSlide)})}else{_.postSlide(targetSlide)}}return}else if(_.options.infinite===false&&_.options.centerMode===true&&(index<0||index>_.slideCount-_.options.slidesToScroll)){if(_.options.fade===false){targetSlide=_.currentSlide;if(dontAnimate!==true&&_.slideCount>_.options.slidesToShow){_.animateSlide(slideLeft,function(){_.postSlide(targetSlide)})}else{_.postSlide(targetSlide)}}return}if(_.options.autoplay){clearInterval(_.autoPlayTimer)}if(targetSlide<0){if(_.slideCount%_.options.slidesToScroll!==0){animSlide=_.slideCount-_.slideCount%_.options.slidesToScroll}else{animSlide=_.slideCount+targetSlide}}else if(targetSlide>=_.slideCount){if(_.slideCount%_.options.slidesToScroll!==0){animSlide=0}else{animSlide=targetSlide-_.slideCount}}else{animSlide=targetSlide}_.animating=true;_.$slider.trigger("beforeChange",[_,_.currentSlide,animSlide]);oldSlide=_.currentSlide;_.currentSlide=animSlide;_.setSlideClasses(_.currentSlide);if(_.options.asNavFor){navTarget=_.getNavTarget();navTarget=navTarget.slick("getSlick");if(navTarget.slideCount<=navTarget.options.slidesToShow){navTarget.setSlideClasses(_.currentSlide)}}_.updateDots();_.updateArrows();if(_.options.fade===true){if(dontAnimate!==true){_.fadeSlideOut(oldSlide);_.fadeSlide(animSlide,function(){_.postSlide(animSlide)})}else{_.postSlide(animSlide)}_.animateHeight();return}if(dontAnimate!==true&&_.slideCount>_.options.slidesToShow){_.animateSlide(targetLeft,function(){_.postSlide(animSlide)})}else{_.postSlide(animSlide)}};Slick.prototype.startLoad=function(){var _=this;if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow){_.$prevArrow.hide();_.$nextArrow.hide()}if(_.options.dots===true&&_.slideCount>_.options.slidesToShow){_.$dots.hide()}_.$slider.addClass("slick-loading")};Slick.prototype.swipeDirection=function(){var xDist,yDist,r,swipeAngle,_=this;xDist=_.touchObject.startX-_.touchObject.curX;yDist=_.touchObject.startY-_.touchObject.curY;r=Math.atan2(yDist,xDist);swipeAngle=Math.round(r*180/Math.PI);if(swipeAngle<0){swipeAngle=360-Math.abs(swipeAngle)}if(swipeAngle<=45&&swipeAngle>=0){return _.options.rtl===false?"left":"right"}if(swipeAngle<=360&&swipeAngle>=315){return _.options.rtl===false?"left":"right"}if(swipeAngle>=135&&swipeAngle<=225){return _.options.rtl===false?"right":"left"}if(_.options.verticalSwiping===true){if(swipeAngle>=35&&swipeAngle<=135){return"down"}else{return"up"}}return"vertical"};Slick.prototype.swipeEnd=function(event){var _=this,slideCount,direction;_.dragging=false;_.swiping=false;if(_.scrolling){_.scrolling=false;return false}_.interrupted=false;_.shouldClick=_.touchObject.swipeLength>10?false:true;if(_.touchObject.curX===undefined){return false}if(_.touchObject.edgeHit===true){_.$slider.trigger("edge",[_,_.swipeDirection()])}if(_.touchObject.swipeLength>=_.touchObject.minSwipe){direction=_.swipeDirection();switch(direction){case"left":case"down":slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide+_.getSlideCount()):_.currentSlide+_.getSlideCount();_.currentDirection=0;break;case"right":case"up":slideCount=_.options.swipeToSlide?_.checkNavigable(_.currentSlide-_.getSlideCount()):_.currentSlide-_.getSlideCount();_.currentDirection=1;break;default:}if(direction!="vertical"){_.slideHandler(slideCount);_.touchObject={};_.$slider.trigger("swipe",[_,direction])}}else{if(_.touchObject.startX!==_.touchObject.curX){_.slideHandler(_.currentSlide);_.touchObject={}}}};Slick.prototype.swipeHandler=function(event){var _=this;if(_.options.swipe===false||"ontouchend"in document&&_.options.swipe===false){return}else if(_.options.draggable===false&&event.type.indexOf("mouse")!==-1){return}_.touchObject.fingerCount=event.originalEvent&&event.originalEvent.touches!==undefined?event.originalEvent.touches.length:1;_.touchObject.minSwipe=_.listWidth/_.options.touchThreshold;if(_.options.verticalSwiping===true){_.touchObject.minSwipe=_.listHeight/_.options.touchThreshold}switch(event.data.action){case"start":_.swipeStart(event);break;case"move":_.swipeMove(event);break;case"end":_.swipeEnd(event);break}};Slick.prototype.swipeMove=function(event){var _=this,edgeWasHit=false,curLeft,swipeDirection,swipeLength,positionOffset,touches,verticalSwipeLength;touches=event.originalEvent!==undefined?event.originalEvent.touches:null;if(!_.dragging||_.scrolling||touches&&touches.length!==1){return false}curLeft=_.getLeft(_.currentSlide);_.touchObject.curX=touches!==undefined?touches[0].pageX:event.clientX;_.touchObject.curY=touches!==undefined?touches[0].pageY:event.clientY;_.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curX-_.touchObject.startX,2)));verticalSwipeLength=Math.round(Math.sqrt(Math.pow(_.touchObject.curY-_.touchObject.startY,2)));if(!_.options.verticalSwiping&&!_.swiping&&verticalSwipeLength>4){_.scrolling=true;return false}if(_.options.verticalSwiping===true){_.touchObject.swipeLength=verticalSwipeLength}swipeDirection=_.swipeDirection();if(event.originalEvent!==undefined&&_.touchObject.swipeLength>4){_.swiping=true;event.preventDefault()}positionOffset=(_.options.rtl===false?1:-1)*(_.touchObject.curX>_.touchObject.startX?1:-1);if(_.options.verticalSwiping===true){positionOffset=_.touchObject.curY>_.touchObject.startY?1:-1}swipeLength=_.touchObject.swipeLength;_.touchObject.edgeHit=false;if(_.options.infinite===false){if(_.currentSlide===0&&swipeDirection==="right"||_.currentSlide>=_.getDotCount()&&swipeDirection==="left"){swipeLength=_.touchObject.swipeLength*_.options.edgeFriction;_.touchObject.edgeHit=true}}if(_.options.vertical===false){_.swipeLeft=curLeft+swipeLength*positionOffset}else{_.swipeLeft=curLeft+swipeLength*(_.$list.height()/_.listWidth)*positionOffset}if(_.options.verticalSwiping===true){_.swipeLeft=curLeft+swipeLength*positionOffset}if(_.options.fade===true||_.options.touchMove===false){return false}if(_.animating===true){_.swipeLeft=null;return false}_.setCSS(_.swipeLeft)};Slick.prototype.swipeStart=function(event){var _=this,touches;_.interrupted=true;if(_.touchObject.fingerCount!==1||_.slideCount<=_.options.slidesToShow){_.touchObject={};return false}if(event.originalEvent!==undefined&&event.originalEvent.touches!==undefined){touches=event.originalEvent.touches[0]}_.touchObject.startX=_.touchObject.curX=touches!==undefined?touches.pageX:event.clientX;_.touchObject.startY=_.touchObject.curY=touches!==undefined?touches.pageY:event.clientY;_.dragging=true};Slick.prototype.unfilterSlides=Slick.prototype.slickUnfilter=function(){var _=this;if(_.$slidesCache!==null){_.unload();_.$slideTrack.children(this.options.slide).detach();_.$slidesCache.appendTo(_.$slideTrack);_.reinit()}};Slick.prototype.unload=function(){var _=this;$(".slick-cloned",_.$slider).remove();if(_.$dots){_.$dots.remove()}if(_.$prevArrow&&_.htmlExpr.test(_.options.prevArrow)){_.$prevArrow.remove()}if(_.$nextArrow&&_.htmlExpr.test(_.options.nextArrow)){_.$nextArrow.remove()}_.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")};Slick.prototype.unslick=function(fromBreakpoint){var _=this;_.$slider.trigger("unslick",[_,fromBreakpoint]);_.destroy()};Slick.prototype.updateArrows=function(){var _=this,centerOffset;centerOffset=Math.floor(_.options.slidesToShow/2);if(_.options.arrows===true&&_.slideCount>_.options.slidesToShow&&!_.options.infinite){_.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false");_.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false");if(_.currentSlide===0){_.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true");_.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")}else if(_.currentSlide>=_.slideCount-_.options.slidesToShow&&_.options.centerMode===false){_.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");_.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")}else if(_.currentSlide>=_.slideCount-1&&_.options.centerMode===true){_.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");_.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")}}};Slick.prototype.updateDots=function(){var _=this;if(_.$dots!==null){_.$dots.find("li").removeClass("slick-active").end();_.$dots.find("li").eq(Math.floor(_.currentSlide/_.options.slidesToScroll)).addClass("slick-active")}};Slick.prototype.visibility=function(){var _=this;if(_.options.autoplay){if(document[_.hidden]){_.interrupted=true}else{_.interrupted=false}}};$.fn.slick=function(){var _=this,opt=arguments[0],args=Array.prototype.slice.call(arguments,1),l=_.length,i,ret;for(i=0;i<l;i++){if(typeof opt=="object"||typeof opt=="undefined")_[i].slick=new Slick(_[i],opt);else ret=_[i].slick[opt].apply(_[i].slick,args);if(typeof ret!="undefined")return ret}return _}});
(function(global,factory){if(typeof define==="function"&&define.amd)define(function(){return factory(global,global.document,undefined)});else if(typeof module==="object"&&typeof module.exports==="object")module.exports=factory(global,global.document,undefined);else factory(global,global.document,undefined)})(typeof window!=="undefined"?window:this,function(window,document,undefined){"use strict";var PLUGINNAME="OverlayScrollbars";var TYPES={o:"object",f:"function",a:"array",s:"string",b:"boolean",n:"number",u:"undefined",z:"null"};var LEXICON={c:"class",s:"style",i:"id",l:"length",p:"prototype",oH:"offsetHeight",cH:"clientHeight",sH:"scrollHeight",oW:"offsetWidth",cW:"clientWidth",sW:"scrollWidth",hOP:"hasOwnProperty",bCR:"getBoundingClientRect"};var VENDORS=function(){var jsCache={};var cssCache={};var cssPrefixes=["-webkit-","-moz-","-o-","-ms-"];var jsPrefixes=["WebKit","Moz","O","MS"];function firstLetterToUpper(str){return str.charAt(0).toUpperCase()+str.slice(1)}return{_cssPrefixes:cssPrefixes,_jsPrefixes:jsPrefixes,_cssProperty:function(name){var result=cssCache[name];if(cssCache[LEXICON.hOP](name))return result;var uppercasedName=firstLetterToUpper(name);var elmStyle=document.createElement("div")[LEXICON.s];var resultPossibilities;var i=0;var v;var currVendorWithoutDashes;for(;i<cssPrefixes.length;i++){currVendorWithoutDashes=cssPrefixes[i].replace(/-/g,"");resultPossibilities=[name,cssPrefixes[i]+name,currVendorWithoutDashes+uppercasedName,firstLetterToUpper(currVendorWithoutDashes)+uppercasedName];for(v=0;v<resultPossibilities[LEXICON.l];v++){if(elmStyle[resultPossibilities[v]]!==undefined){result=resultPossibilities[v];break}}}cssCache[name]=result;return result},_jsAPI:function(name,isInterface,fallback){var i=0;var result=jsCache[name];if(!jsCache[LEXICON.hOP](name)){result=window[name];for(;i<jsPrefixes[LEXICON.l];i++)result=result||window[(isInterface?jsPrefixes[i]:jsPrefixes[i].toLowerCase())+firstLetterToUpper(name)];jsCache[name]=result}return result||fallback}}}();var COMPATIBILITY=function(){function windowSize(x){return x?window.innerWidth||document.documentElement[LEXICON.cW]||document.body[LEXICON.cW]:window.innerHeight||document.documentElement[LEXICON.cH]||document.body[LEXICON.cH]}function bind(func,thisObj){if(typeof func!=TYPES.f){throw"Can't bind function!"}var proto=LEXICON.p;var aArgs=Array[proto].slice.call(arguments,2);var fNOP=function(){};var fBound=function(){return func.apply(this instanceof fNOP?this:thisObj,aArgs.concat(Array[proto].slice.call(arguments)))};if(func[proto])fNOP[proto]=func[proto];fBound[proto]=new fNOP;return fBound}return{wW:bind(windowSize,0,true),wH:bind(windowSize,0),mO:bind(VENDORS._jsAPI,0,"MutationObserver",true),rO:bind(VENDORS._jsAPI,0,"ResizeObserver",true),/**
                 * Gets the RequestAnimationFrame method or it's corresponding polyfill.
                 * @returns {*|Function} The RequestAnimationFrame method or it's corresponding polyfill.
                 */
rAF:bind(VENDORS._jsAPI,0,"requestAnimationFrame",false,function(func){return window.setTimeout(func,1e3/60)}),/**
                 * Gets the CancelAnimationFrame method or it's corresponding polyfill.
                 * @returns {*|Function} The CancelAnimationFrame method or it's corresponding polyfill.
                 */
cAF:bind(VENDORS._jsAPI,0,"cancelAnimationFrame",false,function(id){return window.clearTimeout(id)}),now:function(){return Date.now&&Date.now()||(new Date).getTime()},stpP:function(event){if(event.stopPropagation)event.stopPropagation();else event.cancelBubble=true},prvD:function(event){if(event.preventDefault&&event.cancelable)event.preventDefault();else event.returnValue=false},page:function(event){event=event.originalEvent||event;var strPage="page";var strClient="client";var strX="X";var strY="Y";var target=event.target||event.srcElement||document;var eventDoc=target.ownerDocument||document;var doc=eventDoc.documentElement;var body=eventDoc.body;if(event.touches!==undefined){var touch=event.touches[0];return{x:touch[strPage+strX],y:touch[strPage+strY]}}if(!event[strPage+strX]&&event[strClient+strX]&&event[strClient+strX]!=null){return{x:event[strClient+strX]+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),y:event[strClient+strY]+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}}return{x:event[strPage+strX],y:event[strPage+strY]}},mBtn:function(event){var button=event.button;if(!event.which&&button!==undefined)return button&1?1:button&2?3:button&4?2:0;else return event.which},inA:function(item,arr){for(var i=0;i<arr[LEXICON.l];i++)try{if(arr[i]===item)return i}catch(e){}return-1},isA:function(arr){var def=Array.isArray;return def?def(arr):this.type(arr)==TYPES.a},type:function(obj){if(obj===undefined)return obj+"";if(obj===null)return obj+"";return Object[LEXICON.p].toString.call(obj).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},bind:bind}}();var MATH=Math;var JQUERY=window.jQuery;var EASING=function(){var _easingsMath={p:MATH.PI,c:MATH.cos,s:MATH.sin,w:MATH.pow,t:MATH.sqrt,n:MATH.asin,a:MATH.abs,o:1.70158};return{swing:function(x,t,b,c,d){return.5-_easingsMath.c(x*_easingsMath.p)/2},linear:function(x,t,b,c,d){return x},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t+b:-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t*t+b:c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*_easingsMath.c(t/d*(_easingsMath.p/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*_easingsMath.s(t/d*(_easingsMath.p/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(_easingsMath.c(_easingsMath.p*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return t==0?b:c*_easingsMath.w(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-_easingsMath.w(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*_easingsMath.w(2,10*(t-1))+b;return c/2*(-_easingsMath.w(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(_easingsMath.t(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*_easingsMath.t(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){return(t/=d/2)<1?-c/2*(_easingsMath.t(1-t*t)-1)+b:c/2*(_easingsMath.t(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=_easingsMath.o;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<_easingsMath.a(c)){a=c;s=p/4}else s=p/(2*_easingsMath.p)*_easingsMath.n(c/a);return-(a*_easingsMath.w(2,10*(t-=1))*_easingsMath.s((t*d-s)*(2*_easingsMath.p)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=_easingsMath.o;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<_easingsMath.a(c)){a=c;s=p/4}else s=p/(2*_easingsMath.p)*_easingsMath.n(c/a);return a*_easingsMath.w(2,-10*t)*_easingsMath.s((t*d-s)*(2*_easingsMath.p)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=_easingsMath.o;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<_easingsMath.a(c)){a=c;s=p/4}else s=p/(2*_easingsMath.p)*_easingsMath.n(c/a);if(t<1)return-.5*(a*_easingsMath.w(2,10*(t-=1))*_easingsMath.s((t*d-s)*(2*_easingsMath.p)/p))+b;return a*_easingsMath.w(2,-10*(t-=1))*_easingsMath.s((t*d-s)*(2*_easingsMath.p)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){s=s||_easingsMath.o;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){s=s||_easingsMath.o;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){s=s||_easingsMath.o;return(t/=d/2)<1?c/2*(t*t*(((s*=1.525)+1)*t-s))+b:c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-this.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){var o=7.5625;if((t/=d)<1/2.75){return c*(o*t*t)+b}else if(t<2/2.75){return c*(o*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(o*(t-=2.25/2.75)*t+.9375)+b}else{return c*(o*(t-=2.625/2.75)*t+.984375)+b}},easeInOutBounce:function(x,t,b,c,d){return t<d/2?this.easeInBounce(x,t*2,0,c,d)*.5+b:this.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b}}}();var FRAMEWORK=function(){var _rnothtmlwhite=/[^\x20\t\r\n\f]+/g;var _strSpace=" ";var _strEmpty="";var _strScrollLeft="scrollLeft";var _strScrollTop="scrollTop";var _animations=[];var _type=COMPATIBILITY.type;var _cssNumber={animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true};function extend(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments[LEXICON.l],deep=false;if(_type(target)==TYPES.b){deep=target;target=arguments[1]||{};i=2}if(_type(target)!=TYPES.o&&!_type(target)==TYPES.f){target={}}if(length===i){target=FakejQuery;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=COMPATIBILITY.isA(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&COMPATIBILITY.isA(src)?src:[]}else{clone=src&&isPlainObject(src)?src:{}}target[name]=extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target}function inArray(item,arr,fromIndex){for(var i=fromIndex||0;i<arr[LEXICON.l];i++)if(arr[i]===item)return i;return-1}function isFunction(obj){return _type(obj)==TYPES.f}function isEmptyObject(obj){for(var name in obj)return false;return true}function isPlainObject(obj){if(!obj||_type(obj)!=TYPES.o)return false;var key;var proto=LEXICON.p;var hasOwnProperty=Object[proto].hasOwnProperty;var hasOwnConstructor=hasOwnProperty.call(obj,"constructor");var hasIsPrototypeOf=obj.constructor&&obj.constructor[proto]&&hasOwnProperty.call(obj.constructor[proto],"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf){return false}for(key in obj){}return _type(key)==TYPES.u||hasOwnProperty.call(obj,key)}function each(obj,callback){var i=0;if(isArrayLike(obj)){for(;i<obj[LEXICON.l];i++){if(callback.call(obj[i],i,obj[i])===false)break}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false)break}}return obj}function isArrayLike(obj){var length=!!obj&&[LEXICON.l]in obj&&obj[LEXICON.l];var t=_type(obj);return isFunction(t)?false:t==TYPES.a||length===0||_type(length)==TYPES.n&&length>0&&length-1 in obj}function stripAndCollapse(value){var tokens=value.match(_rnothtmlwhite)||[];return tokens.join(_strSpace)}function matches(elem,selector){var nodeList=(elem.parentNode||document).querySelectorAll(selector)||[];var i=nodeList[LEXICON.l];while(i--)if(nodeList[i]==elem)return true;return false}function insertAdjacentElement(el,strategy,child){if(_type(child)==TYPES.a){for(var i=0;i<child[LEXICON.l];i++)insertAdjacentElement(el,strategy,child[i])}else if(_type(child)==TYPES.s)el.insertAdjacentHTML(strategy,child);else el.insertAdjacentElement(strategy,child.nodeType?child:child[0])}function setCSSVal(el,prop,val){try{if(el[LEXICON.s][prop]!==undefined)el[LEXICON.s][prop]=parseCSSVal(prop,val)}catch(e){}}function parseCSSVal(prop,val){if(!_cssNumber[prop.toLowerCase()]&&_type(val)==TYPES.n)val+="px";return val}function startNextAnimationInQ(animObj,removeFromQ){var index;var nextAnim;if(removeFromQ!==false)animObj.q.splice(0,1);if(animObj.q[LEXICON.l]>0){nextAnim=animObj.q[0];animate(animObj.el,nextAnim.props,nextAnim.duration,nextAnim.easing,nextAnim.complete,true)}else{index=inArray(animObj,_animations);if(index>-1)_animations.splice(index,1)}}function setAnimationValue(el,prop,value){if(prop===_strScrollLeft||prop===_strScrollTop)el[prop]=value;else setCSSVal(el,prop,value)}function animate(el,props,options,easing,complete,guaranteedNext){var hasOptions=isPlainObject(options);var from={};var to={};var i=0;var key;var animObj;var start;var progress;var step;var specialEasing;var duration;if(hasOptions){easing=options.easing;start=options.start;progress=options.progress;step=options.step;specialEasing=options.specialEasing;complete=options.complete;duration=options.duration}else duration=options;specialEasing=specialEasing||{};duration=duration||400;easing=easing||"swing";guaranteedNext=guaranteedNext||false;for(;i<_animations[LEXICON.l];i++){if(_animations[i].el===el){animObj=_animations[i];break}}if(!animObj){animObj={el:el,q:[]};_animations.push(animObj)}for(key in props){if(key===_strScrollLeft||key===_strScrollTop)from[key]=el[key];else from[key]=FakejQuery(el).css(key)}for(key in from){if(from[key]!==props[key]&&props[key]!==undefined)to[key]=props[key]}if(!isEmptyObject(to)){var timeNow;var end;var percent;var fromVal;var toVal;var easedVal;var timeStart;var frame;var elapsed;var qPos=guaranteedNext?0:inArray(qObj,animObj.q);var qObj={props:to,duration:hasOptions?options:duration,easing:easing,complete:complete};if(qPos===-1){qPos=animObj.q[LEXICON.l];animObj.q.push(qObj)}if(qPos===0){if(duration>0){timeStart=COMPATIBILITY.now();frame=function(){timeNow=COMPATIBILITY.now();elapsed=timeNow-timeStart;end=qObj.stop||elapsed>=duration;percent=1-(MATH.max(0,timeStart+duration-timeNow)/duration||0);for(key in to){fromVal=parseFloat(from[key]);toVal=parseFloat(to[key]);easedVal=(toVal-fromVal)*EASING[specialEasing[key]||easing](percent,percent*duration,0,1,duration)+fromVal;setAnimationValue(el,key,easedVal);if(isFunction(step)){step(easedVal,{elem:el,prop:key,start:fromVal,now:easedVal,end:toVal,pos:percent,options:{easing:easing,speacialEasing:specialEasing,duration:duration,complete:complete,step:step},startTime:timeStart})}}if(isFunction(progress))progress({},percent,MATH.max(0,duration-elapsed));if(end){startNextAnimationInQ(animObj);if(isFunction(complete))complete()}else qObj.frame=COMPATIBILITY.rAF()(frame)};qObj.frame=COMPATIBILITY.rAF()(frame)}else{for(key in to)setAnimationValue(el,key,to[key]);startNextAnimationInQ(animObj)}}}else if(guaranteedNext)startNextAnimationInQ(animObj)}function stop(el,clearQ,jumpToEnd){var animObj;var qObj;var key;var i=0;for(;i<_animations[LEXICON.l];i++){animObj=_animations[i];if(animObj.el===el){if(animObj.q[LEXICON.l]>0){qObj=animObj.q[0];qObj.stop=true;COMPATIBILITY.cAF()(qObj.frame);animObj.q.splice(0,1);if(jumpToEnd)for(key in qObj.props)setAnimationValue(el,key,qObj.props[key]);if(clearQ)animObj.q=[];else startNextAnimationInQ(animObj,false)}break}}}function elementIsVisible(el){return!!(el[LEXICON.oW]||el[LEXICON.oH]||el.getClientRects()[LEXICON.l])}function FakejQuery(selector){if(arguments[LEXICON.l]===0)return this;var base=new FakejQuery;var elements=selector;var i=0;var elms;var el;if(_type(selector)==TYPES.s){elements=[];if(selector.charAt(0)==="<"){el=document.createElement("div");el.innerHTML=selector;elms=el.children}else{elms=document.querySelectorAll(selector)}for(;i<elms[LEXICON.l];i++)elements.push(elms[i])}if(elements){if(_type(elements)!=TYPES.s&&(!isArrayLike(elements)||elements===window||elements===elements.self))elements=[elements];for(i=0;i<elements[LEXICON.l];i++)base[i]=elements[i];base[LEXICON.l]=elements[LEXICON.l]}return base}FakejQuery[LEXICON.p]={on:function(eventName,handler){eventName=(eventName||_strEmpty).match(_rnothtmlwhite)||[_strEmpty];var eventNameLength=eventName[LEXICON.l];var i=0;var el;return this.each(function(){el=this;try{if(el.addEventListener){for(;i<eventNameLength;i++)el.addEventListener(eventName[i],handler)}else if(el.detachEvent){for(;i<eventNameLength;i++)el.attachEvent("on"+eventName[i],handler)}}catch(e){}})},off:function(eventName,handler){eventName=(eventName||_strEmpty).match(_rnothtmlwhite)||[_strEmpty];var eventNameLength=eventName[LEXICON.l];var i=0;var el;return this.each(function(){el=this;try{if(el.removeEventListener){for(;i<eventNameLength;i++)el.removeEventListener(eventName[i],handler)}else if(el.detachEvent){for(;i<eventNameLength;i++)el.detachEvent("on"+eventName[i],handler)}}catch(e){}})},one:function(eventName,handler){eventName=(eventName||_strEmpty).match(_rnothtmlwhite)||[_strEmpty];return this.each(function(){var el=FakejQuery(this);FakejQuery.each(eventName,function(i,oneEventName){var oneHandler=function(e){handler.call(this,e);el.off(oneEventName,oneHandler)};el.on(oneEventName,oneHandler)})})},trigger:function(eventName){var el;var event;return this.each(function(){el=this;if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventName,true,false);el.dispatchEvent(event)}else{el.fireEvent("on"+eventName)}})},append:function(child){return this.each(function(){insertAdjacentElement(this,"beforeend",child)})},prepend:function(child){return this.each(function(){insertAdjacentElement(this,"afterbegin",child)})},before:function(child){return this.each(function(){insertAdjacentElement(this,"beforebegin",child)})},after:function(child){return this.each(function(){insertAdjacentElement(this,"afterend",child)})},remove:function(){return this.each(function(){var el=this;var parentNode=el.parentNode;if(parentNode!=null)parentNode.removeChild(el)})},unwrap:function(){var parents=[];var i;var el;var parent;this.each(function(){parent=this.parentNode;if(inArray(parent,parents)===-1)parents.push(parent)});for(i=0;i<parents[LEXICON.l];i++){el=parents[i];parent=el.parentNode;while(el.firstChild)parent.insertBefore(el.firstChild,el);parent.removeChild(el)}return this},wrapAll:function(wrapperHTML){var i;var nodes=this;var wrapper=FakejQuery(wrapperHTML)[0];var deepest=wrapper;var parent=nodes[0].parentNode;var previousSibling=nodes[0].previousSibling;while(deepest.childNodes[LEXICON.l]>0)deepest=deepest.childNodes[0];for(i=0;nodes[LEXICON.l]-i;deepest.firstChild===nodes[0]&&i++)deepest.appendChild(nodes[i]);var nextSibling=previousSibling?previousSibling.nextSibling:parent.firstChild;parent.insertBefore(wrapper,nextSibling);return this},wrapInner:function(wrapperHTML){return this.each(function(){var el=FakejQuery(this);var contents=el.contents();if(contents[LEXICON.l])contents.wrapAll(wrapperHTML);else el.append(wrapperHTML)})},wrap:function(wrapperHTML){return this.each(function(){FakejQuery(this).wrapAll(wrapperHTML)})},
//DOM NODE MANIPULATION / INFORMATION:
css:function(styles,val){var el;var key;var cptStyle;var getCptStyle=window.getComputedStyle;if(_type(styles)==TYPES.s){if(val===undefined){el=this[0];cptStyle=getCptStyle?getCptStyle(el,null):el.currentStyle[styles];return getCptStyle?cptStyle!=null?cptStyle.getPropertyValue(styles):el[LEXICON.s][styles]:cptStyle}else{return this.each(function(){setCSSVal(this,styles,val)})}}else{return this.each(function(){for(key in styles)setCSSVal(this,key,styles[key])})}},hasClass:function(className){var elem,i=0;var classNamePrepared=_strSpace+className+_strSpace;var classList;while(elem=this[i++]){classList=elem.classList;if(classList&&classList.contains(className))return true;else if(elem.nodeType===1&&(_strSpace+stripAndCollapse(elem.className+_strEmpty)+_strSpace).indexOf(classNamePrepared)>-1)return true}return false},addClass:function(className){var classes;var elem;var cur;var curValue;var clazz;var finalValue;var supportClassList;var elmClassList;var i=0;var v=0;if(className){classes=className.match(_rnothtmlwhite)||[];while(elem=this[i++]){elmClassList=elem.classList;if(supportClassList===undefined)supportClassList=elmClassList!==undefined;if(supportClassList){while(clazz=classes[v++])elmClassList.add(clazz)}else{curValue=elem.className+_strEmpty;cur=elem.nodeType===1&&_strSpace+stripAndCollapse(curValue)+_strSpace;if(cur){while(clazz=classes[v++])if(cur.indexOf(_strSpace+clazz+_strSpace)<0)cur+=clazz+_strSpace;finalValue=stripAndCollapse(cur);if(curValue!==finalValue)elem.className=finalValue}}}}return this},removeClass:function(className){var classes;var elem;var cur;var curValue;var clazz;var finalValue;var supportClassList;var elmClassList;var i=0;var v=0;if(className){classes=className.match(_rnothtmlwhite)||[];while(elem=this[i++]){elmClassList=elem.classList;if(supportClassList===undefined)supportClassList=elmClassList!==undefined;if(supportClassList){while(clazz=classes[v++])elmClassList.remove(clazz)}else{curValue=elem.className+_strEmpty;cur=elem.nodeType===1&&_strSpace+stripAndCollapse(curValue)+_strSpace;if(cur){while(clazz=classes[v++])while(cur.indexOf(_strSpace+clazz+_strSpace)>-1)cur=cur.replace(_strSpace+clazz+_strSpace,_strSpace);finalValue=stripAndCollapse(cur);if(curValue!==finalValue)elem.className=finalValue}}}}return this},hide:function(){return this.each(function(){this[LEXICON.s].display="none"})},show:function(){return this.each(function(){this[LEXICON.s].display="block"})},attr:function(attrName,value){var i=0;var el;while(el=this[i++]){if(value===undefined)return el.getAttribute(attrName);el.setAttribute(attrName,value)}return this},removeAttr:function(attrName){return this.each(function(){this.removeAttribute(attrName)})},offset:function(){var el=this[0];var rect=el[LEXICON.bCR]();var scrollLeft=window.pageXOffset||document.documentElement[_strScrollLeft];var scrollTop=window.pageYOffset||document.documentElement[_strScrollTop];return{top:rect.top+scrollTop,left:rect.left+scrollLeft}},position:function(){var el=this[0];return{top:el.offsetTop,left:el.offsetLeft}},scrollLeft:function(value){var i=0;var el;while(el=this[i++]){if(value===undefined)return el[_strScrollLeft];el[_strScrollLeft]=value}return this},scrollTop:function(value){var i=0;var el;while(el=this[i++]){if(value===undefined)return el[_strScrollTop];el[_strScrollTop]=value}return this},val:function(value){var el=this[0];if(!value)return el.value;el.value=value;return this},
//DOM TRAVERSAL / FILTERING:
first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(index){return FakejQuery(this[index>=0?index:this[LEXICON.l]+index])},find:function(selector){var children=[];var i;this.each(function(){var el=this;var ch=el.querySelectorAll(selector);for(i=0;i<ch[LEXICON.l];i++)children.push(ch[i])});return FakejQuery(children)},children:function(selector){var children=[];var el;var ch;var i;this.each(function(){ch=this.children;for(i=0;i<ch[LEXICON.l];i++){el=ch[i];if(selector){if(el.matches&&el.matches(selector)||matches(el,selector))children.push(el)}else children.push(el)}});return FakejQuery(children)},parent:function(selector){var parents=[];var parent;this.each(function(){parent=this.parentNode;if(selector?FakejQuery(parent).is(selector):true)parents.push(parent)});return FakejQuery(parents)},is:function(selector){var el;var i;for(i=0;i<this[LEXICON.l];i++){el=this[i];if(selector===":visible")return elementIsVisible(el);if(selector===":hidden")return!elementIsVisible(el);if(el.matches&&el.matches(selector)||matches(el,selector))return true}return false},contents:function(){var contents=[];var childs;var i;this.each(function(){childs=this.childNodes;for(i=0;i<childs[LEXICON.l];i++)contents.push(childs[i])});return FakejQuery(contents)},each:function(callback){return each(this,callback)},
//ANIMATION:
animate:function(props,duration,easing,complete){return this.each(function(){animate(this,props,duration,easing,complete)})},stop:function(clearQ,jump){return this.each(function(){stop(this,clearQ,jump)})}};extend(FakejQuery,{extend:extend,inArray:inArray,isEmptyObject:isEmptyObject,isPlainObject:isPlainObject,each:each});return FakejQuery}();var INSTANCES=function(){var _targets=[];var _instancePropertyString="__overlayScrollbars__";return function(target,instance){var argLen=arguments[LEXICON.l];if(argLen<1){return _targets}else{if(instance){target[_instancePropertyString]=instance;_targets.push(target)}else{var index=COMPATIBILITY.inA(target,_targets);if(index>-1){if(argLen>1){delete target[_instancePropertyString];_targets.splice(index,1)}else{return _targets[index][_instancePropertyString]}}}}}}();var PLUGIN=function(){var _plugin;var _pluginsGlobals;var _pluginsAutoUpdateLoop;var _pluginsExtensions=[];var _pluginsOptions=function(){var type=COMPATIBILITY.type;var possibleTemplateTypes=[TYPES.b,TYPES.n,TYPES.s,TYPES.a,TYPES.o,TYPES.f,TYPES.z];var restrictedStringsSplit=" ";var restrictedStringsPossibilitiesSplit=":";var classNameAllowedValues=[TYPES.z,TYPES.s];var numberAllowedValues=TYPES.n;var booleanNullAllowedValues=[TYPES.z,TYPES.b];var booleanTrueTemplate=[true,TYPES.b];var booleanFalseTemplate=[false,TYPES.b];var callbackTemplate=[null,[TYPES.z,TYPES.f]];var inheritedAttrsTemplate=[["style","class"],[TYPES.s,TYPES.a,TYPES.z]];var resizeAllowedValues="n:none b:both h:horizontal v:vertical";var overflowBehaviorAllowedValues="v-h:visible-hidden v-s:visible-scroll s:scroll h:hidden";var scrollbarsVisibilityAllowedValues="v:visible h:hidden a:auto";var scrollbarsAutoHideAllowedValues="n:never s:scroll l:leave m:move";var optionsDefaultsAndTemplate={className:["os-theme-dark",classNameAllowedValues],resize:["none",resizeAllowedValues],sizeAutoCapable:booleanTrueTemplate,clipAlways:booleanTrueTemplate,normalizeRTL:booleanTrueTemplate,paddingAbsolute:booleanFalseTemplate,autoUpdate:[null,booleanNullAllowedValues],autoUpdateInterval:[33,numberAllowedValues],nativeScrollbarsOverlaid:{showNativeScrollbars:booleanFalseTemplate,initialize:booleanTrueTemplate},overflowBehavior:{x:["scroll",overflowBehaviorAllowedValues],y:["scroll",overflowBehaviorAllowedValues]},scrollbars:{visibility:["auto",scrollbarsVisibilityAllowedValues],autoHide:["never",scrollbarsAutoHideAllowedValues],autoHideDelay:[800,numberAllowedValues],dragScrolling:booleanTrueTemplate,clickScrolling:booleanFalseTemplate,touchSupport:booleanTrueTemplate,snapHandle:booleanFalseTemplate},textarea:{dynWidth:booleanFalseTemplate,dynHeight:booleanFalseTemplate,inheritedAttrs:inheritedAttrsTemplate},callbacks:{onInitialized:callbackTemplate,onInitializationWithdrawn:callbackTemplate,onDestroyed:callbackTemplate,onScrollStart:callbackTemplate,onScroll:callbackTemplate,onScrollStop:callbackTemplate,onOverflowChanged:callbackTemplate,onOverflowAmountChanged:callbackTemplate,onDirectionChanged:callbackTemplate,onContentSizeChanged:callbackTemplate,onHostSizeChanged:callbackTemplate,onUpdated:callbackTemplate}};var convert=function(template){var recursive=function(obj){var key;var val;var valType;for(key in obj){if(!obj[LEXICON.hOP](key))continue;val=obj[key];valType=type(val);if(valType==TYPES.a)obj[key]=val[template?1:0];else if(valType==TYPES.o)obj[key]=recursive(val)}return obj};return recursive(FRAMEWORK.extend(true,{},optionsDefaultsAndTemplate))};return{_defaults:convert(),_template:convert(true),/**
                     * Validates the passed object by the passed template.
                     * @param obj The object which shall be validated.
                     * @param template The template which defines the allowed values and types.
                     * @param writeErrors True if errors shall be logged to the console.
                     * @param diffObj If a object is passed then only valid differences to this object will be returned.
                     * @returns {{}} A object which contains two objects called "default" and "prepared" which contains only the valid properties of the passed original object and discards not different values compared to the passed diffObj.
                     */
_validate:function(obj,template,writeErrors,diffObj){var validatedOptions={};var validatedOptionsPrepared={};var objectCopy=FRAMEWORK.extend(true,{},obj);var inArray=FRAMEWORK.inArray;var isEmptyObj=FRAMEWORK.isEmptyObject;var checkObjectProps=function(data,template,diffData,validatedOptions,validatedOptionsPrepared,prevPropName){for(var prop in template){if(template[LEXICON.hOP](prop)&&data[LEXICON.hOP](prop)){var isValid=false;var isDiff=false;var templateValue=template[prop];var templateValueType=type(templateValue);var templateIsComplex=templateValueType==TYPES.o;var templateTypes=type(templateValue)!=TYPES.a?[templateValue]:templateValue;var dataDiffValue=diffData[prop];var dataValue=data[prop];var dataValueType=type(dataValue);var propPrefix=prevPropName?prevPropName+".":"";var error='The option "'+propPrefix+prop+"\" wasn't set, because";var errorPossibleTypes=[];var errorRestrictedStrings=[];var restrictedStringValuesSplit;var restrictedStringValuesPossibilitiesSplit;var isRestrictedValue;var mainPossibility;var currType;var i;var v;var j;dataDiffValue=dataDiffValue===undefined?{}:dataDiffValue;if(templateIsComplex&&dataValueType==TYPES.o){validatedOptions[prop]={};validatedOptionsPrepared[prop]={};checkObjectProps(dataValue,templateValue,dataDiffValue,validatedOptions[prop],validatedOptionsPrepared[prop],propPrefix+prop);FRAMEWORK.each([data,validatedOptions,validatedOptionsPrepared],function(index,value){if(isEmptyObj(value[prop])){delete value[prop]}})}else if(!templateIsComplex){for(i=0;i<templateTypes[LEXICON.l];i++){currType=templateTypes[i];templateValueType=type(currType);isRestrictedValue=templateValueType==TYPES.s&&inArray(currType,possibleTemplateTypes)===-1;if(isRestrictedValue){errorPossibleTypes.push(TYPES.s);restrictedStringValuesSplit=currType.split(restrictedStringsSplit);errorRestrictedStrings=errorRestrictedStrings.concat(restrictedStringValuesSplit);for(v=0;v<restrictedStringValuesSplit[LEXICON.l];v++){restrictedStringValuesPossibilitiesSplit=restrictedStringValuesSplit[v].split(restrictedStringsPossibilitiesSplit);mainPossibility=restrictedStringValuesPossibilitiesSplit[0];for(j=0;j<restrictedStringValuesPossibilitiesSplit[LEXICON.l];j++){if(dataValue===restrictedStringValuesPossibilitiesSplit[j]){isValid=true;break}}if(isValid)break}}else{errorPossibleTypes.push(currType);if(dataValueType===currType){isValid=true;break}}}if(isValid){isDiff=dataValue!==dataDiffValue;if(isDiff)validatedOptions[prop]=dataValue;if(isRestrictedValue?inArray(dataDiffValue,restrictedStringValuesPossibilitiesSplit)<0:isDiff)validatedOptionsPrepared[prop]=isRestrictedValue?mainPossibility:dataValue}else if(writeErrors){console.warn(error+" it doesn't accept the type [ "+dataValueType.toUpperCase()+' ] with the value of "'+dataValue+'".\r\n'+"Accepted types are: [ "+errorPossibleTypes.join(", ").toUpperCase()+" ]."+(errorRestrictedStrings[length]>0?"\r\nValid strings are: [ "+errorRestrictedStrings.join(", ").split(restrictedStringsPossibilitiesSplit).join(", ")+" ].":""))}delete data[prop]}}}};checkObjectProps(objectCopy,template,diffObj||{},validatedOptions,validatedOptionsPrepared);/*
                        if(keepForeignProps) {
                            FRAMEWORK.extend(true, validatedOptions, objectCopy);
                            FRAMEWORK.extend(true, validatedOptionsPrepared, objectCopy);
                        }
                        */
if(!isEmptyObj(objectCopy)&&writeErrors)console.warn("The following options are discarded due to invalidity:\r\n"+window.JSON.stringify(objectCopy,null,2));return{_default:validatedOptions,_prepared:validatedOptionsPrepared}}}}();function initOverlayScrollbarsStatics(){if(!_pluginsGlobals)_pluginsGlobals=new OverlayScrollbarsGlobals(_pluginsOptions._defaults);if(!_pluginsAutoUpdateLoop)_pluginsAutoUpdateLoop=new OverlayScrollbarsAutoUpdateLoop(_pluginsGlobals)}function OverlayScrollbarsGlobals(defaultOptions){var _base=this;var strOverflow="overflow";var strHidden="hidden";var strScroll="scroll";var bodyElement=FRAMEWORK("body");var scrollbarDummyElement=FRAMEWORK('<div id="os-dummy-scrollbar-size"><div></div></div>');var scrollbarDummyElement0=scrollbarDummyElement[0];var dummyContainerChild=FRAMEWORK(scrollbarDummyElement.children("div").eq(0));bodyElement.append(scrollbarDummyElement);scrollbarDummyElement.hide().show();var nativeScrollbarSize=calcNativeScrollbarSize(scrollbarDummyElement0);var nativeScrollbarIsOverlaid={x:nativeScrollbarSize.x===0,y:nativeScrollbarSize.y===0};var msie=function(){var ua=window.navigator.userAgent;var strIndexOf="indexOf";var strSubString="substring";var msie=ua[strIndexOf]("MSIE ");var trident=ua[strIndexOf]("Trident/");var edge=ua[strIndexOf]("Edge/");var rv=ua[strIndexOf]("rv:");var result;var parseIntFunc=parseInt;if(msie>0)result=parseIntFunc(ua[strSubString](msie+5,ua[strIndexOf](".",msie)),10);else if(trident>0)result=parseIntFunc(ua[strSubString](rv+3,ua[strIndexOf](".",rv)),10);else if(edge>0)result=parseIntFunc(ua[strSubString](edge+5,ua[strIndexOf](".",edge)),10);return result}();FRAMEWORK.extend(_base,{defaultOptions:defaultOptions,msie:msie,autoUpdateLoop:false,autoUpdateRecommended:!COMPATIBILITY.mO(),nativeScrollbarSize:nativeScrollbarSize,nativeScrollbarIsOverlaid:nativeScrollbarIsOverlaid,nativeScrollbarStyling:function(){var result=false;scrollbarDummyElement.addClass("os-viewport-native-scrollbars-invisible");try{result=scrollbarDummyElement.css("scrollbar-width")==="none"&&(msie>9||!msie)||window.getComputedStyle(scrollbarDummyElement0,"::-webkit-scrollbar").getPropertyValue("display")==="none"}catch(ex){}return result}(),overlayScrollbarDummySize:{x:30,y:30},cssCalc:function(){var dummyStyle=document.createElement("div")[LEXICON.s];var strCalc="calc";var i=-1;var prop;for(;i<VENDORS._cssPrefixes[LEXICON.l];i++){prop=i<0?strCalc:VENDORS._cssPrefixes[i]+strCalc;dummyStyle.cssText="width:"+prop+"(1px);";if(dummyStyle[LEXICON.l])return prop}return null}(),restrictedMeasuring:function(){scrollbarDummyElement.css(strOverflow,strHidden);var scrollSize={w:scrollbarDummyElement0[LEXICON.sW],h:scrollbarDummyElement0[LEXICON.sH]};scrollbarDummyElement.css(strOverflow,"visible");var scrollSize2={w:scrollbarDummyElement0[LEXICON.sW],h:scrollbarDummyElement0[LEXICON.sH]};return scrollSize.w-scrollSize2.w!==0||scrollSize.h-scrollSize2.h!==0}(),rtlScrollBehavior:function(){scrollbarDummyElement.css({"overflow-y":strHidden,"overflow-x":strScroll,direction:"rtl"}).scrollLeft(0);var dummyContainerOffset=scrollbarDummyElement.offset();var dummyContainerChildOffset=dummyContainerChild.offset();scrollbarDummyElement.scrollLeft(999);var dummyContainerScrollOffsetAfterScroll=dummyContainerChild.offset();return{i:dummyContainerOffset.left===dummyContainerChildOffset.left,n:dummyContainerChildOffset.left-dummyContainerScrollOffsetAfterScroll.left===0}}(),supportTransform:VENDORS._cssProperty("transform")!==undefined,supportTransition:VENDORS._cssProperty("transition")!==undefined,supportPassiveEvents:function(){var supportsPassive=false;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){supportsPassive=true}}))}catch(e){}return supportsPassive}(),supportResizeObserver:!!COMPATIBILITY.rO(),supportMutationObserver:!!COMPATIBILITY.mO()});scrollbarDummyElement.removeAttr(LEXICON.s).remove();(function(){if(nativeScrollbarIsOverlaid.x&&nativeScrollbarIsOverlaid.y)return;var abs=MATH.abs;var windowWidth=COMPATIBILITY.wW();var windowHeight=COMPATIBILITY.wH();var windowDpr=getWindowDPR();var onResize=function(){if(INSTANCES().length>0){var newW=COMPATIBILITY.wW();var newH=COMPATIBILITY.wH();var deltaW=newW-windowWidth;var deltaH=newH-windowHeight;if(deltaW===0&&deltaH===0)return;var deltaWRatio=MATH.round(newW/(windowWidth/100));var deltaHRatio=MATH.round(newH/(windowHeight/100));var absDeltaW=abs(deltaW);var absDeltaH=abs(deltaH);var absDeltaWRatio=abs(deltaWRatio);var absDeltaHRatio=abs(deltaHRatio);var newDPR=getWindowDPR();var deltaIsBigger=absDeltaW>2&&absDeltaH>2;var difference=!differenceIsBiggerThanOne(absDeltaWRatio,absDeltaHRatio);var dprChanged=newDPR!==windowDpr&&windowDpr>0;var isZoom=deltaIsBigger&&difference&&dprChanged;var oldScrollbarSize=_base.nativeScrollbarSize;var newScrollbarSize;if(isZoom){bodyElement.append(scrollbarDummyElement);newScrollbarSize=_base.nativeScrollbarSize=calcNativeScrollbarSize(scrollbarDummyElement[0]);scrollbarDummyElement.remove();if(oldScrollbarSize.x!==newScrollbarSize.x||oldScrollbarSize.y!==newScrollbarSize.y){FRAMEWORK.each(INSTANCES(),function(){if(INSTANCES(this))INSTANCES(this).update("zoom")})}}windowWidth=newW;windowHeight=newH;windowDpr=newDPR}};function differenceIsBiggerThanOne(valOne,valTwo){var absValOne=abs(valOne);var absValTwo=abs(valTwo);return!(absValOne===absValTwo||absValOne+1===absValTwo||absValOne-1===absValTwo)}function getWindowDPR(){var dDPI=window.screen.deviceXDPI||0;var sDPI=window.screen.logicalXDPI||1;return window.devicePixelRatio||dDPI/sDPI}FRAMEWORK(window).on("resize",onResize)})();function calcNativeScrollbarSize(measureElement){return{x:measureElement[LEXICON.oH]-measureElement[LEXICON.cH],y:measureElement[LEXICON.oW]-measureElement[LEXICON.cW]}}}function OverlayScrollbarsAutoUpdateLoop(globals){var _base=this;var _inArray=FRAMEWORK.inArray;var _getNow=COMPATIBILITY.now;var _strAutoUpdate="autoUpdate";var _strAutoUpdateInterval=_strAutoUpdate+"Interval";var _strLength=LEXICON.l;var _loopingInstances=[];var _loopingInstancesIntervalCache=[];var _loopIsActive=false;var _loopIntervalDefault=33;var _loopInterval=_loopIntervalDefault;var _loopTimeOld=_getNow();var _loopID;var loop=function(){if(_loopingInstances[_strLength]>0&&_loopIsActive){_loopID=COMPATIBILITY.rAF()(function(){loop()});var timeNew=_getNow();var timeDelta=timeNew-_loopTimeOld;var lowestInterval;var instance;var instanceOptions;var instanceAutoUpdateAllowed;var instanceAutoUpdateInterval;var now;if(timeDelta>_loopInterval){_loopTimeOld=timeNew-timeDelta%_loopInterval;lowestInterval=_loopIntervalDefault;for(var i=0;i<_loopingInstances[_strLength];i++){instance=_loopingInstances[i];if(instance!==undefined){instanceOptions=instance.options();instanceAutoUpdateAllowed=instanceOptions[_strAutoUpdate];instanceAutoUpdateInterval=MATH.max(1,instanceOptions[_strAutoUpdateInterval]);now=_getNow();if((instanceAutoUpdateAllowed===true||instanceAutoUpdateAllowed===null)&&now-_loopingInstancesIntervalCache[i]>instanceAutoUpdateInterval){instance.update("auto");_loopingInstancesIntervalCache[i]=new Date(now+=instanceAutoUpdateInterval)}lowestInterval=MATH.max(1,MATH.min(lowestInterval,instanceAutoUpdateInterval))}}_loopInterval=lowestInterval}}else{_loopInterval=_loopIntervalDefault}};/**
                 * Add OverlayScrollbars instance to the auto update loop. Only successful if the instance isn't already added.
                 * @param instance The instance which shall be updated in a loop automatically.
                 */
_base.add=function(instance){if(_inArray(instance,_loopingInstances)===-1){_loopingInstances.push(instance);_loopingInstancesIntervalCache.push(_getNow());if(_loopingInstances[_strLength]>0&&!_loopIsActive){_loopIsActive=true;globals.autoUpdateLoop=_loopIsActive;loop()}}};_base.remove=function(instance){var index=_inArray(instance,_loopingInstances);if(index>-1){_loopingInstancesIntervalCache.splice(index,1);_loopingInstances.splice(index,1);if(_loopingInstances[_strLength]===0&&_loopIsActive){_loopIsActive=false;globals.autoUpdateLoop=_loopIsActive;if(_loopID!==undefined){COMPATIBILITY.cAF()(_loopID);_loopID=-1}}}}}/**
             * A object which manages the scrollbars visibility of the target element.
             * @param pluginTargetElement The element from which the scrollbars shall be hidden.
             * @param options The custom options.
             * @param extensions The custom extensions.
             * @param globals
             * @param autoUpdateLoop
             * @returns {*}
             * @constructor
             */
function OverlayScrollbarsInstance(pluginTargetElement,options,extensions,globals,autoUpdateLoop){var type=COMPATIBILITY.type;var inArray=FRAMEWORK.inArray;var each=FRAMEWORK.each;var _base=new _plugin;var _frameworkProto=FRAMEWORK[LEXICON.p];if(!isHTMLElement(pluginTargetElement))return;if(INSTANCES(pluginTargetElement)){var inst=INSTANCES(pluginTargetElement);inst.options(options);return inst}var _nativeScrollbarIsOverlaid;var _overlayScrollbarDummySize;var _rtlScrollBehavior;var _autoUpdateRecommended;var _msieVersion;var _nativeScrollbarStyling;var _cssCalc;var _nativeScrollbarSize;var _supportTransition;var _supportTransform;var _supportPassiveEvents;var _supportResizeObserver;var _supportMutationObserver;var _restrictedMeasuring;var _initialized;var _destroyed;var _isTextarea;var _isBody;var _documentMixed;var _domExists;var _isBorderBox;var _sizeAutoObserverAdded;var _paddingX;var _paddingY;var _borderX;var _borderY;var _marginX;var _marginY;var _isRTL;var _sleeping;var _contentBorderSize={};var _scrollHorizontalInfo={};var _scrollVerticalInfo={};var _viewportSize={};var _nativeScrollbarMinSize={};var _strMinusHidden="-hidden";var _strMarginMinus="margin-";var _strPaddingMinus="padding-";var _strBorderMinus="border-";var _strTop="top";var _strRight="right";var _strBottom="bottom";var _strLeft="left";var _strMinMinus="min-";var _strMaxMinus="max-";var _strWidth="width";var _strHeight="height";var _strFloat="float";var _strEmpty="";var _strAuto="auto";var _strSync="sync";var _strScroll="scroll";var _strHundredPercent="100%";var _strX="x";var _strY="y";var _strDot=".";var _strSpace=" ";var _strScrollbar="scrollbar";var _strMinusHorizontal="-horizontal";var _strMinusVertical="-vertical";var _strScrollLeft=_strScroll+"Left";var _strScrollTop=_strScroll+"Top";var _strMouseTouchDownEvent="mousedown touchstart";var _strMouseTouchUpEvent="mouseup touchend touchcancel";var _strMouseTouchMoveEvent="mousemove touchmove";var _strMouseTouchEnter="mouseenter";var _strMouseTouchLeave="mouseleave";var _strKeyDownEvent="keydown";var _strKeyUpEvent="keyup";var _strSelectStartEvent="selectstart";var _strTransitionEndEvent="transitionend webkitTransitionEnd oTransitionEnd";var _strResizeObserverProperty="__overlayScrollbarsRO__";var _cassNamesPrefix="os-";var _classNameHTMLElement=_cassNamesPrefix+"html";var _classNameHostElement=_cassNamesPrefix+"host";var _classNameHostTextareaElement=_classNameHostElement+"-textarea";var _classNameHostScrollbarHorizontalHidden=_classNameHostElement+"-"+_strScrollbar+_strMinusHorizontal+_strMinusHidden;var _classNameHostScrollbarVerticalHidden=_classNameHostElement+"-"+_strScrollbar+_strMinusVertical+_strMinusHidden;var _classNameHostTransition=_classNameHostElement+"-transition";var _classNameHostRTL=_classNameHostElement+"-rtl";var _classNameHostResizeDisabled=_classNameHostElement+"-resize-disabled";var _classNameHostScrolling=_classNameHostElement+"-scrolling";var _classNameHostOverflow=_classNameHostElement+"-overflow";var _classNameHostOverflowX=_classNameHostOverflow+"-x";var _classNameHostOverflowY=_classNameHostOverflow+"-y";var _classNameTextareaElement=_cassNamesPrefix+"textarea";var _classNameTextareaCoverElement=_classNameTextareaElement+"-cover";var _classNamePaddingElement=_cassNamesPrefix+"padding";var _classNameViewportElement=_cassNamesPrefix+"viewport";var _classNameViewportNativeScrollbarsInvisible=_classNameViewportElement+"-native-scrollbars-invisible";var _classNameViewportNativeScrollbarsOverlaid=_classNameViewportElement+"-native-scrollbars-overlaid";var _classNameContentElement=_cassNamesPrefix+"content";var _classNameContentArrangeElement=_cassNamesPrefix+"content-arrange";var _classNameContentGlueElement=_cassNamesPrefix+"content-glue";var _classNameSizeAutoObserverElement=_cassNamesPrefix+"size-auto-observer";var _classNameResizeObserverElement=_cassNamesPrefix+"resize-observer";var _classNameResizeObserverItemElement=_cassNamesPrefix+"resize-observer-item";var _classNameResizeObserverItemFinalElement=_classNameResizeObserverItemElement+"-final";var _classNameTextInherit=_cassNamesPrefix+"text-inherit";var _classNameScrollbar=_cassNamesPrefix+_strScrollbar;var _classNameScrollbarTrack=_classNameScrollbar+"-track";var _classNameScrollbarTrackOff=_classNameScrollbarTrack+"-off";var _classNameScrollbarHandle=_classNameScrollbar+"-handle";var _classNameScrollbarHandleOff=_classNameScrollbarHandle+"-off";var _classNameScrollbarUnusable=_classNameScrollbar+"-unusable";var _classNameScrollbarAutoHidden=_classNameScrollbar+"-"+_strAuto+_strMinusHidden;var _classNameScrollbarCorner=_classNameScrollbar+"-corner";var _classNameScrollbarCornerResize=_classNameScrollbarCorner+"-resize";var _classNameScrollbarCornerResizeB=_classNameScrollbarCornerResize+"-both";var _classNameScrollbarCornerResizeH=_classNameScrollbarCornerResize+_strMinusHorizontal;var _classNameScrollbarCornerResizeV=_classNameScrollbarCornerResize+_strMinusVertical;var _classNameScrollbarHorizontal=_classNameScrollbar+_strMinusHorizontal;var _classNameScrollbarVertical=_classNameScrollbar+_strMinusVertical;var _classNameDragging=_cassNamesPrefix+"dragging";var _classNameThemeNone=_cassNamesPrefix+"theme-none";var _classNamesDynamicDestroy=[_classNameViewportNativeScrollbarsInvisible,_classNameViewportNativeScrollbarsOverlaid,_classNameScrollbarTrackOff,_classNameScrollbarHandleOff,_classNameScrollbarUnusable,_classNameScrollbarAutoHidden,_classNameScrollbarCornerResize,_classNameScrollbarCornerResizeB,_classNameScrollbarCornerResizeH,_classNameScrollbarCornerResizeV,_classNameDragging].join(_strSpace);var _callbacksInitQeueue=[];var _defaultOptions;var _currentOptions;var _currentPreparedOptions;var _extensions={};var _extensionsPrivateMethods="added removed on contract";var _lastUpdateTime;var _swallowedUpdateHints={};var _swallowedUpdateTimeout;var _swallowUpdateLag=42;var _imgs=[];var _windowElement;var _documentElement;var _htmlElement;var _bodyElement;var _targetElement;var _hostElement;var _sizeAutoObserverElement;var _sizeObserverElement;var _paddingElement;var _viewportElement;var _contentElement;var _contentArrangeElement;var _contentGlueElement;var _textareaCoverElement;var _scrollbarCornerElement;var _scrollbarHorizontalElement;var _scrollbarHorizontalTrackElement;var _scrollbarHorizontalHandleElement;var _scrollbarVerticalElement;var _scrollbarVerticalTrackElement;var _scrollbarVerticalHandleElement;var _windowElementNative;var _documentElementNative;var _targetElementNative;var _hostElementNative;var _sizeAutoObserverElementNative;var _sizeObserverElementNative;var _paddingElementNative;var _viewportElementNative;var _contentElementNative;var _hostSizeCache;var _contentScrollSizeCache;var _arrangeContentSizeCache;var _hasOverflowCache;var _hideOverflowCache;var _widthAutoCache;var _heightAutoCache;var _cssMaxValueCache;var _cssBoxSizingCache;var _cssPaddingCache;var _cssBorderCache;var _cssMarginCache;var _cssDirectionCache;var _cssDirectionDetectedCache;var _paddingAbsoluteCache;var _clipAlwaysCache;var _contentGlueSizeCache;var _overflowBehaviorCache;var _overflowAmountCache;var _ignoreOverlayScrollbarHidingCache;var _autoUpdateCache;var _sizeAutoCapableCache;var _contentElementScrollSizeChangeDetectedCache;var _hostElementSizeChangeDetectedCache;var _scrollbarsVisibilityCache;var _scrollbarsAutoHideCache;var _scrollbarsClickScrollingCache;var _scrollbarsDragScrollingCache;var _resizeCache;var _normalizeRTLCache;var _classNameCache;var _oldClassName;var _textareaAutoWrappingCache;var _textareaInfoCache;var _textareaSizeCache;var _textareaDynHeightCache;var _textareaDynWidthCache;var _bodyMinSizeCache;var _viewportScrollSizeCache;var _displayIsHiddenCache;var _updateAutoCache={};var _mutationObserverHost;var _mutationObserverContent;var _mutationObserverHostCallback;var _mutationObserverContentCallback;var _mutationObserversConnected;var _mutationObserverAttrsTextarea=["wrap","cols","rows"];var _mutationObserverAttrsHost=[LEXICON.i,LEXICON.c,LEXICON.s,"open"];var _destroyEvents=[];var _textareaHasFocus;var _scrollbarsAutoHideTimeoutId;var _scrollbarsAutoHideMoveTimeoutId;var _scrollbarsAutoHideDelay;var _scrollbarsAutoHideNever;var _scrollbarsAutoHideScroll;var _scrollbarsAutoHideMove;var _scrollbarsAutoHideLeave;var _scrollbarsHandleHovered;var _scrollbarsHandlesDefineScrollPos;var _resizeNone;var _resizeBoth;var _resizeHorizontal;var _resizeVertical;/**
                 * Adds or removes a event listener from the given element. 
                 * @param element The element to which the event listener shall be applied or removed.
                 * @param eventNames The name(s) of the events.
                 * @param listener The method which shall be called.
                 * @param remove True if the handler shall be removed, false or undefined if the handler shall be added.
                 */
function setupResponsiveEventListener(element,eventNames,listener,remove,passive){var collected=type(eventNames)==TYPES.a&&type(listener)==TYPES.a;var method=remove?"removeEventListener":"addEventListener";var onOff=remove?"off":"on";var events=collected?false:eventNames.split(_strSpace);var i=0;if(collected){for(;i<eventNames[LEXICON.l];i++)setupResponsiveEventListener(element,eventNames[i],listener[i],remove)}else{for(;i<events[LEXICON.l];i++){if(_supportPassiveEvents)element[0][method](events[i],listener,{passive:passive||false});else element[onOff](events[i],listener)}}}function addDestroyEventListener(element,eventNames,listener,passive){setupResponsiveEventListener(element,eventNames,listener,false,passive);_destroyEvents.push(COMPATIBILITY.bind(setupResponsiveEventListener,0,element,eventNames,listener,true,passive))}/**
                 * Adds or removes a resize observer from the given element.
                 * @param targetElement The element to which the resize observer shall be added or removed.
                 * @param onElementResizedCallback The callback which is fired every time the resize observer registers a size change or false / undefined if the resizeObserver shall be removed.
                 */
function setupResizeObserver(targetElement,onElementResizedCallback){if(targetElement){var resizeObserver=COMPATIBILITY.rO();var strAnimationStartEvent="animationstart mozAnimationStart webkitAnimationStart MSAnimationStart";var strChildNodes="childNodes";var constScroll=3333333;var callback=function(){targetElement[_strScrollTop](constScroll)[_strScrollLeft](_isRTL?_rtlScrollBehavior.n?-constScroll:_rtlScrollBehavior.i?0:constScroll:constScroll);onElementResizedCallback()};if(onElementResizedCallback){if(_supportResizeObserver){var element=targetElement.append(generateDiv(_classNameResizeObserverElement+" observed")).contents()[0];var observer=element[_strResizeObserverProperty]=new resizeObserver(callback);observer.observe(element)}else{if(_msieVersion>9||!_autoUpdateRecommended){targetElement.prepend(generateDiv(_classNameResizeObserverElement,generateDiv({c:_classNameResizeObserverItemElement,dir:"ltr"},generateDiv(_classNameResizeObserverItemElement,generateDiv(_classNameResizeObserverItemFinalElement))+generateDiv(_classNameResizeObserverItemElement,generateDiv({c:_classNameResizeObserverItemFinalElement,style:"width: 200%; height: 200%"})))));var observerElement=targetElement[0][strChildNodes][0][strChildNodes][0];var shrinkElement=FRAMEWORK(observerElement[strChildNodes][1]);var expandElement=FRAMEWORK(observerElement[strChildNodes][0]);var expandElementChild=FRAMEWORK(expandElement[0][strChildNodes][0]);var widthCache=observerElement[LEXICON.oW];var heightCache=observerElement[LEXICON.oH];var isDirty;var rAFId;var currWidth;var currHeight;var factor=2;var nativeScrollbarSize=globals.nativeScrollbarSize;var reset=function(){expandElement[_strScrollLeft](constScroll)[_strScrollTop](constScroll);shrinkElement[_strScrollLeft](constScroll)[_strScrollTop](constScroll)};var onResized=function(){rAFId=0;if(!isDirty)return;widthCache=currWidth;heightCache=currHeight;callback()};var onScroll=function(event){currWidth=observerElement[LEXICON.oW];currHeight=observerElement[LEXICON.oH];isDirty=currWidth!=widthCache||currHeight!=heightCache;if(event&&isDirty&&!rAFId){COMPATIBILITY.cAF()(rAFId);rAFId=COMPATIBILITY.rAF()(onResized)}else if(!event)onResized();reset();if(event){COMPATIBILITY.prvD(event);COMPATIBILITY.stpP(event)}return false};var expandChildCSS={};var observerElementCSS={};setTopRightBottomLeft(observerElementCSS,_strEmpty,[-((nativeScrollbarSize.y+1)*factor),nativeScrollbarSize.x*-factor,nativeScrollbarSize.y*-factor,-((nativeScrollbarSize.x+1)*factor)]);FRAMEWORK(observerElement).css(observerElementCSS);expandElement.on(_strScroll,onScroll);shrinkElement.on(_strScroll,onScroll);targetElement.on(strAnimationStartEvent,function(){onScroll(false)});expandChildCSS[_strWidth]=constScroll;expandChildCSS[_strHeight]=constScroll;expandElementChild.css(expandChildCSS);reset()}else{var attachEvent=_documentElementNative.attachEvent;var isIE=_msieVersion!==undefined;if(attachEvent){targetElement.prepend(generateDiv(_classNameResizeObserverElement));findFirst(targetElement,_strDot+_classNameResizeObserverElement)[0].attachEvent("onresize",callback)}else{var obj=_documentElementNative.createElement(TYPES.o);obj.setAttribute("tabindex","-1");obj.setAttribute(LEXICON.c,_classNameResizeObserverElement);obj.onload=function(){var wnd=this.contentDocument.defaultView;wnd.addEventListener("resize",callback);wnd.document.documentElement.style.display="none"};obj.type="text/html";if(isIE)targetElement.prepend(obj);obj.data="about:blank";if(!isIE)targetElement.prepend(obj);targetElement.on(strAnimationStartEvent,callback)}}}if(targetElement[0]===_sizeObserverElementNative){var directionChanged=function(){var dir=_hostElement.css("direction");var css={};var scrollLeftValue=0;var result=false;if(dir!==_cssDirectionDetectedCache){if(dir==="ltr"){css[_strLeft]=0;css[_strRight]=_strAuto;scrollLeftValue=constScroll}else{css[_strLeft]=_strAuto;css[_strRight]=0;scrollLeftValue=_rtlScrollBehavior.n?-constScroll:_rtlScrollBehavior.i?0:constScroll}_sizeObserverElement.children().eq(0).css(css);_sizeObserverElement[_strScrollLeft](scrollLeftValue)[_strScrollTop](constScroll);_cssDirectionDetectedCache=dir;result=true}return result};directionChanged();addDestroyEventListener(targetElement,_strScroll,function(event){if(directionChanged())update();COMPATIBILITY.prvD(event);COMPATIBILITY.stpP(event);return false})}}else{if(_supportResizeObserver){var element=targetElement.contents()[0];var resizeObserverObj=element[_strResizeObserverProperty];if(resizeObserverObj){resizeObserverObj.disconnect();delete element[_strResizeObserverProperty]}}else{remove(targetElement.children(_strDot+_classNameResizeObserverElement).eq(0))}}}}function createMutationObservers(){if(_supportMutationObserver){var mutationObserverContentLag=11;var mutationObserver=COMPATIBILITY.mO();var contentLastUpdate=COMPATIBILITY.now();var mutationTarget;var mutationAttrName;var contentTimeout;var now;var sizeAuto;var action;_mutationObserverHostCallback=function(mutations){var doUpdate=false;var mutation;if(_initialized&&!_sleeping){each(mutations,function(){mutation=this;mutationTarget=mutation.target;mutationAttrName=mutation.attributeName;if(mutationAttrName===LEXICON.c)doUpdate=hostClassNamesChanged(mutation.oldValue,mutationTarget.className);else if(mutationAttrName===LEXICON.s)doUpdate=mutation.oldValue!==mutationTarget[LEXICON.s].cssText;else doUpdate=true;if(doUpdate)return false});if(doUpdate)_base.update(_strAuto)}return doUpdate};_mutationObserverContentCallback=function(mutations){var doUpdate=false;var mutation;if(_initialized&&!_sleeping){each(mutations,function(){mutation=this;doUpdate=isUnknownMutation(mutation);return!doUpdate});if(doUpdate){now=COMPATIBILITY.now();sizeAuto=_heightAutoCache||_widthAutoCache;action=function(){if(!_destroyed){contentLastUpdate=now;if(_isTextarea)textareaUpdate();if(sizeAuto)update();else _base.update(_strAuto)}};clearTimeout(contentTimeout);if(mutationObserverContentLag<=0||now-contentLastUpdate>mutationObserverContentLag||!sizeAuto)action();else contentTimeout=setTimeout(action,mutationObserverContentLag)}}return doUpdate};_mutationObserverHost=new mutationObserver(_mutationObserverHostCallback);_mutationObserverContent=new mutationObserver(_mutationObserverContentCallback)}}function connectMutationObservers(){if(_supportMutationObserver&&!_mutationObserversConnected){_mutationObserverHost.observe(_hostElementNative,{attributes:true,attributeOldValue:true,attributeFilter:_mutationObserverAttrsHost});_mutationObserverContent.observe(_isTextarea?_targetElementNative:_contentElementNative,{attributes:true,attributeOldValue:true,subtree:!_isTextarea,childList:!_isTextarea,characterData:!_isTextarea,attributeFilter:_isTextarea?_mutationObserverAttrsTextarea:_mutationObserverAttrsHost});_mutationObserversConnected=true}}function disconnectMutationObservers(){if(_supportMutationObserver&&_mutationObserversConnected){_mutationObserverHost.disconnect();_mutationObserverContent.disconnect();_mutationObserversConnected=false}}/**
                 * This method gets called every time the host element gets resized. IMPORTANT: Padding changes are detected too!!
                 * It refreshes the hostResizedEventArgs and the hostSizeResizeCache.
                 * If there are any size changes, the update method gets called.
                 */
function hostOnResized(){if(!_sleeping){var changed;var hostSize={w:_sizeObserverElementNative[LEXICON.sW],h:_sizeObserverElementNative[LEXICON.sH]};changed=checkCache(hostSize,_hostElementSizeChangeDetectedCache);_hostElementSizeChangeDetectedCache=hostSize;if(changed)update({_hostSizeChanged:true})}}function hostOnMouseEnter(){if(_scrollbarsAutoHideLeave)refreshScrollbarsAutoHide(true)}function hostOnMouseLeave(){if(_scrollbarsAutoHideLeave&&!_bodyElement.hasClass(_classNameDragging))refreshScrollbarsAutoHide(false)}function hostOnMouseMove(){if(_scrollbarsAutoHideMove){refreshScrollbarsAutoHide(true);clearTimeout(_scrollbarsAutoHideMoveTimeoutId);_scrollbarsAutoHideMoveTimeoutId=setTimeout(function(){if(_scrollbarsAutoHideMove&&!_destroyed)refreshScrollbarsAutoHide(false)},100)}}function documentOnSelectStart(event){COMPATIBILITY.prvD(event);return false}/**
                 * A callback which will be called after a img element has downloaded its src asynchronous.
                 */
function imgOnLoad(){update({_contentSizeChanged:true})}/**
                 * Adds or removes mouse & touch events of the host element. (for handling auto-hiding of the scrollbars)
                 * @param destroy Indicates whether the events shall be added or removed.
                 */
function setupHostMouseTouchEvents(destroy){setupResponsiveEventListener(_hostElement,_strMouseTouchMoveEvent,hostOnMouseMove,_scrollbarsAutoHideMove?destroy:true,true);setupResponsiveEventListener(_hostElement,[_strMouseTouchEnter,_strMouseTouchLeave],[hostOnMouseEnter,hostOnMouseLeave],_scrollbarsAutoHideMove?true:destroy,true);if(!_initialized&&!destroy)_hostElement.one("mouseover",hostOnMouseEnter)}function bodyMinSizeChanged(){var bodyMinSize={};if(_isBody&&_contentArrangeElement){bodyMinSize.w=parseToZeroOrNumber(_contentArrangeElement.css(_strMinMinus+_strWidth));bodyMinSize.h=parseToZeroOrNumber(_contentArrangeElement.css(_strMinMinus+_strHeight));bodyMinSize.c=checkCache(bodyMinSize,_bodyMinSizeCache);bodyMinSize.f=true}_bodyMinSizeCache=bodyMinSize;return!!bodyMinSize.c}function hostClassNamesChanged(oldCassNames,newClassNames){var currClasses=newClassNames!==undefined&&newClassNames!==null?newClassNames.split(_strSpace):_strEmpty;var oldClasses=oldCassNames!==undefined&&oldCassNames!==null?oldCassNames.split(_strSpace):_strEmpty;if(currClasses===_strEmpty&&oldClasses===_strEmpty)return false;var diff=getArrayDifferences(oldClasses,currClasses);var changed=false;var oldClassNames=_oldClassName!==undefined&&_oldClassName!==null?_oldClassName.split(_strSpace):[_strEmpty];var currClassNames=_classNameCache!==undefined&&_classNameCache!==null?_classNameCache.split(_strSpace):[_strEmpty];var idx=inArray(_classNameThemeNone,diff);var curr;var i;var v;var o;var c;if(idx>-1)diff.splice(idx,1);for(i=0;i<diff.length;i++){curr=diff[i];if(curr.indexOf(_classNameHostElement)!==0){o=true;c=true;for(v=0;v<oldClassNames.length;v++){if(curr===oldClassNames[v]){o=false;break}}for(v=0;v<currClassNames.length;v++){if(curr===currClassNames[v]){c=false;break}}if(o&&c){changed=true;break}}}return changed}function isUnknownMutation(mutation){var attributeName=mutation.attributeName;var mutationTarget=mutation.target;var mutationType=mutation.type;var strClosest="closest";if(mutationTarget===_contentElementNative)return attributeName===null;if(mutationType==="attributes"&&(attributeName===LEXICON.c||attributeName===LEXICON.s)&&!_isTextarea){if(attributeName===LEXICON.c&&FRAMEWORK(mutationTarget).hasClass(_classNameHostElement))return hostClassNamesChanged(mutation.oldValue,mutationTarget.getAttribute(LEXICON.c));if(typeof mutationTarget[strClosest]!=TYPES.f)return true;if(mutationTarget[strClosest](_strDot+_classNameResizeObserverElement)!==null||mutationTarget[strClosest](_strDot+_classNameScrollbar)!==null||mutationTarget[strClosest](_strDot+_classNameScrollbarCorner)!==null)return false}return true}function updateAutoContentSizeChanged(){if(_sleeping)return false;var contentMeasureElement=getContentMeasureElement();var textareaValueLength=_isTextarea&&_widthAutoCache&&!_textareaAutoWrappingCache?_targetElement.val().length:0;var setCSS=!_mutationObserversConnected&&_widthAutoCache&&!_isTextarea;var viewportScrollSize={};var css={};var float;var bodyMinSizeC;var changed;var viewportScrollSizeChanged;var contentElementScrollSize;
//fix for https://bugzilla.mozilla.org/show_bug.cgi?id=1439305, it only works with "clipAlways : true"
//it can work with "clipAlways : false" too, but I had to set the overflow of the viewportElement to hidden every time before measuring
if(_restrictedMeasuring){viewportScrollSize={x:_viewportElementNative[LEXICON.sW],y:_viewportElementNative[LEXICON.sH]}}if(setCSS){float=_contentElement.css(_strFloat);css[_strFloat]=_isRTL?_strRight:_strLeft;css[_strWidth]=_strAuto;_contentElement.css(css)}contentElementScrollSize={w:contentMeasureElement[LEXICON.sW]+textareaValueLength,h:contentMeasureElement[LEXICON.sH]+textareaValueLength};if(setCSS){css[_strFloat]=float;css[_strWidth]=_strHundredPercent;_contentElement.css(css)}bodyMinSizeC=bodyMinSizeChanged();changed=checkCache(contentElementScrollSize,_contentElementScrollSizeChangeDetectedCache);viewportScrollSizeChanged=checkCache(viewportScrollSize,_viewportScrollSizeCache);_contentElementScrollSizeChangeDetectedCache=contentElementScrollSize;_viewportScrollSizeCache=viewportScrollSize;return changed||bodyMinSizeC||viewportScrollSizeChanged}function meaningfulAttrsChanged(){if(_sleeping||_mutationObserversConnected)return;var changed;var elem;var curr;var cache;var checks=[{_elem:_hostElement,_props:_mutationObserverAttrsHost.concat(":visible")},{_elem:_isTextarea?_targetElement:undefined,_props:_mutationObserverAttrsTextarea}];each(checks,function(index,check){elem=check._elem;if(elem){each(check._props,function(index,prop){curr=prop.charAt(0)===":"?elem.is(prop):elem.attr(prop);cache=_updateAutoCache[prop];changed=changed||checkCache(curr,cache);_updateAutoCache[prop]=curr})}});return changed}function isSizeAffectingCSSProperty(propertyName){if(!_initialized)return true;var flexGrow="flex-grow";var flexShrink="flex-shrink";var flexBasis="flex-basis";var affectingPropsX=[_strWidth,_strMinMinus+_strWidth,_strMaxMinus+_strWidth,_strMarginMinus+_strLeft,_strMarginMinus+_strRight,_strLeft,_strRight,"font-weight","word-spacing",flexGrow,flexShrink,flexBasis];var affectingPropsXContentBox=[_strPaddingMinus+_strLeft,_strPaddingMinus+_strRight,_strBorderMinus+_strLeft+_strWidth,_strBorderMinus+_strRight+_strWidth];var affectingPropsY=[_strHeight,_strMinMinus+_strHeight,_strMaxMinus+_strHeight,_strMarginMinus+_strTop,_strMarginMinus+_strBottom,_strTop,_strBottom,"line-height",flexGrow,flexShrink,flexBasis];var affectingPropsYContentBox=[_strPaddingMinus+_strTop,_strPaddingMinus+_strBottom,_strBorderMinus+_strTop+_strWidth,_strBorderMinus+_strBottom+_strWidth];var _strS="s";var _strVS="v-s";var checkX=_overflowBehaviorCache.x===_strS||_overflowBehaviorCache.x===_strVS;var checkY=_overflowBehaviorCache.y===_strS||_overflowBehaviorCache.y===_strVS;var sizeIsAffected=false;var checkPropertyName=function(arr,name){for(var i=0;i<arr[LEXICON.l];i++){if(arr[i]===name)return true}return false};if(checkY){sizeIsAffected=checkPropertyName(affectingPropsY,propertyName);if(!sizeIsAffected&&!_isBorderBox)sizeIsAffected=checkPropertyName(affectingPropsYContentBox,propertyName)}if(checkX&&!sizeIsAffected){sizeIsAffected=checkPropertyName(affectingPropsX,propertyName);if(!sizeIsAffected&&!_isBorderBox)sizeIsAffected=checkPropertyName(affectingPropsXContentBox,propertyName)}return sizeIsAffected}function textareaUpdate(){if(!_sleeping){var wrapAttrOff=!_textareaAutoWrappingCache;var minWidth=_viewportSize.w;var minHeight=_viewportSize.h;var css={};var doMeasure=_widthAutoCache||wrapAttrOff;var origWidth;var width;var origHeight;var height;css[_strMinMinus+_strWidth]=_strEmpty;css[_strMinMinus+_strHeight]=_strEmpty;css[_strWidth]=_strAuto;_targetElement.css(css);origWidth=_targetElementNative[LEXICON.oW];width=doMeasure?MATH.max(origWidth,_targetElementNative[LEXICON.sW]-1):1;/*width += (_widthAutoCache ? _marginX + (!_isBorderBox ? wrapAttrOff ? 0 : _paddingX + _borderX : 0) : 0);*/
css[_strWidth]=_widthAutoCache?_strAuto:_strHundredPercent;css[_strMinMinus+_strWidth]=_strHundredPercent;css[_strHeight]=_strAuto;_targetElement.css(css);origHeight=_targetElementNative[LEXICON.oH];height=MATH.max(origHeight,_targetElementNative[LEXICON.sH]-1);css[_strWidth]=width;css[_strHeight]=height;_textareaCoverElement.css(css);css[_strMinMinus+_strWidth]=minWidth;css[_strMinMinus+_strHeight]=minHeight;_targetElement.css(css);return{_originalWidth:origWidth,_originalHeight:origHeight,_dynamicWidth:width,_dynamicHeight:height}}}/**
                 * Updates the plugin and DOM to the current options.
                 * This method should only be called if a update is 100% required.
                 * @param updateHints A objects which contains hints for this update:
                 * {
                 *   _hostSizeChanged : boolean,
                 *   _contentSizeChanged : boolean,
                 *   _force : boolean,                             == preventSwallowing
                 *   _changedOptions : { },                        == preventSwallowing && preventSleep
                *  }
                 */
function update(updateHints){clearTimeout(_swallowedUpdateTimeout);updateHints=updateHints||{};_swallowedUpdateHints._hostSizeChanged|=updateHints._hostSizeChanged;_swallowedUpdateHints._contentSizeChanged|=updateHints._contentSizeChanged;_swallowedUpdateHints._force|=updateHints._force;var now=COMPATIBILITY.now();var hostSizeChanged=!!_swallowedUpdateHints._hostSizeChanged;var contentSizeChanged=!!_swallowedUpdateHints._contentSizeChanged;var force=!!_swallowedUpdateHints._force;var changedOptions=updateHints._changedOptions;var swallow=_swallowUpdateLag>0&&_initialized&&!_destroyed&&!force&&!changedOptions&&now-_lastUpdateTime<_swallowUpdateLag&&(!_heightAutoCache&&!_widthAutoCache);var displayIsHidden;if(swallow)_swallowedUpdateTimeout=setTimeout(update,_swallowUpdateLag);if(_destroyed||swallow||_sleeping&&!changedOptions||_initialized&&!force&&(displayIsHidden=_hostElement.is(":hidden"))||_hostElement.css("display")==="inline")return;_lastUpdateTime=now;_swallowedUpdateHints={};if(_nativeScrollbarStyling&&!(_nativeScrollbarIsOverlaid.x&&_nativeScrollbarIsOverlaid.y)){_nativeScrollbarSize.x=0;_nativeScrollbarSize.y=0}else{_nativeScrollbarSize=extendDeep({},globals.nativeScrollbarSize)}_nativeScrollbarMinSize={x:(_nativeScrollbarSize.x+(_nativeScrollbarIsOverlaid.x?0:3))*3,y:(_nativeScrollbarSize.y+(_nativeScrollbarIsOverlaid.y?0:3))*3};
//freezeResizeObserver(_sizeAutoObserverElement, true);
var checkCacheAutoForce=function(){return checkCache.apply(this,[].slice.call(arguments).concat([force]))};var currScroll={x:_viewportElement[_strScrollLeft](),y:_viewportElement[_strScrollTop]()};var currentPreparedOptionsScrollbars=_currentPreparedOptions.scrollbars;var currentPreparedOptionsTextarea=_currentPreparedOptions.textarea;var scrollbarsVisibility=currentPreparedOptionsScrollbars.visibility;var scrollbarsVisibilityChanged=checkCacheAutoForce(scrollbarsVisibility,_scrollbarsVisibilityCache);var scrollbarsAutoHide=currentPreparedOptionsScrollbars.autoHide;var scrollbarsAutoHideChanged=checkCacheAutoForce(scrollbarsAutoHide,_scrollbarsAutoHideCache);var scrollbarsClickScrolling=currentPreparedOptionsScrollbars.clickScrolling;var scrollbarsClickScrollingChanged=checkCacheAutoForce(scrollbarsClickScrolling,_scrollbarsClickScrollingCache);var scrollbarsDragScrolling=currentPreparedOptionsScrollbars.dragScrolling;var scrollbarsDragScrollingChanged=checkCacheAutoForce(scrollbarsDragScrolling,_scrollbarsDragScrollingCache);var className=_currentPreparedOptions.className;var classNameChanged=checkCacheAutoForce(className,_classNameCache);var resize=_currentPreparedOptions.resize;var resizeChanged=checkCacheAutoForce(resize,_resizeCache)&&!_isBody;
//paddingAbsolute
var paddingAbsolute=_currentPreparedOptions.paddingAbsolute;var paddingAbsoluteChanged=checkCacheAutoForce(paddingAbsolute,_paddingAbsoluteCache);
//clipAlways
var clipAlways=_currentPreparedOptions.clipAlways;var clipAlwaysChanged=checkCacheAutoForce(clipAlways,_clipAlwaysCache);
//sizeAutoCapable
var sizeAutoCapable=_currentPreparedOptions.sizeAutoCapable&&!_isBody;var sizeAutoCapableChanged=checkCacheAutoForce(sizeAutoCapable,_sizeAutoCapableCache);var ignoreOverlayScrollbarHiding=_currentPreparedOptions.nativeScrollbarsOverlaid.showNativeScrollbars;var ignoreOverlayScrollbarHidingChanged=checkCacheAutoForce(ignoreOverlayScrollbarHiding,_ignoreOverlayScrollbarHidingCache);var autoUpdate=_currentPreparedOptions.autoUpdate;var autoUpdateChanged=checkCacheAutoForce(autoUpdate,_autoUpdateCache);var overflowBehavior=_currentPreparedOptions.overflowBehavior;var overflowBehaviorChanged=checkCacheAutoForce(overflowBehavior,_overflowBehaviorCache,force);var textareaDynWidth=currentPreparedOptionsTextarea.dynWidth;var textareaDynWidthChanged=checkCacheAutoForce(_textareaDynWidthCache,textareaDynWidth);var textareaDynHeight=currentPreparedOptionsTextarea.dynHeight;var textareaDynHeightChanged=checkCacheAutoForce(_textareaDynHeightCache,textareaDynHeight);_scrollbarsAutoHideNever=scrollbarsAutoHide==="n";_scrollbarsAutoHideScroll=scrollbarsAutoHide==="s";_scrollbarsAutoHideMove=scrollbarsAutoHide==="m";_scrollbarsAutoHideLeave=scrollbarsAutoHide==="l";_scrollbarsAutoHideDelay=currentPreparedOptionsScrollbars.autoHideDelay;_oldClassName=_classNameCache;_resizeNone=resize==="n";_resizeBoth=resize==="b";_resizeHorizontal=resize==="h";_resizeVertical=resize==="v";_normalizeRTLCache=_currentPreparedOptions.normalizeRTL;ignoreOverlayScrollbarHiding=ignoreOverlayScrollbarHiding&&(_nativeScrollbarIsOverlaid.x&&_nativeScrollbarIsOverlaid.y);_scrollbarsVisibilityCache=scrollbarsVisibility;_scrollbarsAutoHideCache=scrollbarsAutoHide;_scrollbarsClickScrollingCache=scrollbarsClickScrolling;_scrollbarsDragScrollingCache=scrollbarsDragScrolling;_classNameCache=className;_resizeCache=resize;_paddingAbsoluteCache=paddingAbsolute;_clipAlwaysCache=clipAlways;_sizeAutoCapableCache=sizeAutoCapable;_ignoreOverlayScrollbarHidingCache=ignoreOverlayScrollbarHiding;_autoUpdateCache=autoUpdate;_overflowBehaviorCache=extendDeep({},overflowBehavior);_textareaDynWidthCache=textareaDynWidth;_textareaDynHeightCache=textareaDynHeight;_hasOverflowCache=_hasOverflowCache||{x:false,y:false};if(classNameChanged){removeClass(_hostElement,_oldClassName+_strSpace+_classNameThemeNone);addClass(_hostElement,className!==undefined&&className!==null&&className.length>0?className:_classNameThemeNone)}if(autoUpdateChanged){if(autoUpdate===true){disconnectMutationObservers();autoUpdateLoop.add(_base)}else if(autoUpdate===null){if(_autoUpdateRecommended){disconnectMutationObservers();autoUpdateLoop.add(_base)}else{autoUpdateLoop.remove(_base);connectMutationObservers()}}else{autoUpdateLoop.remove(_base);connectMutationObservers()}}if(sizeAutoCapableChanged){if(sizeAutoCapable){if(!_contentGlueElement){_contentGlueElement=FRAMEWORK(generateDiv(_classNameContentGlueElement));_paddingElement.before(_contentGlueElement)}else{_contentGlueElement.show()}if(_sizeAutoObserverAdded){_sizeAutoObserverElement.show()}else{_sizeAutoObserverElement=FRAMEWORK(generateDiv(_classNameSizeAutoObserverElement));_sizeAutoObserverElementNative=_sizeAutoObserverElement[0];_contentGlueElement.before(_sizeAutoObserverElement);var oldSize={w:-1,h:-1};setupResizeObserver(_sizeAutoObserverElement,function(){var newSize={w:_sizeAutoObserverElementNative[LEXICON.oW],h:_sizeAutoObserverElementNative[LEXICON.oH]};if(checkCache(newSize,oldSize)){if(_initialized&&(_heightAutoCache&&newSize.h>0)||_widthAutoCache&&newSize.w>0){update()}else if(_initialized&&(!_heightAutoCache&&newSize.h===0)||!_widthAutoCache&&newSize.w===0){update()}}oldSize=newSize});_sizeAutoObserverAdded=true;
//fix heightAuto detector bug if height is fixed but contentHeight is 0.
if(_cssCalc!==null)_sizeAutoObserverElement.css(_strHeight,_cssCalc+"(100% + 1px)")}}else{if(_sizeAutoObserverAdded)_sizeAutoObserverElement.hide();if(_contentGlueElement)_contentGlueElement.hide()}}if(force){_sizeObserverElement.find("*").trigger(_strScroll);if(_sizeAutoObserverAdded)_sizeAutoObserverElement.find("*").trigger(_strScroll)}displayIsHidden=displayIsHidden===undefined?_hostElement.is(":hidden"):displayIsHidden;var displayIsHiddenChanged=checkCacheAutoForce(displayIsHidden,_displayIsHiddenCache);
//textarea AutoWrapping:
var textareaAutoWrapping=_isTextarea?_targetElement.attr("wrap")!=="off":false;var textareaAutoWrappingChanged=checkCacheAutoForce(textareaAutoWrapping,_textareaAutoWrappingCache);var cssDirection=_hostElement.css("direction");var cssDirectionChanged=checkCacheAutoForce(cssDirection,_cssDirectionCache);var boxSizing=_hostElement.css("box-sizing");var boxSizingChanged=checkCacheAutoForce(boxSizing,_cssBoxSizingCache);var padding={c:force,t:parseToZeroOrNumber(_hostElement.css(_strPaddingMinus+_strTop)),r:parseToZeroOrNumber(_hostElement.css(_strPaddingMinus+_strRight)),b:parseToZeroOrNumber(_hostElement.css(_strPaddingMinus+_strBottom)),l:parseToZeroOrNumber(_hostElement.css(_strPaddingMinus+_strLeft))};var sizeAutoObserverElementBCRect;try{sizeAutoObserverElementBCRect=_sizeAutoObserverAdded?_sizeAutoObserverElementNative[LEXICON.bCR]():null}catch(ex){return}_isRTL=cssDirection==="rtl";_isBorderBox=boxSizing==="border-box";var isRTLLeft=_isRTL?_strLeft:_strRight;var isRTLRight=_isRTL?_strRight:_strLeft;var widthAutoResizeDetection=false;var widthAutoObserverDetection=_sizeAutoObserverAdded&&_hostElement.css(_strFloat)!=="none"?MATH.round(sizeAutoObserverElementBCRect.right-sizeAutoObserverElementBCRect.left)===0&&(!paddingAbsolute?_hostElementNative[LEXICON.cW]-_paddingX>0:true):false;if(sizeAutoCapable&&!widthAutoObserverDetection){var tmpCurrHostWidth=_hostElementNative[LEXICON.oW];var tmpCurrContentGlueWidth=_contentGlueElement.css(_strWidth);_contentGlueElement.css(_strWidth,_strAuto);var tmpNewHostWidth=_hostElementNative[LEXICON.oW];_contentGlueElement.css(_strWidth,tmpCurrContentGlueWidth);widthAutoResizeDetection=tmpCurrHostWidth!==tmpNewHostWidth;if(!widthAutoResizeDetection){_contentGlueElement.css(_strWidth,tmpCurrHostWidth+1);tmpNewHostWidth=_hostElementNative[LEXICON.oW];_contentGlueElement.css(_strWidth,tmpCurrContentGlueWidth);widthAutoResizeDetection=tmpCurrHostWidth!==tmpNewHostWidth}}var widthAuto=(widthAutoObserverDetection||widthAutoResizeDetection)&&sizeAutoCapable&&!displayIsHidden;var widthAutoChanged=checkCacheAutoForce(widthAuto,_widthAutoCache);var wasWidthAuto=!widthAuto&&_widthAutoCache;var heightAuto=_sizeAutoObserverAdded&&sizeAutoCapable&&!displayIsHidden?MATH.round(sizeAutoObserverElementBCRect.bottom-sizeAutoObserverElementBCRect.top)===0:false;var heightAutoChanged=checkCacheAutoForce(heightAuto,_heightAutoCache);var wasHeightAuto=!heightAuto&&_heightAutoCache;var strMinusWidth="-"+_strWidth;var updateBorderX=widthAuto&&_isBorderBox||!_isBorderBox;var updateBorderY=heightAuto&&_isBorderBox||!_isBorderBox;var border={c:force,t:updateBorderY?parseToZeroOrNumber(_hostElement.css(_strBorderMinus+_strTop+strMinusWidth),true):0,r:updateBorderX?parseToZeroOrNumber(_hostElement.css(_strBorderMinus+_strRight+strMinusWidth),true):0,b:updateBorderY?parseToZeroOrNumber(_hostElement.css(_strBorderMinus+_strBottom+strMinusWidth),true):0,l:updateBorderX?parseToZeroOrNumber(_hostElement.css(_strBorderMinus+_strLeft+strMinusWidth),true):0};var margin={c:force,t:parseToZeroOrNumber(_hostElement.css(_strMarginMinus+_strTop)),r:parseToZeroOrNumber(_hostElement.css(_strMarginMinus+_strRight)),b:parseToZeroOrNumber(_hostElement.css(_strMarginMinus+_strBottom)),l:parseToZeroOrNumber(_hostElement.css(_strMarginMinus+_strLeft))};var cssMaxValue={h:String(_hostElement.css(_strMaxMinus+_strHeight)),w:String(_hostElement.css(_strMaxMinus+_strWidth))};var contentElementCSS={};var contentGlueElementCSS={};var getHostSize=function(){return{w:_hostElementNative[LEXICON.cW],h:_hostElementNative[LEXICON.cH]}};var getViewportSize=function(){return{w:_paddingElementNative[LEXICON.oW]+MATH.max(0,_contentElementNative[LEXICON.cW]-_contentElementNative[LEXICON.sW]),h:_paddingElementNative[LEXICON.oH]+MATH.max(0,_contentElementNative[LEXICON.cH]-_contentElementNative[LEXICON.sH])}};var paddingAbsoluteX=_paddingX=padding.l+padding.r;var paddingAbsoluteY=_paddingY=padding.t+padding.b;paddingAbsoluteX*=paddingAbsolute?1:0;paddingAbsoluteY*=paddingAbsolute?1:0;padding.c=checkCacheAutoForce(padding,_cssPaddingCache);_borderX=border.l+border.r;_borderY=border.t+border.b;border.c=checkCacheAutoForce(border,_cssBorderCache);_marginX=margin.l+margin.r;_marginY=margin.t+margin.b;margin.c=checkCacheAutoForce(margin,_cssMarginCache);cssMaxValue.ih=parseToZeroOrNumber(cssMaxValue.h);cssMaxValue.iw=parseToZeroOrNumber(cssMaxValue.w);cssMaxValue.ch=cssMaxValue.h.indexOf("px")>-1;cssMaxValue.cw=cssMaxValue.w.indexOf("px")>-1;cssMaxValue.c=checkCacheAutoForce(cssMaxValue,_cssMaxValueCache);_displayIsHiddenCache=displayIsHidden;_textareaAutoWrappingCache=textareaAutoWrapping;_cssDirectionCache=cssDirection;_cssBoxSizingCache=boxSizing;_widthAutoCache=widthAuto;_heightAutoCache=heightAuto;_cssPaddingCache=padding;_cssBorderCache=border;_cssMarginCache=margin;_cssMaxValueCache=cssMaxValue;if(cssDirectionChanged&&_sizeAutoObserverAdded)_sizeAutoObserverElement.css(_strFloat,isRTLRight);if(padding.c||cssDirectionChanged||paddingAbsoluteChanged||widthAutoChanged||heightAutoChanged||boxSizingChanged||sizeAutoCapableChanged){var paddingElementCSS={};var textareaCSS={};setTopRightBottomLeft(contentGlueElementCSS,_strMarginMinus,[-padding.t,-padding.r,-padding.b,-padding.l]);if(paddingAbsolute){setTopRightBottomLeft(paddingElementCSS,_strEmpty,[padding.t,padding.r,padding.b,padding.l]);if(_isTextarea)setTopRightBottomLeft(textareaCSS,_strPaddingMinus);else setTopRightBottomLeft(contentElementCSS,_strPaddingMinus)}else{setTopRightBottomLeft(paddingElementCSS,_strEmpty);if(_isTextarea)setTopRightBottomLeft(textareaCSS,_strPaddingMinus,[padding.t,padding.r,padding.b,padding.l]);else setTopRightBottomLeft(contentElementCSS,_strPaddingMinus,[padding.t,padding.r,padding.b,padding.l])}_paddingElement.css(paddingElementCSS);_targetElement.css(textareaCSS)}_viewportSize=getViewportSize();var textareaSize=_isTextarea?textareaUpdate():false;var textareaSizeChanged=_isTextarea&&checkCacheAutoForce(textareaSize,_textareaSizeCache);var textareaDynOrigSize=_isTextarea&&textareaSize?{w:textareaDynWidth?textareaSize._dynamicWidth:textareaSize._originalWidth,h:textareaDynHeight?textareaSize._dynamicHeight:textareaSize._originalHeight}:{};_textareaSizeCache=textareaSize;if(heightAuto&&(heightAutoChanged||paddingAbsoluteChanged||boxSizingChanged||cssMaxValue.c||padding.c||border.c)){/*
                        if (cssMaxValue.ch)
                            contentElementCSS[_strMaxMinus + _strHeight] =
                                (cssMaxValue.ch ? (cssMaxValue.ih - paddingAbsoluteY + (_isBorderBox ? -_borderY : _paddingY))
                                : _strEmpty);
                        */
contentElementCSS[_strHeight]=_strAuto}else if(heightAutoChanged||paddingAbsoluteChanged){contentElementCSS[_strMaxMinus+_strHeight]=_strEmpty;contentElementCSS[_strHeight]=_strHundredPercent}if(widthAuto&&(widthAutoChanged||paddingAbsoluteChanged||boxSizingChanged||cssMaxValue.c||padding.c||border.c||cssDirectionChanged)){/*
                        if (cssMaxValue.cw)
                            contentElementCSS[_strMaxMinus + _strWidth] =
                                (cssMaxValue.cw ? (cssMaxValue.iw - paddingAbsoluteX + (_isBorderBox ? -_borderX : _paddingX)) +
                                (_nativeScrollbarIsOverlaid.y ? _overlayScrollbarDummySize.y : 0)
                                : _strEmpty);
                        */
contentElementCSS[_strWidth]=_strAuto;contentGlueElementCSS[_strMaxMinus+_strWidth]=_strHundredPercent}else if(widthAutoChanged||paddingAbsoluteChanged){contentElementCSS[_strMaxMinus+_strWidth]=_strEmpty;contentElementCSS[_strWidth]=_strHundredPercent;contentElementCSS[_strFloat]=_strEmpty;contentGlueElementCSS[_strMaxMinus+_strWidth]=_strEmpty}if(widthAuto){if(!cssMaxValue.cw)contentElementCSS[_strMaxMinus+_strWidth]=_strEmpty;
//textareaDynOrigSize.w || _strAuto :: doesnt works because applied margin will shift width
contentGlueElementCSS[_strWidth]=_strAuto;contentElementCSS[_strWidth]=_strAuto;contentElementCSS[_strFloat]=isRTLRight}else{contentGlueElementCSS[_strWidth]=_strEmpty}if(heightAuto){if(!cssMaxValue.ch)contentElementCSS[_strMaxMinus+_strHeight]=_strEmpty;contentGlueElementCSS[_strHeight]=textareaDynOrigSize.h||_contentElementNative[LEXICON.cH]}else{contentGlueElementCSS[_strHeight]=_strEmpty}if(sizeAutoCapable)_contentGlueElement.css(contentGlueElementCSS);_contentElement.css(contentElementCSS);contentElementCSS={};contentGlueElementCSS={};if(hostSizeChanged||contentSizeChanged||textareaSizeChanged||cssDirectionChanged||boxSizingChanged||paddingAbsoluteChanged||widthAutoChanged||widthAuto||heightAutoChanged||heightAuto||cssMaxValue.c||ignoreOverlayScrollbarHidingChanged||overflowBehaviorChanged||clipAlwaysChanged||resizeChanged||scrollbarsVisibilityChanged||scrollbarsAutoHideChanged||scrollbarsDragScrollingChanged||scrollbarsClickScrollingChanged||textareaDynWidthChanged||textareaDynHeightChanged||textareaAutoWrappingChanged){var strOverflow="overflow";var strOverflowX=strOverflow+"-x";var strOverflowY=strOverflow+"-y";var strHidden="hidden";var strVisible="visible";var hideOverflow4CorrectMeasuring=_restrictedMeasuring?_nativeScrollbarIsOverlaid.x||_nativeScrollbarIsOverlaid.y||(_viewportSize.w<_nativeScrollbarMinSize.y||_viewportSize.h<_nativeScrollbarMinSize.x)||heightAuto||displayIsHiddenChanged:heightAuto;
//don't change the overflow prop as it is very expensive and affects performance !A LOT!
var viewportElementResetCSS={};var resetXTmp=_hasOverflowCache.y&&_hideOverflowCache.ys&&!ignoreOverlayScrollbarHiding&&!_nativeScrollbarStyling?_nativeScrollbarIsOverlaid.y?_viewportElement.css(isRTLLeft):-_nativeScrollbarSize.y:0;var resetBottomTmp=_hasOverflowCache.x&&_hideOverflowCache.xs&&!ignoreOverlayScrollbarHiding&&!_nativeScrollbarStyling?_nativeScrollbarIsOverlaid.x?_viewportElement.css(_strBottom):-_nativeScrollbarSize.x:0;setTopRightBottomLeft(viewportElementResetCSS,_strEmpty);_viewportElement.css(viewportElementResetCSS);if(hideOverflow4CorrectMeasuring)_contentElement.css(strOverflow,strHidden);var contentMeasureElement=getContentMeasureElement();var contentMeasureElementGuaranty=_restrictedMeasuring&&!hideOverflow4CorrectMeasuring?_viewportElementNative:contentMeasureElement;var contentSize={w:textareaDynOrigSize.w||contentMeasureElement[LEXICON.cW],h:textareaDynOrigSize.h||contentMeasureElement[LEXICON.cH]};var scrollSize={w:MATH.max(contentMeasureElement[LEXICON.sW],contentMeasureElementGuaranty[LEXICON.sW]),h:MATH.max(contentMeasureElement[LEXICON.sH],contentMeasureElementGuaranty[LEXICON.sH])};viewportElementResetCSS[_strBottom]=wasHeightAuto?_strEmpty:resetBottomTmp;viewportElementResetCSS[isRTLLeft]=wasWidthAuto?_strEmpty:resetXTmp;_viewportElement.css(viewportElementResetCSS);_viewportSize=getViewportSize();var hostSize=getHostSize();var contentGlueSize={
//client/scrollSize + AbsolutePadding -> because padding is only applied to the paddingElement if its absolute, so you have to add it manually
//hostSize is clientSize -> so padding should be added manually, right? FALSE! Because content glue is inside hostElement, so we don't have to worry about padding
w:MATH.max((widthAuto?contentSize.w:scrollSize.w)+paddingAbsoluteX,hostSize.w),h:MATH.max((heightAuto?contentSize.h:scrollSize.h)+paddingAbsoluteY,hostSize.h)};contentGlueSize.c=checkCacheAutoForce(contentGlueSize,_contentGlueSizeCache);_contentGlueSizeCache=contentGlueSize;if(sizeAutoCapable){if(contentGlueSize.c||(heightAuto||widthAuto)){contentGlueElementCSS[_strWidth]=contentGlueSize.w;contentGlueElementCSS[_strHeight]=contentGlueSize.h;if(!_isTextarea){contentSize={w:contentMeasureElement[LEXICON.cW],h:contentMeasureElement[LEXICON.cH]}}}var textareaCoverCSS={};var setContentGlueElementCSSfunction=function(horizontal){var scrollbarVars=getScrollbarVars(horizontal);var wh=scrollbarVars._w_h;var strWH=scrollbarVars._width_height;var autoSize=horizontal?widthAuto:heightAuto;var borderSize=horizontal?_borderX:_borderY;var paddingSize=horizontal?_paddingX:_paddingY;var marginSize=horizontal?_marginX:_marginY;var maxSize=contentGlueElementCSS[strWH]+(_isBorderBox?borderSize:-paddingSize);if(!autoSize||!autoSize&&border.c)contentGlueElementCSS[strWH]=hostSize[wh]-(_isBorderBox?0:paddingSize+borderSize)-1-marginSize;if(autoSize&&cssMaxValue["c"+wh]&&cssMaxValue["i"+wh]===maxSize)contentGlueElementCSS[strWH]=maxSize+(_isBorderBox?0:paddingSize)+1;if(autoSize&&contentSize[wh]<_viewportSize[wh]&&(horizontal&&_isTextarea?!textareaAutoWrapping:true)){if(_isTextarea)textareaCoverCSS[strWH]=parseToZeroOrNumber(_textareaCoverElement.css(strWH))-1;contentGlueElementCSS[strWH]-=1}if(contentSize[wh]>0)contentGlueElementCSS[strWH]=MATH.max(1,contentGlueElementCSS[strWH])};setContentGlueElementCSSfunction(true);setContentGlueElementCSSfunction(false);if(_isTextarea)_textareaCoverElement.css(textareaCoverCSS);_contentGlueElement.css(contentGlueElementCSS)}if(widthAuto)contentElementCSS[_strWidth]=_strHundredPercent;if(widthAuto&&!_isBorderBox&&!_mutationObserversConnected)contentElementCSS[_strFloat]="none";_contentElement.css(contentElementCSS);contentElementCSS={};var contentScrollSize={w:MATH.max(contentMeasureElement[LEXICON.sW],contentMeasureElementGuaranty[LEXICON.sW]),h:MATH.max(contentMeasureElement[LEXICON.sH],contentMeasureElementGuaranty[LEXICON.sH])};contentScrollSize.c=contentSizeChanged=checkCacheAutoForce(contentScrollSize,_contentScrollSizeCache);_contentScrollSizeCache=contentScrollSize;if(hideOverflow4CorrectMeasuring)_contentElement.css(strOverflow,_strEmpty);_viewportSize=getViewportSize();hostSize=getHostSize();hostSizeChanged=checkCacheAutoForce(hostSize,_hostSizeCache);_hostSizeCache=hostSize;var hideOverflowForceTextarea=_isTextarea&&(_viewportSize.w===0||_viewportSize.h===0);var previousOverflow=_overflowAmountCache;var overflowBehaviorIsVS={};var overflowBehaviorIsVH={};var overflowBehaviorIsS={};var overflowAmount={};var hasOverflow={};var hideOverflow={};var canScroll={};var viewportRect=_paddingElementNative[LEXICON.bCR]();var setOverflowVariables=function(horizontal){var scrollbarVars=getScrollbarVars(horizontal);var scrollbarVarsInverted=getScrollbarVars(!horizontal);var xyI=scrollbarVarsInverted._x_y;var xy=scrollbarVars._x_y;var wh=scrollbarVars._w_h;var widthHeight=scrollbarVars._width_height;var scrollMax=_strScroll+scrollbarVars._Left_Top+"Max";var fractionalOverflowAmount=viewportRect[widthHeight]?MATH.abs(viewportRect[widthHeight]-_viewportSize[wh]):0;overflowBehaviorIsVS[xy]=overflowBehavior[xy]==="v-s";overflowBehaviorIsVH[xy]=overflowBehavior[xy]==="v-h";overflowBehaviorIsS[xy]=overflowBehavior[xy]==="s";overflowAmount[xy]=MATH.max(0,MATH.round((contentScrollSize[wh]-_viewportSize[wh])*100)/100);overflowAmount[xy]*=hideOverflowForceTextarea||_viewportElementNative[scrollMax]===0&&fractionalOverflowAmount>0&&fractionalOverflowAmount<1?0:1;hasOverflow[xy]=overflowAmount[xy]>0;hideOverflow[xy]=overflowBehaviorIsVS[xy]||overflowBehaviorIsVH[xy]?hasOverflow[xyI]&&!overflowBehaviorIsVS[xyI]&&!overflowBehaviorIsVH[xyI]:hasOverflow[xy];hideOverflow[xy+"s"]=hideOverflow[xy]?overflowBehaviorIsS[xy]||overflowBehaviorIsVS[xy]:false;canScroll[xy]=hasOverflow[xy]&&hideOverflow[xy+"s"]};setOverflowVariables(true);setOverflowVariables(false);overflowAmount.c=checkCacheAutoForce(overflowAmount,_overflowAmountCache);_overflowAmountCache=overflowAmount;hasOverflow.c=checkCacheAutoForce(hasOverflow,_hasOverflowCache);_hasOverflowCache=hasOverflow;hideOverflow.c=checkCacheAutoForce(hideOverflow,_hideOverflowCache);_hideOverflowCache=hideOverflow;if(_nativeScrollbarIsOverlaid.x||_nativeScrollbarIsOverlaid.y){var borderDesign="px solid transparent";var contentArrangeElementCSS={};var arrangeContent={};var arrangeChanged=force;var setContentElementCSS;if(hasOverflow.x||hasOverflow.y){arrangeContent.w=_nativeScrollbarIsOverlaid.y&&hasOverflow.y?contentScrollSize.w+_overlayScrollbarDummySize.y:_strEmpty;arrangeContent.h=_nativeScrollbarIsOverlaid.x&&hasOverflow.x?contentScrollSize.h+_overlayScrollbarDummySize.x:_strEmpty;arrangeChanged=checkCacheAutoForce(arrangeContent,_arrangeContentSizeCache);_arrangeContentSizeCache=arrangeContent}if(hasOverflow.c||hideOverflow.c||contentScrollSize.c||cssDirectionChanged||widthAutoChanged||heightAutoChanged||widthAuto||heightAuto||ignoreOverlayScrollbarHidingChanged){contentElementCSS[_strMarginMinus+isRTLRight]=contentElementCSS[_strBorderMinus+isRTLRight]=_strEmpty;setContentElementCSS=function(horizontal){var scrollbarVars=getScrollbarVars(horizontal);var scrollbarVarsInverted=getScrollbarVars(!horizontal);var xy=scrollbarVars._x_y;var strDirection=horizontal?_strBottom:isRTLLeft;var invertedAutoSize=horizontal?heightAuto:widthAuto;if(_nativeScrollbarIsOverlaid[xy]&&hasOverflow[xy]&&hideOverflow[xy+"s"]){contentElementCSS[_strMarginMinus+strDirection]=invertedAutoSize?ignoreOverlayScrollbarHiding?_strEmpty:_overlayScrollbarDummySize[xy]:_strEmpty;contentElementCSS[_strBorderMinus+strDirection]=(horizontal?!invertedAutoSize:true)&&!ignoreOverlayScrollbarHiding?_overlayScrollbarDummySize[xy]+borderDesign:_strEmpty}else{arrangeContent[scrollbarVarsInverted._w_h]=contentElementCSS[_strMarginMinus+strDirection]=contentElementCSS[_strBorderMinus+strDirection]=_strEmpty;arrangeChanged=true}};if(_nativeScrollbarStyling){if(ignoreOverlayScrollbarHiding)removeClass(_viewportElement,_classNameViewportNativeScrollbarsInvisible);else addClass(_viewportElement,_classNameViewportNativeScrollbarsInvisible)}else{setContentElementCSS(true);setContentElementCSS(false)}}if(ignoreOverlayScrollbarHiding){arrangeContent.w=arrangeContent.h=_strEmpty;arrangeChanged=true}if(arrangeChanged&&!_nativeScrollbarStyling){contentArrangeElementCSS[_strWidth]=hideOverflow.y?arrangeContent.w:_strEmpty;contentArrangeElementCSS[_strHeight]=hideOverflow.x?arrangeContent.h:_strEmpty;if(!_contentArrangeElement){_contentArrangeElement=FRAMEWORK(generateDiv(_classNameContentArrangeElement));_viewportElement.prepend(_contentArrangeElement)}_contentArrangeElement.css(contentArrangeElementCSS)}_contentElement.css(contentElementCSS)}var viewportElementCSS={};var paddingElementCSS={};var setViewportCSS;if(hostSizeChanged||hasOverflow.c||hideOverflow.c||contentScrollSize.c||overflowBehaviorChanged||boxSizingChanged||ignoreOverlayScrollbarHidingChanged||cssDirectionChanged||clipAlwaysChanged||heightAutoChanged){viewportElementCSS[isRTLRight]=_strEmpty;setViewportCSS=function(horizontal){var scrollbarVars=getScrollbarVars(horizontal);var scrollbarVarsInverted=getScrollbarVars(!horizontal);var xy=scrollbarVars._x_y;var XY=scrollbarVars._X_Y;var strDirection=horizontal?_strBottom:isRTLLeft;var reset=function(){viewportElementCSS[strDirection]=_strEmpty;_contentBorderSize[scrollbarVarsInverted._w_h]=0};if(hasOverflow[xy]&&hideOverflow[xy+"s"]){viewportElementCSS[strOverflow+XY]=_strScroll;if(ignoreOverlayScrollbarHiding||_nativeScrollbarStyling){reset()}else{viewportElementCSS[strDirection]=-(_nativeScrollbarIsOverlaid[xy]?_overlayScrollbarDummySize[xy]:_nativeScrollbarSize[xy]);_contentBorderSize[scrollbarVarsInverted._w_h]=_nativeScrollbarIsOverlaid[xy]?_overlayScrollbarDummySize[scrollbarVarsInverted._x_y]:0}}else{viewportElementCSS[strOverflow+XY]=_strEmpty;reset()}};setViewportCSS(true);setViewportCSS(false);if(!_nativeScrollbarStyling&&(_viewportSize.h<_nativeScrollbarMinSize.x||_viewportSize.w<_nativeScrollbarMinSize.y)&&(hasOverflow.x&&hideOverflow.x&&!_nativeScrollbarIsOverlaid.x||hasOverflow.y&&hideOverflow.y&&!_nativeScrollbarIsOverlaid.y)){viewportElementCSS[_strPaddingMinus+_strTop]=_nativeScrollbarMinSize.x;viewportElementCSS[_strMarginMinus+_strTop]=-_nativeScrollbarMinSize.x;viewportElementCSS[_strPaddingMinus+isRTLRight]=_nativeScrollbarMinSize.y;viewportElementCSS[_strMarginMinus+isRTLRight]=-_nativeScrollbarMinSize.y}else{viewportElementCSS[_strPaddingMinus+_strTop]=viewportElementCSS[_strMarginMinus+_strTop]=viewportElementCSS[_strPaddingMinus+isRTLRight]=viewportElementCSS[_strMarginMinus+isRTLRight]=_strEmpty}viewportElementCSS[_strPaddingMinus+isRTLLeft]=viewportElementCSS[_strMarginMinus+isRTLLeft]=_strEmpty;if(hasOverflow.x&&hideOverflow.x||hasOverflow.y&&hideOverflow.y||hideOverflowForceTextarea){if(_isTextarea&&hideOverflowForceTextarea){paddingElementCSS[strOverflowX]=paddingElementCSS[strOverflowY]=strHidden}}else{if(!clipAlways||(overflowBehaviorIsVH.x||overflowBehaviorIsVS.x||overflowBehaviorIsVH.y||overflowBehaviorIsVS.y)){if(_isTextarea){paddingElementCSS[strOverflowX]=paddingElementCSS[strOverflowY]=_strEmpty}viewportElementCSS[strOverflowX]=viewportElementCSS[strOverflowY]=strVisible}}_paddingElement.css(paddingElementCSS);_viewportElement.css(viewportElementCSS);viewportElementCSS={};if((hasOverflow.c||boxSizingChanged||widthAutoChanged||heightAutoChanged)&&!(_nativeScrollbarIsOverlaid.x&&_nativeScrollbarIsOverlaid.y)){var elementStyle=_contentElementNative[LEXICON.s];var dump;elementStyle.webkitTransform="scale(1)";elementStyle.display="run-in";dump=_contentElementNative[LEXICON.oH];elementStyle.display=_strEmpty;elementStyle.webkitTransform=_strEmpty}}contentElementCSS={};if(cssDirectionChanged||widthAutoChanged||heightAutoChanged){if(_isRTL&&widthAuto){var floatTmp=_contentElement.css(_strFloat);var posLeftWithoutFloat=MATH.round(_contentElement.css(_strFloat,_strEmpty).css(_strLeft,_strEmpty).position().left);_contentElement.css(_strFloat,floatTmp);var posLeftWithFloat=MATH.round(_contentElement.position().left);if(posLeftWithoutFloat!==posLeftWithFloat)contentElementCSS[_strLeft]=posLeftWithoutFloat}else{contentElementCSS[_strLeft]=_strEmpty}}_contentElement.css(contentElementCSS);if(_isTextarea&&contentSizeChanged){var textareaInfo=getTextareaInfo();if(textareaInfo){var textareaRowsChanged=_textareaInfoCache===undefined?true:textareaInfo._rows!==_textareaInfoCache._rows;var cursorRow=textareaInfo._cursorRow;var cursorCol=textareaInfo._cursorColumn;var widestRow=textareaInfo._widestRow;var lastRow=textareaInfo._rows;var lastCol=textareaInfo._columns;var cursorPos=textareaInfo._cursorPosition;var cursorMax=textareaInfo._cursorMax;var cursorIsLastPosition=cursorPos>=cursorMax&&_textareaHasFocus;var textareaScrollAmount={x:!textareaAutoWrapping&&(cursorCol===lastCol&&cursorRow===widestRow)?_overflowAmountCache.x:-1,y:(textareaAutoWrapping?cursorIsLastPosition||textareaRowsChanged&&(previousOverflow!==undefined?currScroll.y===previousOverflow.y:false):(cursorIsLastPosition||textareaRowsChanged)&&cursorRow===lastRow)?_overflowAmountCache.y:-1};currScroll.x=textareaScrollAmount.x>-1?_isRTL&&_normalizeRTLCache&&_rtlScrollBehavior.i?0:textareaScrollAmount.x:currScroll.x;currScroll.y=textareaScrollAmount.y>-1?textareaScrollAmount.y:currScroll.y}_textareaInfoCache=textareaInfo}if(_isRTL&&_rtlScrollBehavior.i&&_nativeScrollbarIsOverlaid.y&&hasOverflow.x&&_normalizeRTLCache)currScroll.x+=_contentBorderSize.w||0;if(widthAuto)_hostElement[_strScrollLeft](0);if(heightAuto)_hostElement[_strScrollTop](0);_viewportElement[_strScrollLeft](currScroll.x)[_strScrollTop](currScroll.y);var scrollbarsVisibilityVisible=scrollbarsVisibility==="v";var scrollbarsVisibilityHidden=scrollbarsVisibility==="h";var scrollbarsVisibilityAuto=scrollbarsVisibility==="a";var showScrollbarH=COMPATIBILITY.bind(refreshScrollbarAppearance,0,true,true,canScroll.x);var showScrollbarV=COMPATIBILITY.bind(refreshScrollbarAppearance,0,false,true,canScroll.y);var hideScrollbarH=COMPATIBILITY.bind(refreshScrollbarAppearance,0,true,false,canScroll.x);var hideScrollbarV=COMPATIBILITY.bind(refreshScrollbarAppearance,0,false,false,canScroll.y);if(hideOverflow.x||hideOverflow.y)addClass(_hostElement,_classNameHostOverflow);else removeClass(_hostElement,_classNameHostOverflow);if(hideOverflow.x)addClass(_hostElement,_classNameHostOverflowX);else removeClass(_hostElement,_classNameHostOverflowX);if(hideOverflow.y)addClass(_hostElement,_classNameHostOverflowY);else removeClass(_hostElement,_classNameHostOverflowY);if(cssDirectionChanged){if(_isRTL)addClass(_hostElement,_classNameHostRTL);else removeClass(_hostElement,_classNameHostRTL)}if(_isBody)addClass(_hostElement,_classNameHostResizeDisabled);if(resizeChanged){removeClass(_scrollbarCornerElement,[_classNameScrollbarCornerResize,_classNameScrollbarCornerResizeB,_classNameScrollbarCornerResizeH,_classNameScrollbarCornerResizeV].join(_strSpace));if(_resizeNone){addClass(_hostElement,_classNameHostResizeDisabled)}else{removeClass(_hostElement,_classNameHostResizeDisabled);addClass(_scrollbarCornerElement,_classNameScrollbarCornerResize);if(_resizeBoth)addClass(_scrollbarCornerElement,_classNameScrollbarCornerResizeB);else if(_resizeHorizontal)addClass(_scrollbarCornerElement,_classNameScrollbarCornerResizeH);else if(_resizeVertical)addClass(_scrollbarCornerElement,_classNameScrollbarCornerResizeV)}}if(scrollbarsVisibilityChanged||overflowBehaviorChanged||hideOverflow.c||hasOverflow.c||ignoreOverlayScrollbarHidingChanged){if(ignoreOverlayScrollbarHiding){if(ignoreOverlayScrollbarHidingChanged){removeClass(_hostElement,_classNameHostScrolling);if(ignoreOverlayScrollbarHiding){hideScrollbarH();hideScrollbarV()}}}else if(scrollbarsVisibilityAuto){if(canScroll.x)showScrollbarH();else hideScrollbarH();if(canScroll.y)showScrollbarV();else hideScrollbarV()}else if(scrollbarsVisibilityVisible){showScrollbarH();showScrollbarV()}else if(scrollbarsVisibilityHidden){hideScrollbarH();hideScrollbarV()}}if(scrollbarsAutoHideChanged||ignoreOverlayScrollbarHidingChanged){if(_scrollbarsAutoHideLeave||_scrollbarsAutoHideMove){setupHostMouseTouchEvents(true);setupHostMouseTouchEvents()}else{setupHostMouseTouchEvents(true)}if(_scrollbarsAutoHideNever)refreshScrollbarsAutoHide(true);else refreshScrollbarsAutoHide(false,true)}if(hostSizeChanged||overflowAmount.c||heightAutoChanged||widthAutoChanged||resizeChanged||boxSizingChanged||paddingAbsoluteChanged||ignoreOverlayScrollbarHidingChanged||cssDirectionChanged){refreshScrollbarHandleLength(true);refreshScrollbarHandleOffset(true);refreshScrollbarHandleLength(false);refreshScrollbarHandleOffset(false)}if(scrollbarsClickScrollingChanged)refreshScrollbarsInteractive(true,scrollbarsClickScrolling);if(scrollbarsDragScrollingChanged)refreshScrollbarsInteractive(false,scrollbarsDragScrolling);if(cssDirectionChanged){dispatchCallback("onDirectionChanged",{isRTL:_isRTL,dir:cssDirection})}if(hostSizeChanged){dispatchCallback("onHostSizeChanged",{width:_hostSizeCache.w,height:_hostSizeCache.h})}if(contentSizeChanged){dispatchCallback("onContentSizeChanged",{width:_contentScrollSizeCache.w,height:_contentScrollSizeCache.h})}if(hasOverflow.c||hideOverflow.c){dispatchCallback("onOverflowChanged",{x:hasOverflow.x,y:hasOverflow.y,xScrollable:hideOverflow.xs,yScrollable:hideOverflow.ys,clipped:hideOverflow.x||hideOverflow.y})}if(overflowAmount.c){dispatchCallback("onOverflowAmountChanged",{x:overflowAmount.x,y:overflowAmount.y})}}if(_isBody&&_bodyMinSizeCache&&(_hasOverflowCache.c||_bodyMinSizeCache.c)){if(!_bodyMinSizeCache.f)bodyMinSizeChanged();if(_nativeScrollbarIsOverlaid.y&&_hasOverflowCache.x)_contentElement.css(_strMinMinus+_strWidth,_bodyMinSizeCache.w+_overlayScrollbarDummySize.y);if(_nativeScrollbarIsOverlaid.x&&_hasOverflowCache.y)_contentElement.css(_strMinMinus+_strHeight,_bodyMinSizeCache.h+_overlayScrollbarDummySize.x);_bodyMinSizeCache.c=false}
//freezeResizeObserver(_sizeAutoObserverElement, false);
dispatchCallback("onUpdated",{forced:force})}/**
                 * Sets new options but doesn't call the update method.
                 * @param newOptions The object which contains the new options.
                 * @returns {*} A object which contains the changed options.
                 */
function setOptions(newOptions){var validatedOpts=_pluginsOptions._validate(newOptions,_pluginsOptions._template,true,_currentOptions);_currentOptions=extendDeep({},_currentOptions,validatedOpts._default);_currentPreparedOptions=extendDeep({},_currentPreparedOptions,validatedOpts._prepared);return validatedOpts._prepared}function setupStructureDOM(destroy){var strParent="parent";var classNameResizeObserverHost="os-resize-observer-host";var classNameTextareaElementFull=_classNameTextareaElement+_strSpace+_classNameTextInherit;var textareaClass=_isTextarea?_strSpace+_classNameTextInherit:_strEmpty;var adoptAttrs=_currentPreparedOptions.textarea.inheritedAttrs;var adoptAttrsMap={};var applyAdoptedAttrs=function(){var applyAdoptedAttrsElm=destroy?_targetElement:_hostElement;each(adoptAttrsMap,function(key,value){if(type(value)==TYPES.s){if(key==LEXICON.c)applyAdoptedAttrsElm.addClass(value);else applyAdoptedAttrsElm.attr(key,value)}})};var hostElementClassNames=[_classNameHostElement,_classNameHostTextareaElement,_classNameHostResizeDisabled,_classNameHostRTL,_classNameHostScrollbarHorizontalHidden,_classNameHostScrollbarVerticalHidden,_classNameHostTransition,_classNameHostScrolling,_classNameHostOverflow,_classNameHostOverflowX,_classNameHostOverflowY,_classNameThemeNone,_classNameTextareaElement,_classNameTextInherit,_classNameCache].join(_strSpace);var hostElementCSS={};_hostElement=_hostElement||(_isTextarea?_domExists?_targetElement[strParent]()[strParent]()[strParent]()[strParent]():FRAMEWORK(generateDiv(_classNameHostTextareaElement)):_targetElement);_contentElement=_contentElement||selectOrGenerateDivByClass(_classNameContentElement+textareaClass);_viewportElement=_viewportElement||selectOrGenerateDivByClass(_classNameViewportElement+textareaClass);_paddingElement=_paddingElement||selectOrGenerateDivByClass(_classNamePaddingElement+textareaClass);_sizeObserverElement=_sizeObserverElement||selectOrGenerateDivByClass(classNameResizeObserverHost);_textareaCoverElement=_textareaCoverElement||(_isTextarea?selectOrGenerateDivByClass(_classNameTextareaCoverElement):undefined);if(destroy)removeClass(_hostElement,hostElementClassNames);adoptAttrs=type(adoptAttrs)==TYPES.s?adoptAttrs.split(_strSpace):adoptAttrs;if(type(adoptAttrs)==TYPES.a&&_isTextarea){each(adoptAttrs,function(i,v){if(type(v)==TYPES.s){adoptAttrsMap[v]=destroy?_hostElement.attr(v):_targetElement.attr(v)}})}if(!destroy){if(_isTextarea){if(!_currentPreparedOptions.sizeAutoCapable){hostElementCSS[_strWidth]=_targetElement.css(_strWidth);hostElementCSS[_strHeight]=_targetElement.css(_strHeight)}if(!_domExists)_targetElement.addClass(_classNameTextInherit).wrap(_hostElement);_hostElement=_targetElement[strParent]().css(hostElementCSS)}if(!_domExists){addClass(_targetElement,_isTextarea?classNameTextareaElementFull:_classNameHostElement);_hostElement.wrapInner(_contentElement).wrapInner(_viewportElement).wrapInner(_paddingElement).prepend(_sizeObserverElement);_contentElement=findFirst(_hostElement,_strDot+_classNameContentElement);_viewportElement=findFirst(_hostElement,_strDot+_classNameViewportElement);_paddingElement=findFirst(_hostElement,_strDot+_classNamePaddingElement);if(_isTextarea){_contentElement.prepend(_textareaCoverElement);applyAdoptedAttrs()}}if(_nativeScrollbarStyling)addClass(_viewportElement,_classNameViewportNativeScrollbarsInvisible);if(_nativeScrollbarIsOverlaid.x&&_nativeScrollbarIsOverlaid.y)addClass(_viewportElement,_classNameViewportNativeScrollbarsOverlaid);if(_isBody)addClass(_htmlElement,_classNameHTMLElement);_sizeObserverElementNative=_sizeObserverElement[0];_hostElementNative=_hostElement[0];_paddingElementNative=_paddingElement[0];_viewportElementNative=_viewportElement[0];_contentElementNative=_contentElement[0]}else{if(_domExists&&_initialized){_sizeObserverElement.children().remove();each([_paddingElement,_viewportElement,_contentElement,_textareaCoverElement],function(i,elm){if(elm){removeClass(elm.removeAttr(LEXICON.s),_classNamesDynamicDestroy)}});addClass(_hostElement,_isTextarea?_classNameHostTextareaElement:_classNameHostElement)}else{remove(_sizeObserverElement);_contentElement.contents().unwrap().unwrap().unwrap();if(_isTextarea){_targetElement.unwrap();remove(_hostElement);remove(_textareaCoverElement);applyAdoptedAttrs()}}if(_isTextarea)_targetElement.removeAttr(LEXICON.s);if(_isBody)removeClass(_htmlElement,_classNameHTMLElement)}}/**
                 * Adds or removes all wrapper elements interactivity events.
                 * @param destroy Indicates whether the Events shall be added or removed.
                 */
function setupStructureEvents(){var textareaKeyDownRestrictedKeyCodes=[112,113,114,115,116,117,118,119,120,121,123,33,34,37,38,39,40,16,17,18,19,20,144];var textareaKeyDownKeyCodesList=[];var textareaUpdateIntervalID;var scrollStopTimeoutId;var scrollStopDelay=175;var strFocus="focus";function updateTextarea(doClearInterval){textareaUpdate();_base.update(_strAuto);if(doClearInterval&&_autoUpdateRecommended)clearInterval(textareaUpdateIntervalID)}function textareaOnScroll(event){_targetElement[_strScrollLeft](_rtlScrollBehavior.i&&_normalizeRTLCache?9999999:0);_targetElement[_strScrollTop](0);COMPATIBILITY.prvD(event);COMPATIBILITY.stpP(event);return false}function textareaOnDrop(event){setTimeout(function(){if(!_destroyed)updateTextarea()},50)}function textareaOnFocus(){_textareaHasFocus=true;addClass(_hostElement,strFocus)}function textareaOnFocusout(){_textareaHasFocus=false;textareaKeyDownKeyCodesList=[];removeClass(_hostElement,strFocus);updateTextarea(true)}function textareaOnKeyDown(event){var keyCode=event.keyCode;if(inArray(keyCode,textareaKeyDownRestrictedKeyCodes)<0){if(!textareaKeyDownKeyCodesList[LEXICON.l]){updateTextarea();textareaUpdateIntervalID=setInterval(updateTextarea,1e3/60)}if(inArray(keyCode,textareaKeyDownKeyCodesList)<0)textareaKeyDownKeyCodesList.push(keyCode)}}function textareaOnKeyUp(event){var keyCode=event.keyCode;var index=inArray(keyCode,textareaKeyDownKeyCodesList);if(inArray(keyCode,textareaKeyDownRestrictedKeyCodes)<0){if(index>-1)textareaKeyDownKeyCodesList.splice(index,1);if(!textareaKeyDownKeyCodesList[LEXICON.l])updateTextarea(true)}}function contentOnTransitionEnd(event){if(_autoUpdateCache===true)return;event=event.originalEvent||event;if(isSizeAffectingCSSProperty(event.propertyName))_base.update(_strAuto)}function viewportOnScroll(event){if(!_sleeping){if(scrollStopTimeoutId!==undefined)clearTimeout(scrollStopTimeoutId);else{if(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove)refreshScrollbarsAutoHide(true);if(!nativeOverlayScrollbarsAreActive())addClass(_hostElement,_classNameHostScrolling);dispatchCallback("onScrollStart",event)}if(!_scrollbarsHandlesDefineScrollPos){refreshScrollbarHandleOffset(true);refreshScrollbarHandleOffset(false)}dispatchCallback("onScroll",event);scrollStopTimeoutId=setTimeout(function(){if(!_destroyed){clearTimeout(scrollStopTimeoutId);scrollStopTimeoutId=undefined;if(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove)refreshScrollbarsAutoHide(false);if(!nativeOverlayScrollbarsAreActive())removeClass(_hostElement,_classNameHostScrolling);dispatchCallback("onScrollStop",event)}},scrollStopDelay)}}if(_isTextarea){if(_msieVersion>9||!_autoUpdateRecommended){addDestroyEventListener(_targetElement,"input",updateTextarea)}else{addDestroyEventListener(_targetElement,[_strKeyDownEvent,_strKeyUpEvent],[textareaOnKeyDown,textareaOnKeyUp])}addDestroyEventListener(_targetElement,[_strScroll,"drop",strFocus,strFocus+"out"],[textareaOnScroll,textareaOnDrop,textareaOnFocus,textareaOnFocusout])}else{addDestroyEventListener(_contentElement,_strTransitionEndEvent,contentOnTransitionEnd)}addDestroyEventListener(_viewportElement,_strScroll,viewportOnScroll,true)}function setupScrollbarsDOM(destroy){var selectOrGenerateScrollbarDOM=function(isHorizontal){var scrollbarClassName=isHorizontal?_classNameScrollbarHorizontal:_classNameScrollbarVertical;var scrollbar=selectOrGenerateDivByClass(_classNameScrollbar+_strSpace+scrollbarClassName,true);var track=selectOrGenerateDivByClass(_classNameScrollbarTrack,scrollbar);var handle=selectOrGenerateDivByClass(_classNameScrollbarHandle,scrollbar);if(!_domExists&&!destroy){scrollbar.append(track);track.append(handle)}return{_scrollbar:scrollbar,_track:track,_handle:handle}};function resetScrollbarDOM(isHorizontal){var scrollbarVars=getScrollbarVars(isHorizontal);var scrollbar=scrollbarVars._scrollbar;var track=scrollbarVars._track;var handle=scrollbarVars._handle;if(_domExists&&_initialized){each([scrollbar,track,handle],function(i,elm){removeClass(elm.removeAttr(LEXICON.s),_classNamesDynamicDestroy)})}else{remove(scrollbar||selectOrGenerateScrollbarDOM(isHorizontal)._scrollbar)}}var horizontalElements;var verticalElements;if(!destroy){horizontalElements=selectOrGenerateScrollbarDOM(true);verticalElements=selectOrGenerateScrollbarDOM();_scrollbarHorizontalElement=horizontalElements._scrollbar;_scrollbarHorizontalTrackElement=horizontalElements._track;_scrollbarHorizontalHandleElement=horizontalElements._handle;_scrollbarVerticalElement=verticalElements._scrollbar;_scrollbarVerticalTrackElement=verticalElements._track;_scrollbarVerticalHandleElement=verticalElements._handle;if(!_domExists){_paddingElement.after(_scrollbarVerticalElement);_paddingElement.after(_scrollbarHorizontalElement)}}else{resetScrollbarDOM(true);resetScrollbarDOM()}}function setupScrollbarEvents(isHorizontal){var scrollbarVars=getScrollbarVars(isHorizontal);var scrollbarVarsInfo=scrollbarVars._info;var insideIFrame=_windowElementNative.top!==_windowElementNative;var xy=scrollbarVars._x_y;var XY=scrollbarVars._X_Y;var scroll=_strScroll+scrollbarVars._Left_Top;var strActive="active";var strSnapHandle="snapHandle";var scrollDurationFactor=1;var increaseDecreaseScrollAmountKeyCodes=[16,17];var trackTimeout;var mouseDownScroll;var mouseDownOffset;var mouseDownInvertedScale;function getPointerPosition(event){return _msieVersion&&insideIFrame?event["screen"+XY]:COMPATIBILITY.page(event)[xy]}function getPreparedScrollbarsOption(name){return _currentPreparedOptions.scrollbars[name]}function increaseTrackScrollAmount(){scrollDurationFactor=.5}function decreaseTrackScrollAmount(){scrollDurationFactor=1}function documentKeyDown(event){if(inArray(event.keyCode,increaseDecreaseScrollAmountKeyCodes)>-1)increaseTrackScrollAmount()}function documentKeyUp(event){if(inArray(event.keyCode,increaseDecreaseScrollAmountKeyCodes)>-1)decreaseTrackScrollAmount()}function onMouseTouchDownContinue(event){var originalEvent=event.originalEvent||event;var isTouchEvent=originalEvent.touches!==undefined;return _sleeping||_destroyed||nativeOverlayScrollbarsAreActive()||!_scrollbarsDragScrollingCache||isTouchEvent&&!getPreparedScrollbarsOption("touchSupport")?false:COMPATIBILITY.mBtn(event)===1||isTouchEvent}function documentDragMove(event){if(onMouseTouchDownContinue(event)){var trackLength=scrollbarVarsInfo._trackLength;var handleLength=scrollbarVarsInfo._handleLength;var scrollRange=scrollbarVarsInfo._maxScroll;var scrollRaw=(getPointerPosition(event)-mouseDownOffset)*mouseDownInvertedScale;var scrollDeltaPercent=scrollRaw/(trackLength-handleLength);var scrollDelta=scrollRange*scrollDeltaPercent;scrollDelta=isFinite(scrollDelta)?scrollDelta:0;if(_isRTL&&isHorizontal&&!_rtlScrollBehavior.i)scrollDelta*=-1;_viewportElement[scroll](MATH.round(mouseDownScroll+scrollDelta));if(_scrollbarsHandlesDefineScrollPos)refreshScrollbarHandleOffset(isHorizontal,mouseDownScroll+scrollDelta);if(!_supportPassiveEvents)COMPATIBILITY.prvD(event)}else documentMouseTouchUp(event)}function documentMouseTouchUp(event){event=event||event.originalEvent;setupResponsiveEventListener(_documentElement,[_strMouseTouchMoveEvent,_strMouseTouchUpEvent,_strKeyDownEvent,_strKeyUpEvent,_strSelectStartEvent],[documentDragMove,documentMouseTouchUp,documentKeyDown,documentKeyUp,documentOnSelectStart],true);if(_scrollbarsHandlesDefineScrollPos)refreshScrollbarHandleOffset(isHorizontal,true);_scrollbarsHandlesDefineScrollPos=false;removeClass(_bodyElement,_classNameDragging);removeClass(scrollbarVars._handle,strActive);removeClass(scrollbarVars._track,strActive);removeClass(scrollbarVars._scrollbar,strActive);mouseDownScroll=undefined;mouseDownOffset=undefined;mouseDownInvertedScale=1;decreaseTrackScrollAmount();if(trackTimeout!==undefined){_base.scrollStop();clearTimeout(trackTimeout);trackTimeout=undefined}if(event){var rect=_hostElementNative[LEXICON.bCR]();var mouseInsideHost=event.clientX>=rect.left&&event.clientX<=rect.right&&event.clientY>=rect.top&&event.clientY<=rect.bottom;if(!mouseInsideHost)hostOnMouseLeave();if(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove)refreshScrollbarsAutoHide(false)}}function onHandleMouseTouchDown(event){if(onMouseTouchDownContinue(event))onHandleMouseTouchDownAction(event)}function onHandleMouseTouchDownAction(event){mouseDownScroll=_viewportElement[scroll]();mouseDownScroll=isNaN(mouseDownScroll)?0:mouseDownScroll;if(_isRTL&&isHorizontal&&!_rtlScrollBehavior.n||!_isRTL)mouseDownScroll=mouseDownScroll<0?0:mouseDownScroll;mouseDownInvertedScale=getHostElementInvertedScale()[xy];mouseDownOffset=getPointerPosition(event);_scrollbarsHandlesDefineScrollPos=!getPreparedScrollbarsOption(strSnapHandle);addClass(_bodyElement,_classNameDragging);addClass(scrollbarVars._handle,strActive);addClass(scrollbarVars._scrollbar,strActive);setupResponsiveEventListener(_documentElement,[_strMouseTouchMoveEvent,_strMouseTouchUpEvent,_strSelectStartEvent],[documentDragMove,documentMouseTouchUp,documentOnSelectStart]);if(_msieVersion||!_documentMixed)COMPATIBILITY.prvD(event);COMPATIBILITY.stpP(event)}function onTrackMouseTouchDown(event){if(onMouseTouchDownContinue(event)){var scrollDistance=MATH.round(_viewportSize[scrollbarVars._w_h]);var trackOffset=scrollbarVars._track.offset()[scrollbarVars._left_top];var ctrlKey=event.ctrlKey;var instantScroll=event.shiftKey;var instantScrollTransition=instantScroll&&ctrlKey;var isFirstIteration=true;var easing="linear";var decreaseScroll;var finishedCondition;var scrollActionFinsished=function(transition){if(_scrollbarsHandlesDefineScrollPos)refreshScrollbarHandleOffset(isHorizontal,transition)};var scrollActionInstantFinished=function(){scrollActionFinsished();onHandleMouseTouchDownAction(event)};var scrollAction=function(){if(!_destroyed){var mouseOffset=(mouseDownOffset-trackOffset)*mouseDownInvertedScale;var handleOffset=scrollbarVarsInfo._handleOffset;var trackLength=scrollbarVarsInfo._trackLength;var handleLength=scrollbarVarsInfo._handleLength;var scrollRange=scrollbarVarsInfo._maxScroll;var currScroll=scrollbarVarsInfo._currentScroll;var scrollDuration=270*scrollDurationFactor;var timeoutDelay=isFirstIteration?MATH.max(400,scrollDuration):scrollDuration;var instantScrollPosition=scrollRange*((mouseOffset-handleLength/2)/(trackLength-handleLength));var rtlIsNormal=_isRTL&&isHorizontal&&(!_rtlScrollBehavior.i&&!_rtlScrollBehavior.n||_normalizeRTLCache);var decreaseScrollCondition=rtlIsNormal?handleOffset<mouseOffset:handleOffset>mouseOffset;var scrollObj={};var animationObj={easing:easing,step:function(now){if(_scrollbarsHandlesDefineScrollPos){_viewportElement[scroll](now);refreshScrollbarHandleOffset(isHorizontal,now)}}};instantScrollPosition=isFinite(instantScrollPosition)?instantScrollPosition:0;instantScrollPosition=_isRTL&&isHorizontal&&!_rtlScrollBehavior.i?scrollRange-instantScrollPosition:instantScrollPosition;if(instantScroll){_viewportElement[scroll](instantScrollPosition);if(instantScrollTransition){instantScrollPosition=_viewportElement[scroll]();_viewportElement[scroll](currScroll);instantScrollPosition=rtlIsNormal&&_rtlScrollBehavior.i?scrollRange-instantScrollPosition:instantScrollPosition;instantScrollPosition=rtlIsNormal&&_rtlScrollBehavior.n?-instantScrollPosition:instantScrollPosition;scrollObj[xy]=instantScrollPosition;_base.scroll(scrollObj,extendDeep(animationObj,{duration:130,complete:scrollActionInstantFinished}))}else scrollActionInstantFinished()}else{decreaseScroll=isFirstIteration?decreaseScrollCondition:decreaseScroll;finishedCondition=rtlIsNormal?decreaseScroll?handleOffset+handleLength>=mouseOffset:handleOffset<=mouseOffset:decreaseScroll?handleOffset<=mouseOffset:handleOffset+handleLength>=mouseOffset;if(finishedCondition){clearTimeout(trackTimeout);_base.scrollStop();trackTimeout=undefined;scrollActionFinsished(true)}else{trackTimeout=setTimeout(scrollAction,timeoutDelay);scrollObj[xy]=(decreaseScroll?"-=":"+=")+scrollDistance;_base.scroll(scrollObj,extendDeep(animationObj,{duration:scrollDuration}))}isFirstIteration=false}}};if(ctrlKey)increaseTrackScrollAmount();mouseDownInvertedScale=getHostElementInvertedScale()[xy];mouseDownOffset=COMPATIBILITY.page(event)[xy];_scrollbarsHandlesDefineScrollPos=!getPreparedScrollbarsOption(strSnapHandle);addClass(_bodyElement,_classNameDragging);addClass(scrollbarVars._track,strActive);addClass(scrollbarVars._scrollbar,strActive);setupResponsiveEventListener(_documentElement,[_strMouseTouchUpEvent,_strKeyDownEvent,_strKeyUpEvent,_strSelectStartEvent],[documentMouseTouchUp,documentKeyDown,documentKeyUp,documentOnSelectStart]);scrollAction();COMPATIBILITY.prvD(event);COMPATIBILITY.stpP(event)}}function onTrackMouseTouchEnter(event){_scrollbarsHandleHovered=true;if(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove)refreshScrollbarsAutoHide(true)}function onTrackMouseTouchLeave(event){_scrollbarsHandleHovered=false;if(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove)refreshScrollbarsAutoHide(false)}function onScrollbarMouseTouchDown(event){COMPATIBILITY.stpP(event)}addDestroyEventListener(scrollbarVars._handle,_strMouseTouchDownEvent,onHandleMouseTouchDown);addDestroyEventListener(scrollbarVars._track,[_strMouseTouchDownEvent,_strMouseTouchEnter,_strMouseTouchLeave],[onTrackMouseTouchDown,onTrackMouseTouchEnter,onTrackMouseTouchLeave]);addDestroyEventListener(scrollbarVars._scrollbar,_strMouseTouchDownEvent,onScrollbarMouseTouchDown);if(_supportTransition){addDestroyEventListener(scrollbarVars._scrollbar,_strTransitionEndEvent,function(event){if(event.target!==scrollbarVars._scrollbar[0])return;refreshScrollbarHandleLength(isHorizontal);refreshScrollbarHandleOffset(isHorizontal)})}}function refreshScrollbarAppearance(isHorizontal,shallBeVisible,canScroll){var scrollbarClassName=isHorizontal?_classNameHostScrollbarHorizontalHidden:_classNameHostScrollbarVerticalHidden;var scrollbarElement=isHorizontal?_scrollbarHorizontalElement:_scrollbarVerticalElement;if(shallBeVisible)removeClass(_hostElement,scrollbarClassName);else addClass(_hostElement,scrollbarClassName);if(canScroll)removeClass(scrollbarElement,_classNameScrollbarUnusable);else addClass(scrollbarElement,_classNameScrollbarUnusable)}/**
                 * Autoshows / autohides both scrollbars with.
                 * @param shallBeVisible True if the scrollbars shall be autoshown (only the case if they are hidden by a autohide), false if the shall be auto hidden.
                 * @param delayfree True if the scrollbars shall be hidden without a delay, false or undefined otherwise.
                 */
function refreshScrollbarsAutoHide(shallBeVisible,delayfree){clearTimeout(_scrollbarsAutoHideTimeoutId);if(shallBeVisible){removeClass(_scrollbarHorizontalElement,_classNameScrollbarAutoHidden);removeClass(_scrollbarVerticalElement,_classNameScrollbarAutoHidden)}else{var anyActive;var strActive="active";var hide=function(){if(!_scrollbarsHandleHovered&&!_destroyed){anyActive=_scrollbarHorizontalHandleElement.hasClass(strActive)||_scrollbarVerticalHandleElement.hasClass(strActive);if(!anyActive&&(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove||_scrollbarsAutoHideLeave))addClass(_scrollbarHorizontalElement,_classNameScrollbarAutoHidden);if(!anyActive&&(_scrollbarsAutoHideScroll||_scrollbarsAutoHideMove||_scrollbarsAutoHideLeave))addClass(_scrollbarVerticalElement,_classNameScrollbarAutoHidden)}};if(_scrollbarsAutoHideDelay>0&&delayfree!==true)_scrollbarsAutoHideTimeoutId=setTimeout(hide,_scrollbarsAutoHideDelay);else hide()}}function refreshScrollbarHandleLength(isHorizontal){var handleCSS={};var scrollbarVars=getScrollbarVars(isHorizontal);var scrollbarVarsInfo=scrollbarVars._info;var digit=1e6;var handleRatio=MATH.min(1,(_hostSizeCache[scrollbarVars._w_h]-(_paddingAbsoluteCache?isHorizontal?_paddingX:_paddingY:0))/_contentScrollSizeCache[scrollbarVars._w_h]);handleCSS[scrollbarVars._width_height]=MATH.floor(handleRatio*100*digit)/digit+"%";if(!nativeOverlayScrollbarsAreActive())scrollbarVars._handle.css(handleCSS);scrollbarVarsInfo._handleLength=scrollbarVars._handle[0]["offset"+scrollbarVars._Width_Height];scrollbarVarsInfo._handleLengthRatio=handleRatio}function refreshScrollbarHandleOffset(isHorizontal,scrollOrTransition){var transition=type(scrollOrTransition)==TYPES.b;var transitionDuration=250;var isRTLisHorizontal=_isRTL&&isHorizontal;var scrollbarVars=getScrollbarVars(isHorizontal);var scrollbarVarsInfo=scrollbarVars._info;var strTranslateBrace="translate(";var strTransform=VENDORS._cssProperty("transform");var strTransition=VENDORS._cssProperty("transition");var nativeScroll=isHorizontal?_viewportElement[_strScrollLeft]():_viewportElement[_strScrollTop]();var currentScroll=scrollOrTransition===undefined||transition?nativeScroll:scrollOrTransition;var handleLength=scrollbarVarsInfo._handleLength;var trackLength=scrollbarVars._track[0]["offset"+scrollbarVars._Width_Height];var handleTrackDiff=trackLength-handleLength;var handleCSS={};var transformOffset;var translateValue;var maxScroll=(_viewportElementNative[_strScroll+scrollbarVars._Width_Height]-_viewportElementNative["client"+scrollbarVars._Width_Height])*(_rtlScrollBehavior.n&&isRTLisHorizontal?-1:1);var getScrollRatio=function(base){return isNaN(base/maxScroll)?0:MATH.max(0,MATH.min(1,base/maxScroll))};var getHandleOffset=function(scrollRatio){var offset=handleTrackDiff*scrollRatio;offset=isNaN(offset)?0:offset;offset=isRTLisHorizontal&&!_rtlScrollBehavior.i?trackLength-handleLength-offset:offset;offset=MATH.max(0,offset);return offset};var scrollRatio=getScrollRatio(nativeScroll);var unsnappedScrollRatio=getScrollRatio(currentScroll);var handleOffset=getHandleOffset(unsnappedScrollRatio);var snappedHandleOffset=getHandleOffset(scrollRatio);scrollbarVarsInfo._maxScroll=maxScroll;scrollbarVarsInfo._currentScroll=nativeScroll;scrollbarVarsInfo._currentScrollRatio=scrollRatio;if(_supportTransform){transformOffset=isRTLisHorizontal?-(trackLength-handleLength-handleOffset):handleOffset;translateValue=isHorizontal?strTranslateBrace+transformOffset+"px, 0)":strTranslateBrace+"0, "+transformOffset+"px)";handleCSS[strTransform]=translateValue;if(_supportTransition)handleCSS[strTransition]=transition&&MATH.abs(handleOffset-scrollbarVarsInfo._handleOffset)>1?getCSSTransitionString(scrollbarVars._handle)+", "+(strTransform+_strSpace+transitionDuration+"ms"):_strEmpty}else handleCSS[scrollbarVars._left_top]=handleOffset;if(!nativeOverlayScrollbarsAreActive()){scrollbarVars._handle.css(handleCSS);if(_supportTransform&&_supportTransition&&transition){scrollbarVars._handle.one(_strTransitionEndEvent,function(){if(!_destroyed)scrollbarVars._handle.css(strTransition,_strEmpty)})}}scrollbarVarsInfo._handleOffset=handleOffset;scrollbarVarsInfo._snappedHandleOffset=snappedHandleOffset;scrollbarVarsInfo._trackLength=trackLength}function refreshScrollbarsInteractive(isTrack,value){var action=value?"removeClass":"addClass";var element1=isTrack?_scrollbarHorizontalTrackElement:_scrollbarHorizontalHandleElement;var element2=isTrack?_scrollbarVerticalTrackElement:_scrollbarVerticalHandleElement;var className=isTrack?_classNameScrollbarTrackOff:_classNameScrollbarHandleOff;element1[action](className);element2[action](className)}function getScrollbarVars(isHorizontal){return{_width_height:isHorizontal?_strWidth:_strHeight,_Width_Height:isHorizontal?"Width":"Height",_left_top:isHorizontal?_strLeft:_strTop,_Left_Top:isHorizontal?"Left":"Top",_x_y:isHorizontal?_strX:_strY,_X_Y:isHorizontal?"X":"Y",_w_h:isHorizontal?"w":"h",_l_t:isHorizontal?"l":"t",_track:isHorizontal?_scrollbarHorizontalTrackElement:_scrollbarVerticalTrackElement,_handle:isHorizontal?_scrollbarHorizontalHandleElement:_scrollbarVerticalHandleElement,_scrollbar:isHorizontal?_scrollbarHorizontalElement:_scrollbarVerticalElement,_info:isHorizontal?_scrollHorizontalInfo:_scrollVerticalInfo}}function setupScrollbarCornerDOM(destroy){_scrollbarCornerElement=_scrollbarCornerElement||selectOrGenerateDivByClass(_classNameScrollbarCorner,true);if(!destroy){if(!_domExists){_hostElement.append(_scrollbarCornerElement)}}else{if(_domExists&&_initialized){removeClass(_scrollbarCornerElement.removeAttr(LEXICON.s),_classNamesDynamicDestroy)}else{remove(_scrollbarCornerElement)}}}function setupScrollbarCornerEvents(){var insideIFrame=_windowElementNative.top!==_windowElementNative;var mouseDownPosition={};var mouseDownSize={};var mouseDownInvertedScale={};var reconnectMutationObserver;function documentDragMove(event){if(onMouseTouchDownContinue(event)){var pageOffset=getCoordinates(event);var hostElementCSS={};if(_resizeHorizontal||_resizeBoth)hostElementCSS[_strWidth]=mouseDownSize.w+(pageOffset.x-mouseDownPosition.x)*mouseDownInvertedScale.x;if(_resizeVertical||_resizeBoth)hostElementCSS[_strHeight]=mouseDownSize.h+(pageOffset.y-mouseDownPosition.y)*mouseDownInvertedScale.y;_hostElement.css(hostElementCSS);COMPATIBILITY.stpP(event)}else{documentMouseTouchUp(event)}}function documentMouseTouchUp(event){var eventIsTrusted=event!==undefined;setupResponsiveEventListener(_documentElement,[_strSelectStartEvent,_strMouseTouchMoveEvent,_strMouseTouchUpEvent],[documentOnSelectStart,documentDragMove,documentMouseTouchUp],true);removeClass(_bodyElement,_classNameDragging);if(_scrollbarCornerElement.releaseCapture)_scrollbarCornerElement.releaseCapture();if(eventIsTrusted){if(reconnectMutationObserver)connectMutationObservers();_base.update(_strAuto)}reconnectMutationObserver=false}function onMouseTouchDownContinue(event){var originalEvent=event.originalEvent||event;var isTouchEvent=originalEvent.touches!==undefined;return _sleeping||_destroyed?false:COMPATIBILITY.mBtn(event)===1||isTouchEvent}function getCoordinates(event){return _msieVersion&&insideIFrame?{x:event.screenX,y:event.screenY}:COMPATIBILITY.page(event)}addDestroyEventListener(_scrollbarCornerElement,_strMouseTouchDownEvent,function(event){if(onMouseTouchDownContinue(event)&&!_resizeNone){if(_mutationObserversConnected){reconnectMutationObserver=true;disconnectMutationObservers()}mouseDownPosition=getCoordinates(event);mouseDownSize.w=_hostElementNative[LEXICON.oW]-(!_isBorderBox?_paddingX:0);mouseDownSize.h=_hostElementNative[LEXICON.oH]-(!_isBorderBox?_paddingY:0);mouseDownInvertedScale=getHostElementInvertedScale();setupResponsiveEventListener(_documentElement,[_strSelectStartEvent,_strMouseTouchMoveEvent,_strMouseTouchUpEvent],[documentOnSelectStart,documentDragMove,documentMouseTouchUp]);addClass(_bodyElement,_classNameDragging);if(_scrollbarCornerElement.setCapture)_scrollbarCornerElement.setCapture();COMPATIBILITY.prvD(event);COMPATIBILITY.stpP(event)}})}function dispatchCallback(name,args){if(_initialized){var callback=_currentPreparedOptions.callbacks[name];var extensionOnName=name;var ext;if(extensionOnName.substr(0,2)==="on")extensionOnName=extensionOnName.substr(2,1).toLowerCase()+extensionOnName.substr(3);if(type(callback)==TYPES.f)callback.call(_base,args);each(_extensions,function(){ext=this;if(type(ext.on)==TYPES.f)ext.on(extensionOnName,args)})}else if(!_destroyed)_callbacksInitQeueue.push({n:name,a:args})}/**
                 * Sets the "top, right, bottom, left" properties, with a given prefix, of the given css object.
                 * @param targetCSSObject The css object to which the values shall be applied.
                 * @param prefix The prefix of the "top, right, bottom, left" css properties. (example: 'padding-' is a valid prefix)
                 * @param values A array of values which shall be applied to the "top, right, bottom, left" -properties. The array order is [top, right, bottom, left].
                 * If this argument is undefined the value '' (empty string) will be applied to all properties.
                 */
function setTopRightBottomLeft(targetCSSObject,prefix,values){if(values===undefined)values=[_strEmpty,_strEmpty,_strEmpty,_strEmpty];targetCSSObject[prefix+_strTop]=values[0];targetCSSObject[prefix+_strRight]=values[1];targetCSSObject[prefix+_strBottom]=values[2];targetCSSObject[prefix+_strLeft]=values[3]}function getCSSTransitionString(element){var transitionStr=VENDORS._cssProperty("transition");var assembledValue=element.css(transitionStr);if(assembledValue)return assembledValue;var regExpString="\\s*("+"([^,(]+(\\(.+?\\))?)+"+")[\\s,]*";var regExpMain=new RegExp(regExpString);var regExpValidate=new RegExp("^("+regExpString+")+$");var properties="property duration timing-function delay".split(" ");var result=[];var strResult;var valueArray;var i=0;var j;var splitCssStyleByComma=function(str){strResult=[];if(!str.match(regExpValidate))return str;while(str.match(regExpMain)){strResult.push(RegExp.$1);str=str.replace(regExpMain,_strEmpty)}return strResult};for(;i<properties[LEXICON.l];i++){valueArray=splitCssStyleByComma(element.css(transitionStr+"-"+properties[i]));for(j=0;j<valueArray[LEXICON.l];j++)result[j]=(result[j]?result[j]+_strSpace:_strEmpty)+valueArray[j]}return result.join(", ")}function getHostElementInvertedScale(){var rect=_paddingElementNative[LEXICON.bCR]();return{x:_supportTransform?1/(MATH.round(rect.width)/_paddingElementNative[LEXICON.oW])||1:1,y:_supportTransform?1/(MATH.round(rect.height)/_paddingElementNative[LEXICON.oH])||1:1}}function isHTMLElement(o){var strOwnerDocument="ownerDocument";var strHTMLElement="HTMLElement";var wnd=o&&o[strOwnerDocument]?o[strOwnerDocument].parentWindow||window:window;return typeof wnd[strHTMLElement]==TYPES.o?o instanceof wnd[strHTMLElement]:o&&typeof o==TYPES.o&&o!==null&&o.nodeType===1&&typeof o.nodeName==TYPES.s}/**
                 * Compares 2 arrays and returns the differences between them as a array.
                 * @param a1 The first array which shall be compared.
                 * @param a2 The second array which shall be compared.
                 * @returns {Array} The differences between the two arrays.
                 */
function getArrayDifferences(a1,a2){var a=[];var diff=[];var i;var k;for(i=0;i<a1.length;i++)a[a1[i]]=true;for(i=0;i<a2.length;i++){if(a[a2[i]])delete a[a2[i]];else a[a2[i]]=true}for(k in a)diff.push(k);return diff}function parseToZeroOrNumber(value,toFloat){var num=toFloat?parseFloat(value):parseInt(value,10);return isNaN(num)?0:num}function getTextareaInfo(){var textareaCursorPosition=_targetElementNative.selectionStart;if(textareaCursorPosition===undefined)return;var textareaValue=_targetElement.val();var textareaLength=textareaValue[LEXICON.l];var textareaRowSplit=textareaValue.split("\n");var textareaLastRow=textareaRowSplit[LEXICON.l];var textareaCurrentCursorRowSplit=textareaValue.substr(0,textareaCursorPosition).split("\n");var widestRow=0;var textareaLastCol=0;var cursorRow=textareaCurrentCursorRowSplit[LEXICON.l];var cursorCol=textareaCurrentCursorRowSplit[textareaCurrentCursorRowSplit[LEXICON.l]-1][LEXICON.l];var rowCols;var i;for(i=0;i<textareaRowSplit[LEXICON.l];i++){rowCols=textareaRowSplit[i][LEXICON.l];if(rowCols>textareaLastCol){widestRow=i+1;textareaLastCol=rowCols}}return{_cursorRow:cursorRow,_cursorColumn:cursorCol,_rows:textareaLastRow,_columns:textareaLastCol,_widestRow:widestRow,_cursorPosition:textareaCursorPosition,_cursorMax:textareaLength}}function nativeOverlayScrollbarsAreActive(){return _ignoreOverlayScrollbarHidingCache&&(_nativeScrollbarIsOverlaid.x&&_nativeScrollbarIsOverlaid.y)}function getContentMeasureElement(){return _isTextarea?_textareaCoverElement[0]:_contentElementNative}/**
                 * Generates a string which represents a HTML div with the given classes or attributes.
                 * @param classesOrAttrs The class of the div as string or a object which represents the attributes of the div. (The class attribute can also be written as "className".)
                 * @param content The content of the div as string.
                 * @returns {string} The concated string which represents a HTML div and its content.
                 */
function generateDiv(classesOrAttrs,content){return"<div "+(classesOrAttrs?type(classesOrAttrs)==TYPES.s?'class="'+classesOrAttrs+'"':function(){var key;var attrs=_strEmpty;if(FRAMEWORK.isPlainObject(classesOrAttrs)){for(key in classesOrAttrs)attrs+=(key==="c"?"class":key)+'="'+classesOrAttrs[key]+'" '}return attrs}():_strEmpty)+">"+(content||_strEmpty)+"</div>"}function selectOrGenerateDivByClass(className,selectParentOrOnlyChildren){var onlyChildren=type(selectParentOrOnlyChildren)==TYPES.b;var selectParent=onlyChildren?_hostElement:selectParentOrOnlyChildren||_hostElement;return _domExists&&!selectParent[LEXICON.l]?null:_domExists?selectParent[onlyChildren?"children":"find"](_strDot+className.replace(/\s/g,_strDot)).eq(0):FRAMEWORK(generateDiv(className))}function getObjectPropVal(obj,path){var splits=path.split(_strDot);var i=0;var val;for(;i<splits.length;i++){if(!obj[LEXICON.hOP](splits[i]))return;val=obj[splits[i]];if(i<splits.length&&type(val)==TYPES.o)obj=val}return val}function setObjectPropVal(obj,path,val){var splits=path.split(_strDot);var splitsLength=splits.length;var i=0;var extendObj={};var extendObjRoot=extendObj;for(;i<splitsLength;i++)extendObj=extendObj[splits[i]]=i+1<splitsLength?{}:val;FRAMEWORK.extend(obj,extendObjRoot,true)}function checkCache(current,cache,force){if(force)return force;if(type(current)==TYPES.o&&type(cache)==TYPES.o){for(var prop in current){if(prop!=="c"){if(current[LEXICON.hOP](prop)&&cache[LEXICON.hOP](prop)){if(checkCache(current[prop],cache[prop]))return true}else{return true}}}}else{return current!==cache}return false}function extendDeep(){return FRAMEWORK.extend.apply(this,[true].concat([].slice.call(arguments)))}function addClass(el,classes){return _frameworkProto.addClass.call(el,classes)}function removeClass(el,classes){return _frameworkProto.removeClass.call(el,classes)}function remove(el){return _frameworkProto.remove.call(el)}function findFirst(el,selector){return _frameworkProto.find.call(el,selector).eq(0)}
//==== API ====//
_base.sleep=function(){_sleeping=true};/**
                 * Updates the plugin and DOM to the current options.
                 * This method should only be called if a update is 100% required.
                 * @param force True if every property shall be updated and the cache shall be ignored.
                 * !INTERNAL USAGE! : force can be a string "auto", "sync" or "zoom" too
                 * if "auto" then before a real update the content size and host element attributes gets checked, and if they changed only then the update method will be called.
                 * if "sync" then the async update process (MutationObserver or UpdateLoop) gets synchronized and a corresponding update takes place if one was needed due to pending changes.
                 * if "zoom" then a update takes place where it's assumed that content and host size changed
                 * @returns {boolean|undefined} 
                 * If force is "sync" then a boolean is returned which indicates whether a update was needed due to pending changes.
                 * If force is "auto" then a boolean is returned whether a update was needed due to attribute or size changes.
                 * undefined otherwise.
                 */
_base.update=function(force){if(_destroyed)return;var attrsChanged;var contentSizeC;var isString=type(force)==TYPES.s;var imgElementSelector="img";var imgElementLoadEvent="load";var doUpdateAuto;var mutHost;var mutContent;if(isString){if(force===_strAuto){attrsChanged=meaningfulAttrsChanged();contentSizeC=updateAutoContentSizeChanged();doUpdateAuto=attrsChanged||contentSizeC;if(doUpdateAuto){update({_contentSizeChanged:contentSizeC,_changedOptions:_initialized?undefined:_currentPreparedOptions})}}else if(force===_strSync){if(_mutationObserversConnected){mutHost=_mutationObserverHostCallback(_mutationObserverHost.takeRecords());mutContent=_mutationObserverContentCallback(_mutationObserverContent.takeRecords())}else{mutHost=_base.update(_strAuto)}}else if(force==="zoom"){update({_hostSizeChanged:true,_contentSizeChanged:true})}}else{force=_sleeping||force;_sleeping=false;if(!_base.update(_strSync)||force)update({_force:force})}if(!_isTextarea){_contentElement.find(imgElementSelector).each(function(i,el){var index=COMPATIBILITY.inA(el,_imgs);if(index===-1)FRAMEWORK(el).off(imgElementLoadEvent,imgOnLoad).on(imgElementLoadEvent,imgOnLoad)})}return doUpdateAuto||mutHost||mutContent};_base.options=function(newOptions,value){var option={};var changedOps;if(FRAMEWORK.isEmptyObject(newOptions)||!FRAMEWORK.isPlainObject(newOptions)){if(type(newOptions)==TYPES.s){if(arguments.length>1){setObjectPropVal(option,newOptions,value);changedOps=setOptions(option)}else return getObjectPropVal(_currentOptions,newOptions)}else return _currentOptions}else{changedOps=setOptions(newOptions)}if(!FRAMEWORK.isEmptyObject(changedOps)){update({_changedOptions:changedOps})}};_base.destroy=function(){if(_destroyed)return;autoUpdateLoop.remove(_base);disconnectMutationObservers();setupResizeObserver(_sizeObserverElement);setupResizeObserver(_sizeAutoObserverElement);for(var extName in _extensions)_base.removeExt(extName);while(_destroyEvents[LEXICON.l]>0)_destroyEvents.pop()();setupHostMouseTouchEvents(true);if(_contentGlueElement)remove(_contentGlueElement);if(_contentArrangeElement)remove(_contentArrangeElement);if(_sizeAutoObserverAdded)remove(_sizeAutoObserverElement);setupScrollbarsDOM(true);setupScrollbarCornerDOM(true);setupStructureDOM(true);for(var i=0;i<_imgs[LEXICON.l];i++)FRAMEWORK(_imgs[i]).off("load",imgOnLoad);_imgs=undefined;_destroyed=true;_sleeping=true;INSTANCES(pluginTargetElement,0);dispatchCallback("onDestroyed")};/**
                 * Scrolls to a given position or element.
                 * @param coordinates
                 * 1. Can be "coordinates" which looks like:
                 *    { x : ?, y : ? } OR          Object with x and y properties
                 *    { left : ?, top : ? } OR     Object with left and top properties
                 *    { l : ?, t : ? } OR          Object with l and t properties
                 *    [ ?, ? ] OR                  Array where the first two element are the coordinates (first is x, second is y)
                 *    ?                            A single value which stays for both axis
                 *    A value can be a number, a string or a calculation.
                 *
                 *    Operators:
                 *    [NONE]  The current scroll will be overwritten by the value.
                 *    '+='    The value will be added to the current scroll offset
                 *    '-='    The value will be subtracted from the current scroll offset
                 *    '*='    The current scroll wil be multiplicated by the value.
                 *    '/='    The current scroll wil be divided by the value.
                 *
                 *    Units:
                 *    [NONE]  The value is the final scroll amount.                   final = (value * 1)
                 *    'px'    Same as none
                 *    '%'     The value is dependent on the current scroll value.     final = ((currentScrollValue / 100) * value)
                 *    'vw'    The value is multiplicated by the viewport width.       final = (value * viewportWidth)
                 *    'vh'    The value is multiplicated by the viewport height.      final = (value * viewportHeight)
                 *
                 *    example final values:
                 *    200, '200px', '50%', '1vw', '1vh', '+=200', '/=1vw', '*=2px', '-=5vh', '+=33%', '+= 50% - 2px', '-= 1vw - 50%'
                 *
                 * 2. Can be a HTML or jQuery element:
                 *    The final scroll offset is the offset (without margin) of the given HTML / jQuery element.
                 *
                 * 3. Can be a object with a HTML or jQuery element with additional settings:
                 *    {
                 *      el : [HTMLElement, jQuery element],             MUST be specified, else this object isn't valid.
                 *      scroll : [string, array, object],               Default value is 'always'.
                 *      block : [string, array, object],                Default value is 'begin'.
                 *      margin : [number, boolean, array, object]       Default value is false.
                 *    }
                 *
                 *    Possible scroll settings are:
                 *    'always'      Scrolls always.
                 *    'ifneeded'    Scrolls only if the element isnt fully in view.
                 *    'never'       Scrolls never.
                 *
                 *    Possible block settings are:
                 *    'begin'   Both axis shall be docked to the "begin" edge. - The element will be docked to the top and left edge of the viewport.
                 *    'end'     Both axis shall be docked to the "end" edge. - The element will be docked to the bottom and right edge of the viewport. (If direction is RTL to the bottom and left edge.)
                 *    'center'  Both axis shall be docked to "center". - The element will be centered in the viewport.
                 *    'nearest' The element will be docked to the nearest edge(s).
                 *
                 *    Possible margin settings are: -- The actual margin of the element wont be affect, this option affects only the final scroll offset.
                 *    [BOOLEAN]                                         If true the css margin of the element will be used, if false no margin will be used.
                 *    [NUMBER]                                          The margin will be used for all edges.
                 *
                 * @param duration The duration of the scroll animation, OR a jQuery animation configuration object.
                 * @param easing The animation easing.
                 * @param complete The animation complete callback.
                 * @returns {{
                 *   position: {x: number, y: number},
                 *   ratio: {x: number, y: number},
                 *   max: {x: number, y: number},
                 *   handleOffset: {x: number, y: number},
                 *   handleLength: {x: number, y: number},
                 *   handleLengthRatio: {x: number, y: number}, t
                 *   rackLength: {x: number, y: number},
                 *   isRTL: boolean,
                 *   isRTLNormalized: boolean
                 *  }}
                 */
_base.scroll=function(coordinates,duration,easing,complete){if(arguments.length===0||coordinates===undefined){var infoX=_scrollHorizontalInfo;var infoY=_scrollVerticalInfo;var normalizeInvert=_normalizeRTLCache&&_isRTL&&_rtlScrollBehavior.i;var normalizeNegate=_normalizeRTLCache&&_isRTL&&_rtlScrollBehavior.n;var scrollX=infoX._currentScroll;var scrollXRatio=infoX._currentScrollRatio;var maxScrollX=infoX._maxScroll;scrollXRatio=normalizeInvert?1-scrollXRatio:scrollXRatio;scrollX=normalizeInvert?maxScrollX-scrollX:scrollX;scrollX*=normalizeNegate?-1:1;maxScrollX*=normalizeNegate?-1:1;return{position:{x:scrollX,y:infoY._currentScroll},ratio:{x:scrollXRatio,y:infoY._currentScrollRatio},max:{x:maxScrollX,y:infoY._maxScroll},handleOffset:{x:infoX._handleOffset,y:infoY._handleOffset},handleLength:{x:infoX._handleLength,y:infoY._handleLength},handleLengthRatio:{x:infoX._handleLengthRatio,y:infoY._handleLengthRatio},trackLength:{x:infoX._trackLength,y:infoY._trackLength},snappedHandleOffset:{x:infoX._snappedHandleOffset,y:infoY._snappedHandleOffset},isRTL:_isRTL,isRTLNormalized:_normalizeRTLCache}}_base.update(_strSync);var normalizeRTL=_normalizeRTLCache;var coordinatesXAxisProps=[_strX,_strLeft,"l"];var coordinatesYAxisProps=[_strY,_strTop,"t"];var coordinatesOperators=["+=","-=","*=","/="];var durationIsObject=type(duration)==TYPES.o;var completeCallback=durationIsObject?duration.complete:complete;var i;var finalScroll={};var specialEasing={};var doScrollLeft;var doScrollTop;var animationOptions;var strEnd="end";var strBegin="begin";var strCenter="center";var strNearest="nearest";var strAlways="always";var strNever="never";var strIfNeeded="ifneeded";var strLength=LEXICON.l;var settingsAxis;var settingsScroll;var settingsBlock;var settingsMargin;var finalElement;var elementObjSettingsAxisValues=[_strX,_strY,"xy","yx"];var elementObjSettingsBlockValues=[strBegin,strEnd,strCenter,strNearest];var elementObjSettingsScrollValues=[strAlways,strNever,strIfNeeded];var coordinatesIsElementObj=coordinates[LEXICON.hOP]("el");var possibleElement=coordinatesIsElementObj?coordinates.el:coordinates;var possibleElementIsJQuery=possibleElement instanceof FRAMEWORK||JQUERY?possibleElement instanceof JQUERY:false;var possibleElementIsHTMLElement=possibleElementIsJQuery?false:isHTMLElement(possibleElement);var proxyCompleteCallback=type(completeCallback)!=TYPES.f?undefined:function(){if(doScrollLeft)refreshScrollbarHandleOffset(true);if(doScrollTop)refreshScrollbarHandleOffset(false);completeCallback()};function checkSettingsStringValue(currValue,allowedValues){for(i=0;i<allowedValues[strLength];i++){if(currValue===allowedValues[i])return true}return false}function getRawScroll(isX,coordinates){var coordinateProps=isX?coordinatesXAxisProps:coordinatesYAxisProps;coordinates=type(coordinates)==TYPES.s||type(coordinates)==TYPES.n?[coordinates,coordinates]:coordinates;if(type(coordinates)==TYPES.a)return isX?coordinates[0]:coordinates[1];else if(type(coordinates)==TYPES.o){for(i=0;i<coordinateProps[strLength];i++)if(coordinateProps[i]in coordinates)return coordinates[coordinateProps[i]]}}function getFinalScroll(isX,rawScroll){var isString=type(rawScroll)==TYPES.s;var operator;var amount;var scrollInfo=isX?_scrollHorizontalInfo:_scrollVerticalInfo;var currScroll=scrollInfo._currentScroll;var maxScroll=scrollInfo._maxScroll;var mult=" * ";var finalValue;var isRTLisX=_isRTL&&isX;var normalizeShortcuts=isRTLisX&&_rtlScrollBehavior.n&&!normalizeRTL;var strReplace="replace";var evalFunc=eval;var possibleOperator;if(isString){if(rawScroll[strLength]>2){possibleOperator=rawScroll.substr(0,2);if(inArray(possibleOperator,coordinatesOperators)>-1)operator=possibleOperator}rawScroll=operator?rawScroll.substr(2):rawScroll;rawScroll=rawScroll[strReplace](/min/g,0)[strReplace](/</g,0)[strReplace](/max/g,(normalizeShortcuts?"-":_strEmpty)+_strHundredPercent)[strReplace](/>/g,(normalizeShortcuts?"-":_strEmpty)+_strHundredPercent)[strReplace](/px/g,_strEmpty)[strReplace](/%/g,mult+maxScroll*(isRTLisX&&_rtlScrollBehavior.n?-1:1)/100)[strReplace](/vw/g,mult+_viewportSize.w)[strReplace](/vh/g,mult+_viewportSize.h);amount=parseToZeroOrNumber(isNaN(rawScroll)?parseToZeroOrNumber(evalFunc(rawScroll),true).toFixed():rawScroll)}else{amount=rawScroll}if(amount!==undefined&&!isNaN(amount)&&type(amount)==TYPES.n){var normalizeIsRTLisX=normalizeRTL&&isRTLisX;var operatorCurrScroll=currScroll*(normalizeIsRTLisX&&_rtlScrollBehavior.n?-1:1);var invert=normalizeIsRTLisX&&_rtlScrollBehavior.i;var negate=normalizeIsRTLisX&&_rtlScrollBehavior.n;operatorCurrScroll=invert?maxScroll-operatorCurrScroll:operatorCurrScroll;switch(operator){case"+=":finalValue=operatorCurrScroll+amount;break;case"-=":finalValue=operatorCurrScroll-amount;break;case"*=":finalValue=operatorCurrScroll*amount;break;case"/=":finalValue=operatorCurrScroll/amount;break;default:finalValue=amount;break}finalValue=invert?maxScroll-finalValue:finalValue;finalValue*=negate?-1:1;finalValue=isRTLisX&&_rtlScrollBehavior.n?MATH.min(0,MATH.max(maxScroll,finalValue)):MATH.max(0,MATH.min(maxScroll,finalValue))}return finalValue===currScroll?undefined:finalValue}function getPerAxisValue(value,valueInternalType,defaultValue,allowedValues){var resultDefault=[defaultValue,defaultValue];var valueType=type(value);var valueArrLength;var valueArrItem;if(valueType==valueInternalType){value=[value,value]}else if(valueType==TYPES.a){valueArrLength=value[strLength];if(valueArrLength>2||valueArrLength<1)value=resultDefault;else{if(valueArrLength===1)value[1]=defaultValue;for(i=0;i<valueArrLength;i++){valueArrItem=value[i];if(type(valueArrItem)!=valueInternalType||!checkSettingsStringValue(valueArrItem,allowedValues)){value=resultDefault;break}}}}else if(valueType==TYPES.o)value=[value[_strX]||defaultValue,value[_strY]||defaultValue];else value=resultDefault;return{x:value[0],y:value[1]}}function generateMargin(marginTopRightBottomLeftArray){var result=[];var currValue;var currValueType;var valueDirections=[_strTop,_strRight,_strBottom,_strLeft];for(i=0;i<marginTopRightBottomLeftArray[strLength];i++){if(i===valueDirections[strLength])break;currValue=marginTopRightBottomLeftArray[i];currValueType=type(currValue);if(currValueType==TYPES.b)result.push(currValue?parseToZeroOrNumber(finalElement.css(_strMarginMinus+valueDirections[i])):0);else result.push(currValueType==TYPES.n?currValue:0)}return result}if(possibleElementIsJQuery||possibleElementIsHTMLElement){var margin=coordinatesIsElementObj?coordinates.margin:0;var axis=coordinatesIsElementObj?coordinates.axis:0;var scroll=coordinatesIsElementObj?coordinates.scroll:0;var block=coordinatesIsElementObj?coordinates.block:0;var marginDefault=[0,0,0,0];var marginType=type(margin);var marginLength;finalElement=possibleElementIsJQuery?possibleElement:FRAMEWORK(possibleElement);if(finalElement[strLength]>0){if(marginType==TYPES.n||marginType==TYPES.b)margin=generateMargin([margin,margin,margin,margin]);else if(marginType==TYPES.a){marginLength=margin[strLength];if(marginLength===2)margin=generateMargin([margin[0],margin[1],margin[0],margin[1]]);else if(marginLength>=4)margin=generateMargin(margin);else margin=marginDefault}else if(marginType==TYPES.o)margin=generateMargin([margin[_strTop],margin[_strRight],margin[_strBottom],margin[_strLeft]]);else margin=marginDefault;settingsAxis=checkSettingsStringValue(axis,elementObjSettingsAxisValues)?axis:"xy";settingsScroll=getPerAxisValue(scroll,TYPES.s,strAlways,elementObjSettingsScrollValues);settingsBlock=getPerAxisValue(block,TYPES.s,strBegin,elementObjSettingsBlockValues);settingsMargin=margin;var viewportScroll={l:_scrollHorizontalInfo._currentScroll,t:_scrollVerticalInfo._currentScroll};var viewportOffset=_paddingElement.offset();var elementOffset=finalElement.offset();var doNotScroll={x:settingsScroll.x==strNever||settingsAxis==_strY,y:settingsScroll.y==strNever||settingsAxis==_strX};elementOffset[_strTop]-=settingsMargin[0];elementOffset[_strLeft]-=settingsMargin[3];var elementScrollCoordinates={x:MATH.round(elementOffset[_strLeft]-viewportOffset[_strLeft]+viewportScroll.l),y:MATH.round(elementOffset[_strTop]-viewportOffset[_strTop]+viewportScroll.t)};if(_isRTL){if(!_rtlScrollBehavior.n&&!_rtlScrollBehavior.i)elementScrollCoordinates.x=MATH.round(viewportOffset[_strLeft]-elementOffset[_strLeft]+viewportScroll.l);if(_rtlScrollBehavior.n&&normalizeRTL)elementScrollCoordinates.x*=-1;if(_rtlScrollBehavior.i&&normalizeRTL)elementScrollCoordinates.x=MATH.round(viewportOffset[_strLeft]-elementOffset[_strLeft]+(_scrollHorizontalInfo._maxScroll-viewportScroll.l))}if(settingsBlock.x!=strBegin||settingsBlock.y!=strBegin||settingsScroll.x==strIfNeeded||settingsScroll.y==strIfNeeded||_isRTL){var measuringElm=finalElement[0];var rawElementSize=_supportTransform?measuringElm[LEXICON.bCR]():{width:measuringElm[LEXICON.oW],height:measuringElm[LEXICON.oH]};var elementSize={w:rawElementSize[_strWidth]+settingsMargin[3]+settingsMargin[1],h:rawElementSize[_strHeight]+settingsMargin[0]+settingsMargin[2]};var finalizeBlock=function(isX){var vars=getScrollbarVars(isX);var wh=vars._w_h;var lt=vars._left_top;var xy=vars._x_y;var blockIsEnd=settingsBlock[xy]==(isX?_isRTL?strBegin:strEnd:strEnd);var blockIsCenter=settingsBlock[xy]==strCenter;var blockIsNearest=settingsBlock[xy]==strNearest;var scrollNever=settingsScroll[xy]==strNever;var scrollIfNeeded=settingsScroll[xy]==strIfNeeded;var vpSize=_viewportSize[wh];var vpOffset=viewportOffset[lt];var elSize=elementSize[wh];var elOffset=elementOffset[lt];var divide=blockIsCenter?2:1;var elementCenterOffset=elOffset+elSize/2;var viewportCenterOffset=vpOffset+vpSize/2;var isInView=elSize<=vpSize&&elOffset>=vpOffset&&elOffset+elSize<=vpOffset+vpSize;if(scrollNever)doNotScroll[xy]=true;else if(!doNotScroll[xy]){if(blockIsNearest||scrollIfNeeded){doNotScroll[xy]=scrollIfNeeded?isInView:false;blockIsEnd=elSize<vpSize?elementCenterOffset>viewportCenterOffset:elementCenterOffset<viewportCenterOffset}elementScrollCoordinates[xy]-=blockIsEnd||blockIsCenter?(vpSize/divide-elSize/divide)*(isX&&_isRTL&&normalizeRTL?-1:1):0}};finalizeBlock(true);finalizeBlock(false)}if(doNotScroll.y)delete elementScrollCoordinates.y;if(doNotScroll.x)delete elementScrollCoordinates.x;coordinates=elementScrollCoordinates}}finalScroll[_strScrollLeft]=getFinalScroll(true,getRawScroll(true,coordinates));finalScroll[_strScrollTop]=getFinalScroll(false,getRawScroll(false,coordinates));doScrollLeft=finalScroll[_strScrollLeft]!==undefined;doScrollTop=finalScroll[_strScrollTop]!==undefined;if((doScrollLeft||doScrollTop)&&(duration>0||durationIsObject)){if(durationIsObject){duration.complete=proxyCompleteCallback;_viewportElement.animate(finalScroll,duration)}else{animationOptions={duration:duration,complete:proxyCompleteCallback};if(type(easing)==TYPES.a||FRAMEWORK.isPlainObject(easing)){specialEasing[_strScrollLeft]=easing[0]||easing.x;specialEasing[_strScrollTop]=easing[1]||easing.y;animationOptions.specialEasing=specialEasing}else{animationOptions.easing=easing}_viewportElement.animate(finalScroll,animationOptions)}}else{if(doScrollLeft)_viewportElement[_strScrollLeft](finalScroll[_strScrollLeft]);if(doScrollTop)_viewportElement[_strScrollTop](finalScroll[_strScrollTop])}};_base.scrollStop=function(param1,param2,param3){_viewportElement.stop(param1,param2,param3);return _base};_base.getElements=function(elementName){var obj={target:_targetElementNative,host:_hostElementNative,padding:_paddingElementNative,viewport:_viewportElementNative,content:_contentElementNative,scrollbarHorizontal:{scrollbar:_scrollbarHorizontalElement[0],track:_scrollbarHorizontalTrackElement[0],handle:_scrollbarHorizontalHandleElement[0]},scrollbarVertical:{scrollbar:_scrollbarVerticalElement[0],track:_scrollbarVerticalTrackElement[0],handle:_scrollbarVerticalHandleElement[0]},scrollbarCorner:_scrollbarCornerElement[0]};return type(elementName)==TYPES.s?getObjectPropVal(obj,elementName):obj};/**
                 * Returns a object which describes the current state of this instance.
                 * @param stateProperty A specific property from the state object which shall be returned.
                 * @returns {{widthAuto, heightAuto, overflowAmount, hideOverflow, hasOverflow, contentScrollSize, viewportSize, hostSize, autoUpdate} | *}
                 */
_base.getState=function(stateProperty){function prepare(obj){if(!FRAMEWORK.isPlainObject(obj))return obj;var extended=extendDeep({},obj);var changePropertyName=function(from,to){if(extended[LEXICON.hOP](from)){extended[to]=extended[from];delete extended[from]}};changePropertyName("w",_strWidth);changePropertyName("h",_strHeight);delete extended.c;return extended}var obj={destroyed:!!prepare(_destroyed),sleeping:!!prepare(_sleeping),autoUpdate:prepare(!_mutationObserversConnected),widthAuto:prepare(_widthAutoCache),heightAuto:prepare(_heightAutoCache),padding:prepare(_cssPaddingCache),overflowAmount:prepare(_overflowAmountCache),hideOverflow:prepare(_hideOverflowCache),hasOverflow:prepare(_hasOverflowCache),contentScrollSize:prepare(_contentScrollSizeCache),viewportSize:prepare(_viewportSize),hostSize:prepare(_hostSizeCache),documentMixed:prepare(_documentMixed)};return type(stateProperty)==TYPES.s?getObjectPropVal(obj,stateProperty):obj};_base.ext=function(extName){var result;var privateMethods=_extensionsPrivateMethods.split(" ");var i=0;if(type(extName)==TYPES.s){if(_extensions[LEXICON.hOP](extName)){result=extendDeep({},_extensions[extName]);for(;i<privateMethods.length;i++)delete result[privateMethods[i]]}}else{result={};for(i in _extensions)result[i]=extendDeep({},_base.ext(i))}return result};/**
                 * Adds a extension to this instance.
                 * @param extName The name of the extension which shall be added.
                 * @param extensionOptions The extension options which shall be used.
                 * @returns {{}} The instance of the added extension or undefined if the extension couldn't be added properly.
                 */
_base.addExt=function(extName,extensionOptions){var registeredExtensionObj=_plugin.extension(extName);var instance;var instanceAdded;var instanceContract;var contractResult;var contractFulfilled=true;if(registeredExtensionObj){if(!_extensions[LEXICON.hOP](extName)){instance=registeredExtensionObj.extensionFactory.call(_base,extendDeep({},registeredExtensionObj.defaultOptions),FRAMEWORK,COMPATIBILITY);if(instance){instanceContract=instance.contract;if(type(instanceContract)==TYPES.f){contractResult=instanceContract(window);contractFulfilled=type(contractResult)==TYPES.b?contractResult:contractFulfilled}if(contractFulfilled){_extensions[extName]=instance;instanceAdded=instance.added;if(type(instanceAdded)==TYPES.f)instanceAdded(extensionOptions);return _base.ext(extName)}}}else return _base.ext(extName)}else console.warn('A extension with the name "'+extName+"\" isn't registered.")};_base.removeExt=function(extName){var instance=_extensions[extName];var instanceRemoved;if(instance){delete _extensions[extName];instanceRemoved=instance.removed;if(type(instanceRemoved)==TYPES.f)instanceRemoved();return true}return false};function construct(targetElement,options,extensions){_defaultOptions=globals.defaultOptions;_nativeScrollbarStyling=globals.nativeScrollbarStyling;_nativeScrollbarSize=extendDeep({},globals.nativeScrollbarSize);_nativeScrollbarIsOverlaid=extendDeep({},globals.nativeScrollbarIsOverlaid);_overlayScrollbarDummySize=extendDeep({},globals.overlayScrollbarDummySize);_rtlScrollBehavior=extendDeep({},globals.rtlScrollBehavior);setOptions(extendDeep({},_defaultOptions,options));_cssCalc=globals.cssCalc;_msieVersion=globals.msie;_autoUpdateRecommended=globals.autoUpdateRecommended;_supportTransition=globals.supportTransition;_supportTransform=globals.supportTransform;_supportPassiveEvents=globals.supportPassiveEvents;_supportResizeObserver=globals.supportResizeObserver;_supportMutationObserver=globals.supportMutationObserver;_restrictedMeasuring=globals.restrictedMeasuring;_documentElement=FRAMEWORK(targetElement.ownerDocument);_documentElementNative=_documentElement[0];_windowElement=FRAMEWORK(_documentElementNative.defaultView||_documentElementNative.parentWindow);_windowElementNative=_windowElement[0];_htmlElement=findFirst(_documentElement,"html");_bodyElement=findFirst(_htmlElement,"body");_targetElement=FRAMEWORK(targetElement);_targetElementNative=_targetElement[0];_isTextarea=_targetElement.is("textarea");_isBody=_targetElement.is("body");_documentMixed=_documentElementNative!==document;_domExists=_isTextarea?_targetElement.hasClass(_classNameTextareaElement)&&_targetElement.parent().hasClass(_classNameContentElement):_targetElement.hasClass(_classNameHostElement)&&_targetElement.children(_strDot+_classNamePaddingElement)[LEXICON.l];var initBodyScroll;var bodyMouseTouchDownListener;if(_nativeScrollbarIsOverlaid.x&&_nativeScrollbarIsOverlaid.y&&!_currentPreparedOptions.nativeScrollbarsOverlaid.initialize){dispatchCallback("onInitializationWithdrawn");if(_domExists){setupStructureDOM(true);setupScrollbarsDOM(true);setupScrollbarCornerDOM(true)}_destroyed=true;_sleeping=true;return _base}if(_isBody){initBodyScroll={};initBodyScroll.l=MATH.max(_targetElement[_strScrollLeft](),_htmlElement[_strScrollLeft](),_windowElement[_strScrollLeft]());initBodyScroll.t=MATH.max(_targetElement[_strScrollTop](),_htmlElement[_strScrollTop](),_windowElement[_strScrollTop]());bodyMouseTouchDownListener=function(){_viewportElement.removeAttr("tabindex");setupResponsiveEventListener(_viewportElement,_strMouseTouchDownEvent,bodyMouseTouchDownListener,true,true)}}setupStructureDOM();setupScrollbarsDOM();setupScrollbarCornerDOM();setupStructureEvents();setupScrollbarEvents(true);setupScrollbarEvents(false);setupScrollbarCornerEvents();createMutationObservers();setupResizeObserver(_sizeObserverElement,hostOnResized);if(_isBody){_viewportElement[_strScrollLeft](initBodyScroll.l)[_strScrollTop](initBodyScroll.t);if(document.activeElement==targetElement&&_viewportElementNative.focus){_viewportElement.attr("tabindex","-1");_viewportElementNative.focus();setupResponsiveEventListener(_viewportElement,_strMouseTouchDownEvent,bodyMouseTouchDownListener,false,true)}}_base.update(_strAuto);_initialized=true;dispatchCallback("onInitialized");each(_callbacksInitQeueue,function(index,value){dispatchCallback(value.n,value.a)});_callbacksInitQeueue=[];if(type(extensions)==TYPES.s)extensions=[extensions];if(COMPATIBILITY.isA(extensions))each(extensions,function(index,value){_base.addExt(value)});else if(FRAMEWORK.isPlainObject(extensions))each(extensions,function(key,value){_base.addExt(key,value)});
//add the transition class for transitions AFTER the first update & AFTER the applied extensions (for preventing unwanted transitions)
setTimeout(function(){if(_supportTransition&&!_destroyed)addClass(_hostElement,_classNameHostTransition)},333);return _base}if(_plugin.valid(construct(pluginTargetElement,options,extensions))){INSTANCES(pluginTargetElement,_base)}return _base}_plugin=window[PLUGINNAME]=function(pluginTargetElements,options,extensions){if(arguments[LEXICON.l]===0)return this;var arr=[];var optsIsPlainObj=FRAMEWORK.isPlainObject(options);var inst;var result;if(!pluginTargetElements)return optsIsPlainObj||!options?result:arr;/*
                   pluginTargetElements will be converted to:
                   1. A jQueryElement Array
                   2. A HTMLElement Array
                   3. A Array with a single HTML Element
                   so pluginTargetElements is always a array.
                */
pluginTargetElements=pluginTargetElements[LEXICON.l]!=undefined?pluginTargetElements:[pluginTargetElements[0]||pluginTargetElements];initOverlayScrollbarsStatics();if(pluginTargetElements[LEXICON.l]>0){if(optsIsPlainObj){FRAMEWORK.each(pluginTargetElements,function(i,v){inst=v;if(inst!==undefined)arr.push(OverlayScrollbarsInstance(inst,options,extensions,_pluginsGlobals,_pluginsAutoUpdateLoop))})}else{FRAMEWORK.each(pluginTargetElements,function(i,v){inst=INSTANCES(v);if(options==="!"&&_plugin.valid(inst)||COMPATIBILITY.type(options)==TYPES.f&&options(v,inst))arr.push(inst);else if(options===undefined)arr.push(inst)})}result=arr[LEXICON.l]===1?arr[0]:arr}return result};_plugin.globals=function(){initOverlayScrollbarsStatics();var globals=FRAMEWORK.extend(true,{},_pluginsGlobals);delete globals["msie"];return globals};_plugin.defaultOptions=function(newDefaultOptions){initOverlayScrollbarsStatics();var currDefaultOptions=_pluginsGlobals.defaultOptions;if(newDefaultOptions===undefined)return FRAMEWORK.extend(true,{},currDefaultOptions);_pluginsGlobals.defaultOptions=FRAMEWORK.extend(true,{},currDefaultOptions,_pluginsOptions._validate(newDefaultOptions,_pluginsOptions._template,true,currDefaultOptions)._default)};_plugin.valid=function(osInstance){return osInstance instanceof _plugin&&!osInstance.getState().destroyed};/**
             * Registers, Unregisters or returns a extension.
             * Register: Pass the name and the extension. (defaultOptions is optional)
             * Unregister: Pass the name and anything except a function as extension parameter.
             * Get extension: Pass the name of the extension which shall be got.
             * Get all extensions: Pass no arguments.
             * @param extensionName The name of the extension which shall be registered, unregistered or returned.
             * @param extension A function which generates the instance of the extension or anything other to remove a already registered extension.
             * @param defaultOptions The default options which shall be used for the registered extension.
             */
_plugin.extension=function(extensionName,extension,defaultOptions){var extNameTypeString=COMPATIBILITY.type(extensionName)==TYPES.s;var argLen=arguments[LEXICON.l];var i=0;if(argLen<1||!extNameTypeString){return FRAMEWORK.extend(true,{length:_pluginsExtensions[LEXICON.l]},_pluginsExtensions)}else if(extNameTypeString){if(COMPATIBILITY.type(extension)==TYPES.f){_pluginsExtensions.push({name:extensionName,extensionFactory:extension,defaultOptions:defaultOptions})}else{for(;i<_pluginsExtensions[LEXICON.l];i++){if(_pluginsExtensions[i].name===extensionName){if(argLen>1)_pluginsExtensions.splice(i,1);else return FRAMEWORK.extend(true,{},_pluginsExtensions[i])}}}}};return _plugin}();if(JQUERY&&JQUERY.fn){/**
             * The jQuery initialization interface.
             * @param options The initial options for the construction of the plugin. To initialize the plugin, this option has to be a object! If it isn't a object, the instance(s) are returned and the plugin wont be initialized.
             * @param extensions The extension(s) which shall be added right after initialization.
             * @returns {*} After initialization it returns the jQuery element array, else it returns the instance(s) of the elements which are selected.
             */
JQUERY.fn.overlayScrollbars=function(options,extensions){var _elements=this;if(JQUERY.isPlainObject(options)){JQUERY.each(_elements,function(){PLUGIN(this,options,extensions)});return _elements}else return PLUGIN(_elements,options)}}return PLUGIN});
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
	var registeredInModuleLoader;
	if (typeof define === 'function' && define.amd) {
		define(factory);
		registeredInModuleLoader = true;
	}
	if (typeof exports === 'object') {
		module.exports = factory();
		registeredInModuleLoader = true;
	}
	if (!registeredInModuleLoader) {
		var OldCookies = window.Cookies;
		var api = window.Cookies = factory();
		api.noConflict = function () {
			window.Cookies = OldCookies;
			return api;
		};
	}
}(function () {
	function extend () {
		var i = 0;
		var result = {};
		for (; i < arguments.length; i++) {
			var attributes = arguments[ i ];
			for (var key in attributes) {
				result[key] = attributes[key];
			}
		}
		return result;
	}

	function decode (s) {
		return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
	}

	function init (converter) {
		function api() {}

		function set (key, value, attributes) {
			if (typeof document === 'undefined') {
				return;
			}

			attributes = extend({
				path: '/'
			}, api.defaults, attributes);

			if (typeof attributes.expires === 'number') {
				attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);
			}

			// We're using "expires" because "max-age" is not supported by IE
			attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

			try {
				var result = JSON.stringify(value);
				if (/^[\{\[]/.test(result)) {
					value = result;
				}
			} catch (e) {}

			value = converter.write ?
				converter.write(value, key) :
				encodeURIComponent(String(value))
					.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);

			key = encodeURIComponent(String(key))
				.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
				.replace(/[\(\)]/g, escape);

			var stringifiedAttributes = '';
			for (var attributeName in attributes) {
				if (!attributes[attributeName]) {
					continue;
				}
				stringifiedAttributes += '; ' + attributeName;
				if (attributes[attributeName] === true) {
					continue;
				}

				// Considers RFC 6265 section 5.2:
				// ...
				// 3.  If the remaining unparsed-attributes contains a %x3B (";")
				//     character:
				// Consume the characters of the unparsed-attributes up to,
				// not including, the first %x3B (";") character.
				// ...
				stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
			}

			return (document.cookie = key + '=' + value + stringifiedAttributes);
		}

		function get (key, json) {
			if (typeof document === 'undefined') {
				return;
			}

			var jar = {};
			// To prevent the for loop in the first place assign an empty array
			// in case there are no cookies at all.
			var cookies = document.cookie ? document.cookie.split('; ') : [];
			var i = 0;

			for (; i < cookies.length; i++) {
				var parts = cookies[i].split('=');
				var cookie = parts.slice(1).join('=');

				if (!json && cookie.charAt(0) === '"') {
					cookie = cookie.slice(1, -1);
				}

				try {
					var name = decode(parts[0]);
					cookie = (converter.read || converter)(cookie, name) ||
						decode(cookie);

					if (json) {
						try {
							cookie = JSON.parse(cookie);
						} catch (e) {}
					}

					jar[name] = cookie;

					if (key === name) {
						break;
					}
				} catch (e) {}
			}

			return key ? jar[key] : jar;
		}

		api.set = set;
		api.get = function (key) {
			return get(key, false /* read as raw */);
		};
		api.getJSON = function (key) {
			return get(key, true /* read as json */);
		};
		api.remove = function (key, attributes) {
			set(key, '', extend(attributes, {
				expires: -1
			}));
		};

		api.defaults = {};

		api.withConverter = init;

		return api;
	}

	return init(function () {});
}));

var jq = jQuery.noConflict();

function onInvisibleRecaptchaSubmit (token) {
    jq('form.validate-form').submit(); 
    return true;
}

jq(document).ready(function() {
    
    jq( ".ir-sidebar" ).click(function() {
      jq( '.ir-sidebar .glyphicon-menu-down' ).toggleClass( "glyphicon-menu-up" );
    });
    
    jq(".ir-sidebar").focusout(function(){
        jq( '.glyphicon' ).removeClass( "glyphicon-menu-up" );
    });
    
    jq('.mobile-nav-trigger').click(function(){
        jq('.main-nav').css('height', 'auto');
    });
    
    //Set Cursor pointer to anything with data-toggle
    jq("*[data-toggle]").css( 'cursor', 'pointer' );
    
    jq('header.affixed').affix({
        offset:{
            top: 1
        }
    });
    
    //Circle Stat with Percentage Animation
    var divPercentage = jq('.stats-row-w-percents');
    if(divPercentage.length) {
        jq(document).bind('scroll', function(ev) {
            var scrollOffset = jq(document).scrollTop();
            var containerOffset = jq('.stats-row-w-percents').offset().top - window.innerHeight;
            if (scrollOffset > containerOffset) {
                jq('.stats-row-w-percents .stat').each(function() {
                    var percDiv = jq(this).find('.number'),
                    svgElm = jq(this).find('.circle'),
                    percentNumber = jq(this).attr('data-percent');
                    svgElm.attr('stroke-dasharray', percentNumber + ', 100');
                    svgElm.addClass('active');
                    jq({percentage: 0}).stop(true).animate({percentage: percentNumber}, {
                        duration : 2000,
                        step: function () {
                        var percentageVal = Math.round(this.percentage);
                        percDiv.text(percentageVal + '%');
                    }
                    }).promise().done(function () {
                        percDiv.text(percentNumber + "%");
                    });
                });
                jq(document).unbind('scroll');
            }
        });
    }
    
    var subNav = jq('.sub-navigation.affixed');
    if(subNav.length) {
        jq(subNav).affix({
            offset: { 
                top: jq(".sub-navigation").offset().top - jq("header").outerHeight()
            }
        });
    }

    var menuRight = document.getElementById( 'mobile-nav' ),
    showRight = document.getElementById( 'showRight' ),
    body = document.body;
    
    if (showRight) {
        showRight.onclick = function() {
            jq(this).toggleClass("active");
            jq('body').toggleClass('push-to-left');
            jq(menuRight).toggleClass("cbp-spmenu-open");
            disableOther( 'showRight' );
            toggleMenuKeybind();
        };
    }
    function disableOther( button ) {
        if( button !== 'showRight' ) {
          jq(showRight).toggleClass("disabled");
        }
    }
    
    /**
     * This function handles keydown events when a full screen nav is present, allowing
     * the navigation to be closed by pressing the esc key
     */
    
     function toggleMenuKeybind() {
        var $body = jq('body'),
            $body_events = $body.data("events");
            
        if ($body_events != null && typeof($body_events.keydown) != undefined) {
            $body.off('keydown');
        }else {
        $body.on('keydown', function(e) {
            if (e.which == 27) {
                jq('.main-nav').toggleClass("active");
                jq('body').toggleClass('push-to-left');
                jq(menuRight).toggleClass("cbp-spmenu-open");
                disableOther( 'showRight' );
                $body.off('keydown');
            }
        });
        }
    }
    
    //Email Alerts Form scroll-to functionality upon click
    // jq('#email-alerts-cta-form').on('shown.bs.collapse', function (e) {
    //     jq('html,body').animate({
    //         scrollTop: jq('#email-alerts-cta-form').offset().top -80
    //     }, 500); 
    // }); 

    // Basic Form Validation
    var validator = jq(".validate-form");
    
    validator.each( function() {
        jq(this).validate({
            errorPlacement: function(error, element) {
                error.appendTo( element.parent() );
            },
            submitHandler: function(form) {
                if (grecaptcha.getResponse()) {
                        form.submit();
                }else{
                    grecaptcha.reset();
                    grecaptcha.execute();
                }    
            }
        });
    });
    
    jq.validator.methods.email = function( value, element ) {
      return this.optional( element ) || /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test( value );
    }
    
    jq('.toggle-button').click(function() {
        jq(this).toggleClass("open");
    });
    
    jq('.fancybox').fancybox({
        helpers: {
            overlay: {
                locked: true
            }
        },
        minHeight: '600'
    });
    jq('.fancybox-sec-filing').fancybox({
        helpers: {
            overlay: {
                locked: true
            }
        },
        minHeight: '900'
    });
    
    jq('.fancybox-bio').fancybox({
        helpers: {
            overlay: {
                locked: true
            }
        },
        minHeight: '0'
    });
    
    jq(".fancybox\\.iframe").fancybox({
        type: 'iframe',
        iframe : {
            css : {
                width : '80%',
                maxWidth: '1024px',
            }
        }
    });
    
    jq('.fancybox-modal').fancybox({
        width: 970,
        autoSize: false,
        height: 'auto'
    });
    
    //Bootrap Select
    jq('.selectpicker').selectpicker({
        iconBase: 'DIN',
        tickIcon: 'no-icon'
    });
    
    //File input
    var fileInput = jq('.file-text input');
    fileInput.change(function(e){
        $this = jq(this);
        var val = $this.val().split('\\');
        var length = val.length;
        var filename = val[length-1];
        jq(this).parent('.file-text').children('.text-wrapper').text(filename);
    });

    //Video Player
    if (Modernizr.touchevents) {
        jq('body').addClass('touch-device');
        jq('.fancybox,.thickbox').each(function() {
            jq(this).removeClass('thickbox').removeClass('fancybox').attr('target', '_blank');    
        });     
    }

    // SEC Filing Filters - auto submit form
    jq('#sec-filing-filter select').not('.select-url').on('change', function(e) {
        jq('#sec-filing-filter select.select-url').attr('name', '');
        jq(this).closest('form').submit(); 
    });

    jq('#sec-filing-filter .select-url').on('change', function(e) {
        var href = jq(this).val();
        if (href) {
            var year = jq('#year').val();
            if (year) {
                href += '?year=' + year;    
            }
            window.location = href;
        }
    });

});

// Quote Box
function populateQuoteBox(quote) {

    if (jq('.ir-quote-box').length > 0) {
        var quoteContainer = jq('.ir-quote-box[data-symbol="' + quote.symbol + '"]');
    } else {
        var quoteContainer = jq('.quote-box[data-symbol="' + quote.symbol + '"]');
        var home_change = true;
    }
        
    var quote_price = checkQuoteProperty(quote.last),
        quote_change = checkQuoteProperty(quote.change),
        quote_change_pct = checkQuoteProperty(quote.change_pct),
        quote_high = checkQuoteProperty(quote.high),
        quote_low = checkQuoteProperty(quote.low),
        quote_day_low = checkQuoteProperty(quote.day_low),
        quote_day_high = checkQuoteProperty(quote.day_high),
        quote_volume = quote.volume;
        // Quotemedia's volume already comes back formatted, so we do not need to custom format it
        if (quote_volume && quote.use_quotemedia !== true) {
            quote_volume = quote_volume.replace(/\,/g,'');
            quote_volume = parseInt(quote_volume,10);
            quote_volume = abbrNum(quote_volume, 2);
        }   
   

    quoteContainer.find('.time').html('<time />');
    quoteContainer.find('time').attr('datetime', quote.last_trade_time).html(quote.last_trade_time);  
    
    
    if (quote_price == 'N/A') {
        quoteContainer.find('.price .value').html('N/A');
    } else {
          quoteContainer.find('.price .value').html('$' + quote_price);
    }

    if (quote.market_cap == 'N/A') {
        quoteContainer.find('.market-cap .value').html('N/A');
    } else {
        quoteContainer.find('.market-cap .value').html('$' + quote.market_cap);
    }
    
     if (quote.volume == null) {
         quoteContainer.find('.volume .value').html('N/A');
     }else {
         quoteContainer.find('.volume .value').html(quote_volume);
     }

    var change = quote_change.replace(/[+|-]/g, '');

    
    quoteContainer.find('.change .value .number').html(change);
    
    if(quote_change_pct != '0.00' && quote_change_pct != 'N/A' && quote_change_pct != '0' ) {
        quoteContainer.find('.change .value .percent').html('(' + quote_change_pct + '%)');
    }
    if (home_change) {
        quoteContainer.find('.change .home-change-value').html(change);
    }

    if (quote.change.indexOf('+') > -1 && change !== '0' && change !== '0.00') {
        quoteContainer.find('.change').addClass('up');
    } else if (quote.change.indexOf('-') > -1) {
        quoteContainer.find('.change').addClass('down');
    }
    
    if (quote.low == quote.high) {
        week = quote_low;    
    } else {
        var week = quote_low + ' - ' + quote_high;         
    }
    quoteContainer.find('.week-range .value').html(week);

    if (quote.day_low != 'N/A' && quote.day_high != 'N/A') {
        if (quote.day_low == quote.day_high) {
            var day = quote_day_low;
        } else {
            day = quote_day_low + ' - ' + quote_day_high;
        }
        quoteContainer.find('.day-range .value').html(day);
    } else {
        quoteContainer.find('.day-range .value').html(quote.last)
    }
    
    jq('.jsrange').jsRange({
        dayLow: quote_day_low,
        dayHigh: quote_day_high,
        yearLow: quote_low,
        yearHigh: quote_high
    });

}

// SEC Filings expand
jq(".spr-expandable").hide();
jq(".spr-toggle-expandable").click(function() {
	jq(this).next(".spr-expandable").toggle("blind");
});

// Equal Heights
jq(window).load(function() {
    checkWidth();
});

function checkQuoteProperty(value) {
    return (value != "N/A") ? parseFloat(value).toFixed(2) : value;
}

function abbrNum(number, decPlaces) {
    var orig = number;
    var dec = decPlaces;
    // 2 decimal places => 100, 3 => 1000, etc
    decPlaces = Math.pow(10, decPlaces);

    // Enumerate number abbreviations
    var abbrev = ["K", "M", "B", "T"];

    // Go through the array backwards, so we do the largest first
    for (var i = abbrev.length - 1; i >= 0; i--) {

        // Convert array index to "1000", "1000000", etc
        var size = Math.pow(10, (i + 1) * 3);

        // If the number is bigger or equal do the abbreviation
        if (size <= number) {
            // Here, we multiply by decPlaces, round, and then divide by decPlaces.
            // This gives us nice rounding to a particular decimal place.
            number = Math.round(number * decPlaces / size) / decPlaces;

            // Handle special case where we round up to the next abbreviation
            if ((number == 1000) && (i < abbrev.length - 1)) {
                number = 1;
                i++;
            }

            // console.log(number);
            // Add the letter for the abbreviation
            number += abbrev[i];

            // We are done... stop
            break;
        }
    }

    //console.log('abbrNum('+ orig + ', ' + dec + ') = ' + number);
    return number;
}

// Add commas to numbers
jq.fn.digits = function() {
    return this.each(function() {
        jq(this).text(jq(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
    });
};

//Smooth scroll to
function goToByScroll(id) {
    jq('html,body').animate({
        scrollTop: jq(id).offset().top - 90
    }, 'slow');
}
jq('.smooth').click(function() {
    goToByScroll(jq(this).attr('href'));
    return false;
});

//Check Width
var resizeTimer;
jq(window).resize(function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(checkWidth, 250);
});

function checkWidth() {
    if (jq(window).width() > 767) {
        jq('.js-same-height, .js-same-height-row').each(function() {
            jq(this).addClass('active');
        });
        sameHeight();
    } else {
        jq('.js-same-height, .js-same-height-row').each(function() {
            jq(this).removeClass('active');
        });
        jq(".js-same-height,.js-same-height-row .js-height").css('min-height', '').css('height', '');
    }
    if (jq(window).width() < 769) {
        jq('.fancybox').each(function() {
            jq(this).addClass('fancybox-holder').removeClass('fancybox');
        });
        jq('.thickbox').each(function() {
            jq(this).addClass('thickbox-holder').removeClass('thickbox');
        });
    } else {
        jq('.fancybox-holder').each(function() {
            jq(this).addClass('fancybox').removeClass('fancybox-holder');
        });
        jq('.thickbox-holder').each(function() {
            jq(this).addClass('thickbox').removeClass('thickbox-holder');
        });
    }

}

//Match Height With Delay for Qmod. Add class same-height to elements
if (isQmod) {    
    var matchHeightInterval;

    matchHeightInterval = setInterval(matchHeightDelay, 50);
    
    function matchHeightDelay()
    {
        if (jq('.qmod-ui-tool').length == 0) return;
        jq('.same-height').matchHeight(); 
        clearInterval(matchHeightInterval);
    }
}


// Same Height
function sameHeight() {
    jq(".js-same-height-row").each(function() {
        var $maxHeight = 0,
            $window_width = jq(window).width();
        jq('.js-same-height', this).css({
            'height': 'auto',
            'min-height': 0
        });
        if ((jq(this).data('cutoff') && jq(this).data('cutoff') >= $window_width) || $window_width < 768) {
            return false;
        }
        jq('.js-same-height', this).each(function() {
            if (jq(this).outerHeight() > $maxHeight) {
                $maxHeight = jq(this).outerHeight();
            }
        }).css('min-height', $maxHeight);
        jq('.js-height', this).css({
            'height': $maxHeight,
            'min-height': 0
        });
    });
}

// Fixes XBRL Filing Close Button click event being unbound by an early call to tb_remove
jq(document).ajaxComplete(function() {
    jq('#TB_closeAjaxWindow #TB_closeWindowButton').on('mousedown', function() {
        tb_remove();
    });
});

// Checkbox Groups
var update_sec_checkboxes = function() {
    if (jq('#ir-sec-all').is(':checked')) {
        jq(".ir-sec-sub").prop('checked', true).prop('disabled', true);
    } else {
        jq(".ir-sec-sub").prop('disabled', false).prop('checked', false);
    }
}
jq('#ir-sec-all').change(update_sec_checkboxes);
if (jq('#ir-sec-all').is(':checked')) {
    jq(".ir-sec-sub").prop('checked', true).prop('disabled', true);
}

// Privacy Popup
var privacyPopup = jq('#privacy-popup');
if (privacyPopup.length) {
    var privacyPopupCookie = Cookies.get('amdPrivacyPopup');
    if (!privacyPopupCookie) {
        privacyPopup.addClass('fade').removeClass('hide').addClass('in');
        var website_domain = website_base_url.replace('https://', '');
        Cookies.set('amdPrivacyPopup', 1, {secure: true, domain: website_domain});
    }
    jq('button', privacyPopup).click(function(){
        privacyPopup.removeClass('in').delay(1000).addClass('hide');    
    });
}


// var OneTrustInterval = setInterval(function () {
//     if (typeof OneTrust !== 'undefined') {
//         OneTrust.InsertHtml('<h1>Test</h1>', 'body', null, null, '4');
//     }
// }, 400);
